(self.webpackChunkbitzy_notes=self.webpackChunkbitzy_notes||[]).push([[179],{8255:et=>{function Te(V){return Promise.resolve().then(()=>{var f=new Error("Cannot find module '"+V+"'");throw f.code="MODULE_NOT_FOUND",f})}Te.keys=()=>[],Te.resolve=Te,Te.id=8255,et.exports=Te},3018:(et,Te,V)=>{"use strict";V.d(Te,{deG:()=>pa,tb:()=>mD,AFp:()=>fD,ip1:()=>xg,CZH:()=>If,hGG:()=>Vx,z2F:()=>Td,sBO:()=>EC,Sil:()=>Cd,_Vd:()=>Kr,EJc:()=>wd,SBq:()=>os,qLn:()=>_e,vpe:()=>uo,gxx:()=>Cc,tBr:()=>lc,XFs:()=>Ne,OlP:()=>En,zs3:()=>zt,ZZ4:()=>ug,aQg:()=>cd,soG:()=>v_,YKP:()=>as,v3s:()=>PD,h0i:()=>ld,PXZ:()=>Cx,R0b:()=>Kt,FiY:()=>Ri,Lbi:()=>gD,g9A:()=>rb,Qsj:()=>lC,FYo:()=>sg,JOm:()=>ba,Tiy:()=>nw,q3G:()=>mn,tp0:()=>Ea,EAV:()=>kD,Rgc:()=>rf,dDg:()=>_x,DyG:()=>uc,q4F:()=>ud,GfV:()=>pC,s_b:()=>Vy,ifc:()=>fn,eFA:()=>ND,G48:()=>w_,Gpc:()=>de,X6Q:()=>ku,_c5:()=>BD,VLi:()=>AD,c2e:()=>yD,zSh:()=>Hl,wAp:()=>it,vHH:()=>he,EiD:()=>Xf,mCW:()=>du,qzn:()=>ui,JVY:()=>im,pB0:()=>om,eBb:()=>Yf,L6k:()=>sm,LAX:()=>fc,cg1:()=>BE,Tjo:()=>Nd,kL8:()=>VI,yhl:()=>wa,dqk:()=>j,sIi:()=>ql,CqO:()=>bE,QGY:()=>EE,F4k:()=>wE,RDi:()=>$i,AaK:()=>Z,z3N:()=>Mi,qOj:()=>Ap,TTD:()=>ol,_Bn:()=>ew,xp6:()=>Nm,uIk:()=>Rp,ekj:()=>_y,Suo:()=>s_,Xpm:()=>Go,lG2:()=>Rf,Yz7:()=>on,cJS:()=>bi,oAB:()=>Ba,Yjl:()=>Uu,Y36:()=>Iu,_UZ:()=>jh,qZA:()=>yE,TgZ:()=>mE,EpF:()=>yI,n5z:()=>oc,Ikx:()=>Du,LFG:()=>Pn,$8M:()=>Zi,NdJ:()=>ly,CRH:()=>YC,oxw:()=>fy,ALo:()=>n_,xi3:()=>r_,Q6J:()=>cy,iGM:()=>i_,CHM:()=>ul,LSH:()=>Xi,kYT:()=>Ls,YNc:()=>X0,_uU:()=>OI,Oqu:()=>OE,hij:()=>Hp});var f=V(9765),ee=V(5319),F=V(7574),ce=V(6682),te=V(2441);var le=V(1307);function W(){return new f.xQ}function L(r){for(let i in r)if(r[i]===L)return i;throw Error("Could not find renamed property on target object.")}function Q(r,i){for(const o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=i[o])}function Z(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Z).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function re(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const we=L({__forward_ref__:L});function de(r){return r.__forward_ref__=de,r.toString=function(){return Z(this())},r}function G(r){return me(r)?r():r}function me(r){return"function"==typeof r&&r.hasOwnProperty(we)&&r.__forward_ref__===de}class he extends Error{constructor(i,o){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,o)),this.code=i}}function Le(r){return"string"==typeof r?r:null==r?"":String(r)}function yt(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Le(r)}function oe(r,i){const o=i?` in ${i}`:"";throw new he("201",`No provider for ${yt(r)} found${o}`)}function dn(r,i){null==r&&function(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function on(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function bi(r){return{providers:r.providers||[],imports:r.imports||[]}}function Tr(r){return ti(r,In)||ti(r,lo)}function ti(r,i){return r.hasOwnProperty(i)?r[i]:null}function ni(r){return r&&(r.hasOwnProperty(pr)||r.hasOwnProperty(st))?r[pr]:null}const In=L({\u0275prov:L}),pr=L({\u0275inj:L}),lo=L({ngInjectableDef:L}),st=L({ngInjectorDef:L});var Ne=(()=>((Ne=Ne||{})[Ne.Default=0]="Default",Ne[Ne.Host=1]="Host",Ne[Ne.Self=2]="Self",Ne[Ne.SkipSelf=4]="SkipSelf",Ne[Ne.Optional=8]="Optional",Ne))();let Bt;function hn(r){const i=Bt;return Bt=r,i}function kt(r,i,o){const u=Tr(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Ne.Optional?null:void 0!==i?i:void oe(Z(r),"Injector")}function Qe(r){return{toString:r}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),fn=(()=>((fn=fn||{})[fn.Emulated=0]="Emulated",fn[fn.None=2]="None",fn[fn.ShadowDom=3]="ShadowDom",fn))();const Ar="undefined"!=typeof globalThis&&globalThis,ho="undefined"!=typeof window&&window,$="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j=Ar||"undefined"!=typeof global&&global||ho||$,qe={},$e=[],Ft=L({\u0275cmp:L}),Xt=L({\u0275dir:L}),Yt=L({\u0275pipe:L}),Br=L({\u0275mod:L}),Dt=L({\u0275loc:L}),en=L({\u0275fac:L}),Jn=L({__NG_ELEMENT_ID__:L});let Lu=0;function Go(r){return Qe(()=>{const o={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||$e,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||fn.Emulated,id:"c",styles:r.styles||$e,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,d=r.features,m=r.pipes;return u.id+=Lu++,u.inputs=Ci(r.inputs,o),u.outputs=Ci(r.outputs),d&&d.forEach(y=>y(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(Ua):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(Vu):null,u})}function Ua(r){return Xn(r)||function(r){return r[Xt]||null}(r)}function Vu(r){return function(r){return r[Yt]||null}(r)}const Fs={};function Ba(r){return Qe(()=>{const i={type:r.type,bootstrap:r.bootstrap||$e,declarations:r.declarations||$e,imports:r.imports||$e,exports:r.exports||$e,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(Fs[r.id]=r.type),i})}function Ls(r,i){return Qe(()=>{const o=$n(r,!0);o.declarations=i.declarations||$e,o.imports=i.imports||$e,o.exports=i.exports||$e})}function Ci(r,i){if(null==r)return qe;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=u,i&&(i[c]=d)}return o}const Rf=Go;function Uu(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Xn(r){return r[Ft]||null}function $n(r,i){const o=r[Br]||null;if(!o&&!0===i)throw new Error(`Type ${Z(r)} does not have '\u0275mod' property.`);return o}function $r(r){return Array.isArray(r)&&"object"==typeof r[1]}function $t(r){return Array.isArray(r)&&!0===r[1]}function Ha(r){return 0!=(8&r.flags)}function ju(r){return 2==(2&r.flags)}function Hr(r){return 1==(1&r.flags)}function Ti(r){return null!==r.template}function rl(r){return 0!=(512&r[2])}function Sr(r,i){return r.hasOwnProperty(en)?r[en]:null}class Ai{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function ol(){return _o}function _o(r){return r.type.prototype.ngOnChanges&&(r.setInput=Gd),Si}function Si(){const r=vo(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===qe)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function Gd(r,i,o,u){const c=vo(r)||function(r,i){return r[Of]=i}(r,{previous:qe,current:null}),d=c.current||(c.current={}),m=c.previous,y=this.declaredInputs[o],E=m[y];d[y]=new Ai(E&&E.currentValue,i,m===qe),r[u]=i}ol.ngInherit=!0;const Of="__ngSimpleChanges__";function vo(r){return r[Of]||null}let $s;function $i(r){$s=r}function an(r){return!!r.listen}const Xo={createRenderer:(r,i)=>void 0!==$s?$s:"undefined"!=typeof document?document:void 0};function bt(r){for(;Array.isArray(r);)r=r[0];return r}function Wa(r,i){return bt(i[r])}function mr(r,i){return bt(i[r.index])}function Hi(r,i){return r.data[i]}function qn(r,i){const o=i[r];return $r(o)?o:o[0]}function bo(r){return 4==(4&r[2])}function ea(r){return 128==(128&r[2])}function Hs(r,i){return null==i?null:r[i]}function ta(r){r[18]=0}function Zu(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const ut={lFrame:Ju(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function al(){return ut.bindingsEnabled}function Se(){return ut.lFrame.lView}function Tt(){return ut.lFrame.tView}function ul(r){return ut.lFrame.contextLView=r,r[8]}function vn(){let r=Zd();for(;null!==r&&64===r.type;)r=r.parent;return r}function Zd(){return ut.lFrame.currentTNode}function ri(r,i){const o=ut.lFrame;o.currentTNode=r,o.isParent=i}function Za(){return ut.lFrame.isParent}function ia(){return ut.isInCheckNoChangesMode}function Gi(r){ut.isInCheckNoChangesMode=r}function qi(){return ut.lFrame.bindingIndex++}function cl(r,i){const o=ut.lFrame;o.bindingIndex=o.bindingRootIndex=r,sa(i)}function sa(r){ut.lFrame.currentDirectiveIndex=r}function Co(){return ut.lFrame.currentQueryIndex}function ll(r){ut.lFrame.currentQueryIndex=r}function kf(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Qd(r,i,o){if(o&Ne.SkipSelf){let c=i,d=r;for(;!(c=c.parent,null!==c||o&Ne.Host||(c=kf(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;i=c,r=d}const u=ut.lFrame=Jd();return u.currentTNode=i,u.lView=r,!0}function Do(r){const i=Jd(),o=r[1];ut.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Jd(){const r=ut.lFrame,i=null===r?null:r.child;return null===i?Ju(r):i}function Ju(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Xd(){const r=ut.lFrame;return ut.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const q_=Xd;function Ff(){const r=Xd();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Gr(){return ut.lFrame.selectedIndex}function Wi(r){ut.lFrame.selectedIndex=r}function un(){const r=ut.lFrame;return Hi(r.tView,r.selectedIndex)}function oa(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:y,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:T}=d;m&&(r.contentHooks||(r.contentHooks=[])).push(-o,m),y&&((r.contentHooks||(r.contentHooks=[])).push(o,y),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,y)),E&&(r.viewHooks||(r.viewHooks=[])).push(-o,E),C&&((r.viewHooks||(r.viewHooks=[])).push(o,C),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,C)),null!=T&&(r.destroyHooks||(r.destroyHooks=[])).push(o,T)}}function aa(r,i,o){pl(r,i,3,o)}function fl(r,i,o,u){(3&r[2])===o&&pl(r,i,o,u)}function To(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function pl(r,i,o,u){const d=null!=u?u:-1,m=i.length-1;let y=0;for(let E=void 0!==u?65535&r[18]:0;E<m;E++)if("number"==typeof i[E+1]){if(y=i[E],null!=u&&y>=u)break}else i[E]<0&&(r[18]+=65536),(y<d||-1==d)&&(gl(r,o,i,E),r[18]=(4294901760&r[18])+E+2),E++}function gl(r,i,o,u){const c=o[u]<0,d=o[u+1],y=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(y)}finally{}}}else try{d.call(y)}finally{}}class Qa{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function cn(r,i,o){const u=an(r);let c=0;for(;c<o.length;){const d=o[c];if("number"==typeof d){if(0!==d)break;c++;const m=o[c++],y=o[c++],E=o[c++];u?r.setAttribute(i,y,E,m):i.setAttributeNS(m,y,E)}else{const m=d,y=o[++c];ec(m)?u&&r.setProperty(i,m,y):u?r.setAttribute(i,m,y):i.setAttribute(m,y),c++}}return c}function Xa(r){return 3===r||4===r||6===r}function ec(r){return 64===r.charCodeAt(0)}function eu(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||tc(r,o,c,null,-1===o||2===o?i[++u]:null)}}return r}function tc(r,i,o,u,c){let d=0,m=r.length;if(-1===i)m=-1;else for(;d<r.length;){const y=r[d++];if("number"==typeof y){if(y===i){m=-1;break}if(y>i){m=d-1;break}}}for(;d<r.length;){const y=r[d];if("number"==typeof y)break;if(y===o){if(null===u)return void(null!==c&&(r[d+1]=c));if(u===r[d+1])return void(r[d+2]=c)}d++,null!==u&&d++,null!==c&&d++}-1!==m&&(r.splice(m,0,i),d=m+1),r.splice(d++,0,o),null!==u&&r.splice(d++,0,u),null!==c&&r.splice(d++,0,c)}function nc(r){return-1!==r}function tu(r){return 32767&r}function nu(r,i){let o=function(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let ru=!0;function ua(r){const i=ru;return ru=r,i}let Xe=0;function bs(r,i){const o=Ao(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,nr(u.data,r),nr(i,null),nr(u.blueprint,null));const c=zs(r,i),d=r.injectorIndex;if(nc(c)){const m=tu(c),y=nu(c,i),E=y[1].data;for(let C=0;C<8;C++)i[d+C]=y[m+C]|E[m+C]}return i[d+8]=c,d}function nr(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Ao(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function zs(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){const d=c[1],m=d.type;if(u=2===m?d.declTNode:1===m?c[6]:null,null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Fn(r,i,o){!function(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Jn)&&(u=o[Jn]),null==u&&(u=o[Jn]=Xe++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function Kg(r,i,o){if(o&Ne.Optional)return r;oe(i,"NodeInjector")}function la(r,i,o,u){if(o&Ne.Optional&&void 0===u&&(u=null),0==(o&(Ne.Self|Ne.Host))){const c=r[9],d=hn(void 0);try{return c?c.get(i,u,o&Ne.Optional):kt(i,u,o&Ne.Optional)}finally{hn(d)}}return Kg(u,i,o)}function ii(r,i,o,u=Ne.Default,c){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Jn)?r[Jn]:void 0;return"number"==typeof i?i>=0?255&i:yl:i}(o);if("function"==typeof d){if(!Qd(i,r,u))return u&Ne.Host?Kg(c,o,u):la(i,o,u,c);try{const m=d(u);if(null!=m||u&Ne.Optional)return m;oe(o)}finally{q_()}}else if("number"==typeof d){let m=null,y=Ao(r,i),E=-1,C=u&Ne.Host?i[16][6]:null;for((-1===y||u&Ne.SkipSelf)&&(E=-1===y?zs(r,i):i[y+8],-1!==E&&So(u,!1)?(m=i[1],y=tu(E),i=nu(E,i)):y=-1);-1!==y;){const T=i[1];if(Uf(d,y,T.data)){const N=ic(y,i,o,m,u,C);if(N!==rh)return N}E=i[y+8],-1!==E&&So(u,i[1].data[y+8]===C)&&Uf(d,y,i)?(m=T,y=tu(E),i=nu(E,i)):y=-1}}}return la(i,o,u,c)}const rh={};function yl(){return new si(vn(),Se())}function ic(r,i,o,u,c,d){const m=i[1],y=m.data[r+8],T=da(y,m,o,null==u?ju(y)&&ru:u!=m&&0!=(3&y.type),c&Ne.Host&&d===y);return null!==T?ha(i,m,T,y):rh}function da(r,i,o,u,c){const d=r.providerIndexes,m=i.data,y=1048575&d,E=r.directiveStart,T=d>>20,O=c?y+T:r.directiveEnd;for(let B=u?y:y+T;B<O;B++){const q=m[B];if(B<E&&o===q||B>=E&&q.type===o)return B}if(c){const B=m[E];if(B&&Ti(B)&&B.type===o)return E}return null}function ha(r,i,o,u){let c=r[o];const d=i.data;if(function(r){return r instanceof Qa}(c)){const m=c;m.resolving&&function(r,i){throw new he("200",`Circular dependency in DI detected for ${r}`)}(yt(d[o]));const y=ua(m.canSeeViewProviders);m.resolving=!0;const E=m.injectImpl?hn(m.injectImpl):null;Qd(r,u,Ne.Default);try{c=r[o]=m.factory(void 0,d,r,u),i.firstCreatePass&&o>=u.directiveStart&&function(r,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:d}=i.type.prototype;if(u){const m=_o(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,m)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],i)}finally{null!==E&&hn(E),ua(y),m.resolving=!1,q_()}}return c}function Uf(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function So(r,i){return!(r&Ne.Self||r&Ne.Host&&i)}class si{constructor(i,o){this._tNode=i,this._lView=o}get(i,o){return ii(this._tNode,this._lView,i,void 0,o)}}function oc(r){return Qe(()=>{const i=r.prototype.constructor,o=i[en]||ac(i),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const d=c[en]||ac(c);if(d&&d!==o)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function ac(r){return me(r)?()=>{const i=ac(G(r));return i&&i()}:Sr(r)}function Zi(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const d=o[c];if(Xa(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(d===i)return o[c+1];c+=2}}}return null}(vn(),r)}const Zs="__parameters__";function fa(r,i,o){return Qe(()=>{const u=function(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...d){if(this instanceof c)return u.apply(this,d),this;const m=new c(...d);return y.annotation=m,y;function y(E,C,T){const N=E.hasOwnProperty(Zs)?E[Zs]:Object.defineProperty(E,Zs,{value:[]})[Zs];for(;N.length<=T;)N.push(null);return(N[T]=N[T]||[]).push(m),E}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class En{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=on({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pa=new En("AnalyzeForEntryComponents"),uc=Function;function oi(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let u=r[o];Array.isArray(u)?(i===r&&(i=r.slice(0,o)),oi(u,i)):i!==r&&i.push(u)}return i}function qr(r,i){r.forEach(o=>Array.isArray(o)?qr(o,i):i(o))}function Yi(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function Ds(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function I(r,i,o){let u=x(r,i);return u>=0?r[1|u]=o:(u=~u,function(r,i,o,u){let c=r.length;if(c==i)r.push(o,u);else if(1===c)r.push(u,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>i;)r[c]=r[c-2],c--;r[i]=o,r[i+1]=u}}(r,u,i,o)),u}function D(r,i){const o=x(r,i);if(o>=0)return r[1|o]}function x(r,i){return function(r,i,o){let u=0,c=r.length>>o;for(;c!==u;){const d=u+(c-u>>1),m=r[d<<o];if(i===m)return d<<o;m>i?c=d:u=d+1}return~(c<<o)}(r,i,1)}const Qi={},su="__NG_DI_FLAG__",ai="ngTempTokenPath",Ts=/\n/gm,Il="__source",Dl=L({provide:String,useValue:L});let _a;function ou(r){const i=_a;return _a=r,i}function z_(r,i=Ne.Default){if(void 0===_a)throw new Error("inject() must be called from an injection context");return null===_a?kt(r,void 0,i):_a.get(r,i&Ne.Optional?null:void 0,i)}function Pn(r,i=Ne.Default){return(Bt||z_)(G(r),i)}function va(r){const i=[];for(let o=0;o<r.length;o++){const u=G(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,d=Ne.Default;for(let m=0;m<u.length;m++){const y=u[m],E=Jg(y);"number"==typeof E?-1===E?c=y.token:d|=E:c=y}i.push(Pn(c,d))}else i.push(Pn(u))}return i}function cc(r,i){return r[su]=i,r.prototype[su]=i,r}function Jg(r){return r[su]}function ir(r,i,o,u){const c=r[ai];throw i[Il]&&c.unshift(i[Il]),r.message=function(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=Z(i);if(Array.isArray(i))c=i.map(Z).join(" -> ");else if("object"==typeof i){let d=[];for(let m in i)if(i.hasOwnProperty(m)){let y=i[m];d.push(m+":"+("string"==typeof y?JSON.stringify(y):Z(y)))}c=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(Ts,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[ai]=null,r}const lc=cc(fa("Inject",r=>({token:r})),-1),Ri=cc(fa("Optional"),8),Ea=cc(fa("SkipSelf"),4);let No;function Js(r){var i;return(null===(i=function(){if(void 0===No&&(No=null,j.trustedTypes))try{No=j.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return No}())||void 0===i?void 0:i.createHTML(r))||r}class cu{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Q_ extends cu{getTypeName(){return"HTML"}}class $b extends cu{getTypeName(){return"Style"}}class lu extends cu{getTypeName(){return"Script"}}class rm extends cu{getTypeName(){return"URL"}}class Kf extends cu{getTypeName(){return"ResourceURL"}}function Mi(r){return r instanceof cu?r.changingThisBreaksApplicationSecurity:r}function ui(r,i){const o=wa(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function wa(r){return r instanceof cu&&r.getTypeName()||null}function im(r){return new Q_(r)}function sm(r){return new $b(r)}function Yf(r){return new lu(r)}function fc(r){return new rm(r)}function om(r){return new Kf(r)}class fh{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Js(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class am{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Js(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Js(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const m=o.item(c).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&i.removeAttribute(m)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const um=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ph=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function du(r){return(r=String(r)).match(um)||r.match(ph)?r:"unsafe:"+r}function Ss(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function hu(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const gh=Ss("area,br,col,hr,img,wbr"),lm=Ss("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ml=Ss("rp,rt"),mh=hu(gh,hu(lm,Ss("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),hu(Ml,Ss("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hu(Ml,lm)),yh=Ss("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ol=Ss("srcset"),hm=hu(yh,Ol,Ss("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ss("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Pl=Ss("script,style,template");class _h{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!mh.hasOwnProperty(o))return this.sanitizedSomething=!0,!Pl.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const d=u.item(c),m=d.name,y=m.toLowerCase();if(!hm.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let E=d.value;yh[y]&&(E=du(E)),Ol[y]&&(r=E,E=(r=String(r)).split(",").map(i=>du(i.trim())).join(", ")),this.buf.push(" ",m,'="',pm(E),'"')}var r;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();mh.hasOwnProperty(o)&&!gh.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(pm(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const fm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jf=/([^\#-~ |!])/g;function pm(r){return r.replace(/&/g,"&amp;").replace(fm,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Jf,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let kl;function Xf(r,i){let o=null;try{kl=kl||function(r){const i=new am(r);return function(){try{return!!(new window.DOMParser).parseFromString(Js(""),"text/html")}catch(r){return!1}}()?new fh(i):i}(r);let u=i?String(i):"";o=kl.getInertBodyElement(u);let c=5,d=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=d,d=o.innerHTML,o=kl.getInertBodyElement(u)}while(u!==d);return Js((new _h).sanitizeChildren(vh(o)||o))}finally{if(o){const u=vh(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function vh(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var mn=(()=>((mn=mn||{})[mn.NONE=0]="NONE",mn[mn.HTML=1]="HTML",mn[mn.STYLE=2]="STYLE",mn[mn.SCRIPT=3]="SCRIPT",mn[mn.URL=4]="URL",mn[mn.RESOURCE_URL=5]="RESOURCE_URL",mn))();function Xi(r){const i=function(){const r=Se();return r&&r[12]}();return i?i.sanitize(mn.URL,r)||"":ui(r,"URL")?Mi(r):du(Le(r))}const bh="__ngContext__";function nn(r,i){r[bh]=i}function vr(r){const i=function(r){return r[bh]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function A(r){return r.ngOriginalError}function z(r,...i){r.error(...i)}class _e{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=this._findContext(i),c=(r=i)&&r.ngErrorLogger||z;var r;c(this._console,"ERROR",i),o&&c(this._console,"ORIGINAL ERROR",o),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(A(i)):null}_findOriginalError(i){let o=i&&A(i);for(;o&&A(o);)o=A(o);return o||null}}const up=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function es(r){return r instanceof Function?r():r}var ba=(()=>((ba=ba||{})[ba.Important=1]="Important",ba[ba.DashCase=2]="DashCase",ba))();function tv(r,i){return undefined(r,i)}function Ch(r){const i=r[3];return $t(i)?i[3]:i}function Cm(r){return Zb(r[13])}function iv(r){return Zb(r[4])}function Zb(r){for(;null!==r&&!$t(r);)r=r[4];return r}function Dh(r,i,o,u,c){if(null!=u){let d,m=!1;$t(u)?d=u:$r(u)&&(m=!0,u=u[0]);const y=bt(u);0===r&&null!==o?null==c?lp(i,o,y):Ia(i,o,y,c||null,!0):1===r&&null!==o?Ia(i,o,y,c||null,!0):2===r?function(r,i,o){const u=Am(r,i);u&&function(r,i,o,u){an(r)?r.removeChild(i,o,u):i.removeChild(o)}(r,u,i,o)}(i,y,m):3===r&&i.destroyNode(y),null!=d&&function(r,i,o,u,c){const d=o[7];d!==bt(o)&&Dh(i,r,u,d,c);for(let y=10;y<o.length;y++){const E=o[y];fp(E[1],E,r,i,u,d)}}(i,r,d,o,c)}}function ov(r,i,o){return an(r)?r.createElement(i,o):null===o?r.createElement(i):r.createElementNS(o,i)}function Yb(r,i){const o=r[9],u=o.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,Zu(c,-1)),o.splice(u,1)}function uv(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&Yb(c,u),i>0&&(r[o-1][4]=u[4]);const d=Ds(r,10+i);!function(r,i){fp(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const m=d[19];null!==m&&m.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Qb(r,i){if(!(256&i[2])){const o=i[11];an(o)&&o.destroyNode&&fp(r,i,o,3,null,null),function(r){let i=r[13];if(!i)return Tm(r[1],r);for(;i;){let o=null;if($r(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)$r(i)&&Tm(i[1],i),i=i[3];null===i&&(i=r),$r(i)&&Tm(i[1],i),o=i&&i[4]}i=o}}(i)}}function Tm(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Qa)){const d=o[u+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const y=c[d[m]],E=d[m+1];try{E.call(y)}finally{}}else try{d.call(c)}finally{}}}}(r,i),function(r,i){const o=r.cleanup,u=i[7];let c=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const m=o[d+1],y="function"==typeof m?m(i):bt(i[m]),E=u[c=o[d+2]],C=o[d+3];"boolean"==typeof C?y.removeEventListener(o[d],E,C):C>=0?u[c=C]():u[c=-C].unsubscribe(),d+=2}else{const m=u[c=o[d+1]];o[d].call(m)}if(null!==u){for(let d=c+1;d<u.length;d++)u[d]();i[7]=null}}(r,i),1===i[1].type&&an(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&$t(i[3])){o!==i[3]&&Yb(o,i);const u=i[19];null!==u&&u.detachView(r)}}}function Mr(r,i,o){return function(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===fn.None||c===fn.Emulated)return null}return mr(u,o)}(r,i.parent,o)}function Ia(r,i,o,u,c){an(r)?r.insertBefore(i,o,u,c):i.insertBefore(o,u,c)}function lp(r,i,o){an(r)?r.appendChild(i,o):i.appendChild(o)}function dp(r,i,o,u,c){null!==u?Ia(r,i,o,u,c):lp(r,i,o)}function Am(r,i){return an(r)?r.parentNode(i):i.parentNode}let cv=function(r,i,o){return 40&r.type?mr(r,o):null};function hp(r,i,o,u){const c=Mr(r,u,i),d=i[11],y=function(r,i,o){return cv(r,i,o)}(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let E=0;E<o.length;E++)dp(d,c,o[E],y,!1);else dp(d,c,o,y,!1)}function Sh(r,i){if(null!==i){const o=i.type;if(3&o)return mr(i,r);if(4&o)return gu(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return Sh(r,u);{const c=r[i.index];return $t(c)?gu(-1,c):bt(c)}}if(32&o)return tv(i,r)()||bt(r[i.index]);{const u=ST(r,i);return null!==u?Array.isArray(u)?u[0]:Sh(Ch(r[16]),u):Sh(r,i.next)}}return null}function ST(r,i){return null!==i?r[16][6].projection[i.projection]:null}function gu(r,i){const o=10+r+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return Sh(u,c)}return i[7]}function fv(r,i,o,u,c,d,m){for(;null!=o;){const y=u[o.index],E=o.type;if(m&&0===i&&(y&&nn(bt(y),u),o.flags|=4),64!=(64&o.flags))if(8&E)fv(r,i,o.child,u,c,d,!1),Dh(i,r,c,y,d);else if(32&E){const C=tv(o,u);let T;for(;T=C();)Dh(i,r,c,T,d);Dh(i,r,c,y,d)}else 16&E?pv(r,i,u,o,c,d):Dh(i,r,c,y,d);o=m?o.projectionNext:o.next}}function fp(r,i,o,u,c,d){fv(o,u,r.firstChild,i,c,d,!1)}function pv(r,i,o,u,c,d){const m=o[16],E=m[6].projection[u.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)Dh(i,r,c,E[C],d);else fv(r,i,E,m[3],c,d,!0)}function e0(r,i,o){an(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function xm(r,i,o){an(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function t0(r,i,o){let u=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=i.length;if(c+d===u||r.charCodeAt(c+d)<=32)return c}o=c+1}}const n0="ng-template";function gv(r,i,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==t0(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function r0(r){return 4===r.type&&r.value!==n0}function MT(r,i,o){return i===(4!==r.type||o?r.value:n0)}function s0(r,i,o){let u=4;const c=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if(Xa(r[i]))return i;return r.length}(c);let m=!1;for(let y=0;y<i.length;y++){const E=i[y];if("number"!=typeof E){if(!m)if(4&u){if(u=2|1&u,""!==E&&!MT(r,E,o)||""===E&&1===i.length){if(Mo(u))return!1;m=!0}}else{const C=8&u?E:i[++y];if(8&u&&null!==r.attrs){if(!gv(r.attrs,C,o)){if(Mo(u))return!1;m=!0}continue}const N=mN(8&u?"class":E,c,r0(r),o);if(-1===N){if(Mo(u))return!1;m=!0;continue}if(""!==C){let O;O=N>d?"":c[N+1].toLowerCase();const B=8&u?O:null;if(B&&-1!==t0(B,C,0)||2&u&&C!==O){if(Mo(u))return!1;m=!0}}}}else{if(!m&&!Mo(u)&&!Mo(E))return!1;if(m&&Mo(E))continue;m=!1,u=E|1&u}}return Mo(u)||m}function Mo(r){return 0==(1&r)}function mN(r,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let d=!1;for(;c<i.length;){const m=i[c];if(m===r)return c;if(3===m||6===m)d=!0;else{if(1===m||2===m){let y=i[++c];for(;"string"==typeof y;)y=i[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=d?1:2}return-1}return function(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function mv(r,i,o=!1){for(let u=0;u<i.length;u++)if(s0(r,i[u],o))return!0;return!1}function o0(r,i){return r?":not("+i.trim()+")":i}function FT(r){let i=r[0],o=1,u=2,c="",d=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const y=r[++o];c+="["+m+(y.length>0?'="'+y+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!Mo(m)&&(i+=o0(d,c),c=""),u=m,d=d||!Mo(u);o++}return""!==c&&(i+=o0(d,c)),i}const vt={};function Nm(r){Wr(Tt(),Se(),Gr()+r,ia())}function Wr(r,i,o,u){if(!u)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&aa(i,d,o)}else{const d=r.preOrderHooks;null!==d&&fl(i,d,0,o)}Wi(o)}function ts(r,i){return r<<17|i<<2}function Xs(r){return r>>17&32767}function u0(r){return 2|r}function mu(r){return(131068&r)>>2}function mp(r,i){return-131069&r|i<<2}function c0(r){return 1|r}function y0(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],d=o[u+1];if(-1!==d){const m=r.data[d];ll(c),m.contentQueries(2,i[d],d)}}}function _p(r,i,o,u,c,d,m,y,E,C){const T=i.blueprint.slice();return T[0]=c,T[2]=140|u,ta(T),T[3]=T[15]=r,T[8]=o,T[10]=m||r&&r[10],T[11]=y||r&&r[11],T[12]=E||r&&r[12]||null,T[9]=C||r&&r[9]||null,T[6]=d,T[16]=2==i.type?r[16]:T,T}function Ul(r,i,o,u,c){let d=r.data[i];if(null===d)d=function(r,i,o,u,c){const d=Zd(),m=Za(),E=r.data[i]=function(r,i,o,u,c,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,o,i,u,c);return null===r.firstChild&&(r.firstChild=E),null!==d&&(m?null==d.child&&null!==E.parent&&(d.child=E):null===d.next&&(d.next=E)),E}(r,i,o,u,c),ut.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=c;const m=function(){const r=ut.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return ri(d,!0),d}function Bl(r,i,o,u){if(0===o)return-1;const c=i.length;for(let d=0;d<o;d++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function jl(r,i,o){Do(i);try{const u=r.viewQuery;null!==u&&O0(1,u,o);const c=r.template;null!==c&&_0(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&y0(r,i),r.staticViewQueries&&O0(2,r.viewQuery,o);const d=r.components;null!==d&&function(r,i){for(let o=0;o<i.length;o++)ON(r,i[o])}(i,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,Ff()}}function $l(r,i,o,u){const c=i[2];if(256==(256&c))return;Do(i);const d=ia();try{ta(i),function(r){ut.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&_0(r,i,o,2,u);const m=3==(3&c);if(!d)if(m){const C=r.preOrderCheckHooks;null!==C&&aa(i,C,null)}else{const C=r.preOrderHooks;null!==C&&fl(i,C,0,null),To(i,0)}if(function(r){for(let i=Cm(r);null!==i;i=iv(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],d=c[3];0==(1024&c[2])&&Zu(d,1),c[2]|=1024}}}(i),function(r){for(let i=Cm(r);null!==i;i=iv(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];ea(u)&&$l(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&y0(r,i),!d)if(m){const C=r.contentCheckHooks;null!==C&&aa(i,C)}else{const C=r.contentHooks;null!==C&&fl(i,C,1),To(i,1)}!function(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)Wi(~c);else{const d=c,m=o[++u],y=o[++u];cl(m,d),y(2,i[d])}}}finally{Wi(-1)}}(r,i);const y=r.components;null!==y&&function(r,i){for(let o=0;o<i.length;o++)MN(r,i[o])}(i,y);const E=r.viewQuery;if(null!==E&&O0(2,E,u),!d)if(m){const C=r.viewCheckHooks;null!==C&&aa(i,C)}else{const C=r.viewHooks;null!==C&&fl(i,C,2),To(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Zu(i[3],-1))}finally{Ff()}}function Pm(r,i,o,u){const c=i[10],d=!ia(),m=bo(i);try{d&&!m&&c.begin&&c.begin(),m&&jl(r,i,u),$l(r,i,o,u)}finally{d&&!m&&c.end&&c.end()}}function _0(r,i,o,u,c){const d=Gr(),m=2&u;try{Wi(-1),m&&i.length>20&&Wr(r,i,20,ia()),o(u,c)}finally{Wi(d)}}function Fm(r,i,o){!al()||(function(r,i,o,u){const c=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||bs(o,i),nn(u,i);const m=o.initialInputs;for(let y=c;y<d;y++){const E=r.data[y],C=Ti(E);C&&NN(i,o,E);const T=ha(i,r,y,o);nn(T,i),null!==m&&JT(0,y-c,T,E,0,m),C&&(qn(o.index,i)[8]=T)}}(r,i,o,mr(o,i)),128==(128&o.flags)&&function(r,i,o){const u=o.directiveStart,c=o.directiveEnd,m=o.index,y=ut.lFrame.currentDirectiveIndex;try{Wi(m);for(let E=u;E<c;E++){const C=r.data[E],T=i[E];sa(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Av(C,T)}}finally{Wi(-1),sa(y)}}(r,i,o))}function Iv(r,i,o=mr){const u=i.localNames;if(null!==u){let c=i.index+1;for(let d=0;d<u.length;d+=2){const m=u[d+1],y=-1===m?o(i,r):r[m];r[c++]=y}}}function Lm(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Ep(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Ep(r,i,o,u,c,d,m,y,E,C){const T=20+u,N=T+c,O=function(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:vt);return o}(T,N),B="function"==typeof C?C():C;return O[1]={type:r,blueprint:O,template:o,queries:null,viewQuery:y,declTNode:i,data:O.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:E,consts:B,incompleteFirstPass:!1}}function w0(r,i,o,u){const c=P0(i);null===o?c.push(u):(c.push(o),r.firstCreatePass&&Pv(r).push(u,c.length-1))}function Bm(r,i,o){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function Ns(r,i,o,u,c,d,m,y){const E=mr(i,o);let T,C=i.inputs;!y&&null!=C&&(T=C[u])?(Lv(r,o,T,u,c),ju(i)&&function(r,i){const o=qn(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=m?m(c,i.value||"",u):c,an(d)?d.setProperty(E,u,c):ec(u)||(E.setProperty?E.setProperty(u,c):E[u]=c))}function Dv(r,i,o,u){let c=!1;if(al()){const d=function(r,i,o){const u=r.directiveRegistry;let c=null;if(u)for(let d=0;d<u.length;d++){const m=u[d];mv(o,m.selectors,!1)&&(c||(c=[]),Fn(bs(o,i),r,m.type),Ti(m)?(Sv(r,o),c.unshift(m)):c.push(m))}return c}(r,i,o),m=null===u?null:{"":-1};if(null!==d){c=!0,A0(o,r.data.length,d.length);for(let T=0;T<d.length;T++){const N=d[T];N.providersResolver&&N.providersResolver(N)}let y=!1,E=!1,C=Bl(r,i,d.length,null);for(let T=0;T<d.length;T++){const N=d[T];o.mergedAttrs=eu(o.mergedAttrs,N.hostAttrs),QT(r,o,i,C,N),xN(C,N,m),null!==N.contentQueries&&(o.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=128);const O=N.type.prototype;!y&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),y=!0),!E&&(O.ngOnChanges||O.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),E=!0),C++}!function(r,i){const u=i.directiveEnd,c=r.data,d=i.attrs,m=[];let y=null,E=null;for(let C=i.directiveStart;C<u;C++){const T=c[C],N=T.inputs,O=null===d||r0(i)?null:x0(N,d);m.push(O),y=Bm(N,C,y),E=Bm(T.outputs,C,E)}null!==y&&(y.hasOwnProperty("class")&&(i.flags|=16),y.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=m,i.inputs=y,i.outputs=E}(r,o)}m&&function(r,i,o){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const d=o[i[c+1]];if(null==d)throw new he("301",`Export of name '${i[c+1]}' not found!`);u.push(i[c],d)}}}(o,u,m)}return o.mergedAttrs=eu(o.mergedAttrs,o.attrs),c}function D0(r,i,o,u,c,d){const m=d.hostBindings;if(m){let y=r.hostBindingOpCodes;null===y&&(y=r.hostBindingOpCodes=[]);const E=~i.index;(function(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(y)!=E&&y.push(E),y.push(u,c,m)}}function Av(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Sv(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function xN(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;Ti(i)&&(o[""]=r)}}function A0(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function QT(r,i,o,u,c){r.data[u]=c;const d=c.factory||(c.factory=Sr(c.type)),m=new Qa(d,Ti(c),null);r.blueprint[u]=m,o[u]=m,D0(r,i,0,u,Bl(r,o,c.hostVars,vt),c)}function NN(r,i,o){const u=mr(i,r),c=Lm(o),d=r[10],m=Mv(r,_p(r,c,null,o.onPush?64:16,u,i,d,d.createRenderer(u,o),null,null));r[i.index]=m}function eo(r,i,o,u,c,d){const m=mr(r,i);!function(r,i,o,u,c,d,m){if(null==d)an(r)?r.removeAttribute(i,c,o):i.removeAttribute(c);else{const y=null==m?Le(d):m(d,u||"",c);an(r)?r.setAttribute(i,c,y,o):o?i.setAttributeNS(o,c,y):i.setAttribute(c,y)}}(i[11],m,d,r.value,o,u,c)}function JT(r,i,o,u,c,d){const m=d[i];if(null!==m){const y=u.setInput;for(let E=0;E<m.length;){const C=m[E++],T=m[E++],N=m[E++];null!==y?u.setInput(o,N,C,T):o[T]=N}}}function x0(r,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function xv(r,i,o,u){return new Array(r,!0,!1,i,null,0,u,o,null,null)}function MN(r,i){const o=qn(i,r);if(ea(o)){const u=o[1];80&o[2]?$l(u,o,u.template,o[8]):o[5]>0&&bp(o)}}function bp(r){for(let u=Cm(r);null!==u;u=iv(u))for(let c=10;c<u.length;c++){const d=u[c];if(1024&d[2]){const m=d[1];$l(m,d,m.template,d[8])}else d[5]>0&&bp(d)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=qn(o[u],r);ea(c)&&c[5]>0&&bp(c)}}function ON(r,i){const o=qn(i,r),u=o[1];(function(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),jl(u,o,o[8])}function Mv(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Ov(r){for(;r;){r[2]|=64;const i=Ch(r);if(rl(r)&&!i)return r;r=i}return null}function R0(r,i,o){const u=i[10];u.begin&&u.begin();try{$l(r,i,r.template,o)}catch(c){throw Fv(i,c),c}finally{u.end&&u.end()}}function M0(r){!function(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],u=vr(o),c=u[1];Pm(c,u,c.template,o)}}(r[8])}function O0(r,i,o){ll(0),i(r,o)}const FN=(()=>Promise.resolve(null))();function P0(r){return r[7]||(r[7]=[])}function Pv(r){return r.cleanup||(r.cleanup=[])}function Fv(r,i){const o=r[9],u=o?o.get(_e,null):null;u&&u.handleError(i)}function Lv(r,i,o,u,c){for(let d=0;d<o.length;){const m=o[d++],y=o[d++],E=i[m],C=r.data[m];null!==C.setInput?C.setInput(E,c,u,y):E[y]=c}}function Ca(r,i,o){const u=Wa(i,r);!function(r,i,o){an(r)?r.setValue(i,o):i.textContent=o}(r[11],u,o)}function Ip(r,i,o){let u=o?r.styles:null,c=o?r.classes:null,d=0;if(null!==i)for(let m=0;m<i.length;m++){const y=i[m];"number"==typeof y?d=y:1==d?c=re(c,y):2==d&&(u=re(u,y+": "+i[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}const Cc=new En("INJECTOR",-1);class F0{get(i,o=Qi){if(o===Qi){const u=new Error(`NullInjectorError: No provider for ${Z(i)}!`);throw u.name="NullInjectorError",u}return o}}const Hl=new En("Set Injector scope."),Cp={},tA={};let Uv;function L0(){return void 0===Uv&&(Uv=new F0),Uv}function rA(r,i=null,o=null,u){return new iA(r,o,i||L0(),u)}class iA{constructor(i,o,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&qr(o,y=>this.processProvider(y,i,o)),qr([i],y=>this.processInjectorType(y,[],d)),this.records.set(Cc,dt(void 0,this));const m=this.records.get(Hl);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof i?null:Z(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=Qi,u=Ne.Default){this.assertNotDestroyed();const c=ou(this),d=hn(void 0);try{if(!(u&Ne.SkipSelf)){let y=this.records.get(i);if(void 0===y){const E=("function"==typeof(r=i)||"object"==typeof r&&r instanceof En)&&Tr(i);y=E&&this.injectableDefInScope(E)?dt(Bv(i),Cp):null,this.records.set(i,y)}if(null!=y)return this.hydrate(i,y)}return(u&Ne.Self?L0():this.parent).get(i,o=u&Ne.Optional&&o===Qi?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[ai]=m[ai]||[]).unshift(Z(i)),c)throw m;return ir(m,i,"R3InjectorError",this.source)}throw m}finally{hn(d),ou(c)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,c)=>i.push(Z(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,o,u){if(!(i=G(i)))return!1;let c=ni(i);const d=null==c&&i.ngModule||void 0,m=void 0===d?i:d,y=-1!==u.indexOf(m);if(void 0!==d&&(c=ni(d)),null==c)return!1;if(null!=c.imports&&!y){let T;u.push(m);try{qr(c.imports,N=>{this.processInjectorType(N,o,u)&&(void 0===T&&(T=[]),T.push(N))})}finally{}if(void 0!==T)for(let N=0;N<T.length;N++){const{ngModule:O,providers:B}=T[N];qr(B,q=>this.processProvider(q,O,B||$e))}}this.injectorDefTypes.add(m);const E=Sr(m)||(()=>new m);this.records.set(m,dt(E,Cp));const C=c.providers;if(null!=C&&!y){const T=i;qr(C,N=>this.processProvider(N,T,C))}return void 0!==d&&void 0!==i.providers}processProvider(i,o,u){let c=Nh(i=G(i))?i:G(i&&i.provide);const d=Dp(r=i)?dt(void 0,r.useValue):dt(jm(r),Cp);var r;if(Nh(i)||!0!==i.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=dt(void 0,Cp,!0),m.factory=()=>va(m.multi),this.records.set(c,m)),c=i,m.multi.push(i)}this.records.set(c,d)}hydrate(i,o){return o.value===Cp&&(o.value=tA,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(r=o.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const o=G(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Bv(r){const i=Tr(r),o=null!==i?i.factory:Sr(r);if(null!==o)return o;if(r instanceof En)throw new Error(`Token ${Z(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const u=function(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?");throw new Error(`Can't resolve all parameters for ${Z(r)}: (${u.join(", ")}).`)}const o=function(r){const i=r&&(r[In]||r[lo]);if(i){const o=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Error("unreachable")}function jm(r,i,o){let u;if(Nh(r)){const c=G(r);return Sr(c)||Bv(c)}if(Dp(r))u=()=>G(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...va(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))u=()=>Pn(G(r.useExisting));else{const c=G(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return Sr(c)||Bv(c);u=()=>new c(...va(r.deps))}return u}function dt(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function Dp(r){return null!==r&&"object"==typeof r&&Dl in r}function Nh(r){return"function"==typeof r}const Or=function(r,i,o){return function(r,i=null,o=null,u){const c=rA(r,i,o,u);return c._resolveInjectorDefTypes(),c}({name:o},i,r,o)};let zt=(()=>{class r{static create(o,u){return Array.isArray(o)?Or(o,u,""):Or(o.providers,o.parent,o.name||"")}}return r.THROW_IF_NOT_FOUND=Qi,r.NULL=new F0,r.\u0275prov=on({token:r,providedIn:"any",factory:()=>Pn(Cc)}),r.__NG_ELEMENT_ID__=-1,r})();function Qm(r,i){oa(vr(r)[1],vn())}function Ap(r){let i=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;i;){let c;if(Ti(r))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");c=i.\u0275dir}if(c){if(o){u.push(c);const m=r;m.inputs=Sp(r.inputs),m.declaredInputs=Sp(r.declaredInputs),m.outputs=Sp(r.outputs);const y=c.hostBindings;y&&dA(r,y);const E=c.viewQuery,C=c.contentQueries;if(E&&W0(r,E),C&&z0(r,C),Q(r.inputs,c.inputs),Q(r.declaredInputs,c.declaredInputs),Q(r.outputs,c.outputs),Ti(c)&&c.data.animation){const T=r.data;T.animation=(T.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let m=0;m<d.length;m++){const y=d[m];y&&y.ngInherit&&y(r),y===Ap&&(o=!1)}}i=Object.getPrototypeOf(i)}!function(r){let i=0,o=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=i+=c.hostVars,c.hostAttrs=eu(c.hostAttrs,o=eu(o,c.hostAttrs))}}(u)}function Sp(r){return r===qe?{}:r===$e?[]:r}function W0(r,i){const o=r.viewQuery;r.viewQuery=o?(u,c)=>{i(u,c),o(u,c)}:i}function z0(r,i){const o=r.contentQueries;r.contentQueries=o?(u,c,d)=>{i(u,c,d),o(u,c,d)}:i}function dA(r,i){const o=r.hostBindings;r.hostBindings=o?(u,c)=>{i(u,c),o(u,c)}:i}let xp=null;function Oh(){if(!xp){const r=j.Symbol;if(r&&r.iterator)xp=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(xp=u)}}}return xp}class Rs{constructor(i){this.wrapped=i}static wrap(i){return new Rs(i)}static unwrap(i){return Rs.isWrapped(i)?i.wrapped:i}static isWrapped(i){return i instanceof Rs}}function ql(r){return!!Ph(r)&&(Array.isArray(r)||!(r instanceof Map)&&Oh()in r)}function Ph(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function pi(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function Rp(r,i,o,u){const c=Se();return pi(c,qi(),i)&&(Tt(),eo(un(),c,r,i,o,u)),Rp}function X0(r,i,o,u,c,d,m,y){const E=Se(),C=Tt(),T=r+20,N=C.firstCreatePass?function(r,i,o,u,c,d,m,y,E){const C=i.consts,T=Ul(i,r,4,m||null,Hs(C,y));Dv(i,o,T,Hs(C,E)),oa(i,T);const N=T.tViews=Ep(2,T,u,c,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,C);return null!==i.queries&&(i.queries.template(i,T),N.queries=i.queries.embeddedTView(T)),T}(T,C,E,i,o,u,c,d,m):C.data[T];ri(N,!1);const O=E[11].createComment("");hp(C,E,O,N),nn(O,E),Mv(E,E[T]=xv(O,E,O,N)),Hr(N)&&Fm(C,E,N),null!=m&&Iv(E,N,y)}function Iu(r,i=Ne.Default){const o=Se();return null===o?Pn(r,i):ii(vn(),o,G(r),i)}function cy(r,i,o){const u=Se();return pi(u,qi(),i)&&Ns(Tt(),un(),u,r,i,u[11],o,!1),cy}function gE(r,i,o,u,c){const m=c?"class":"style";Lv(r,o,i.inputs[m],m,u)}function mE(r,i,o,u){const c=Se(),d=Tt(),m=20+r,y=c[11],E=c[m]=ov(y,i,ut.lFrame.currentNamespace),C=d.firstCreatePass?function(r,i,o,u,c,d,m){const y=i.consts,C=Ul(i,r,2,c,Hs(y,d));return Dv(i,o,C,Hs(y,m)),null!==C.attrs&&Ip(C,C.attrs,!1),null!==C.mergedAttrs&&Ip(C,C.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,C),C}(m,d,c,0,i,o,u):d.data[m];ri(C,!0);const T=C.mergedAttrs;null!==T&&cn(y,E,T);const N=C.classes;null!==N&&xm(y,E,N);const O=C.styles;null!==O&&e0(y,E,O),64!=(64&C.flags)&&hp(d,c,E,C),0===ut.lFrame.elementDepthCount&&nn(E,c),ut.lFrame.elementDepthCount++,Hr(C)&&(Fm(d,c,C),function(r,i,o){if(Ha(i)){const c=i.directiveEnd;for(let d=i.directiveStart;d<c;d++){const m=r.data[d];m.contentQueries&&m.contentQueries(1,o[d],d)}}}(d,C,c)),null!==u&&Iv(c,C)}function yE(){let r=vn();Za()?ut.lFrame.isParent=!1:(r=r.parent,ri(r,!1));const i=r;ut.lFrame.elementDepthCount--;const o=Tt();o.firstCreatePass&&(oa(o,r),Ha(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&gE(o,i,Se(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&gE(o,i,Se(),i.stylesWithoutHost,!1)}function jh(r,i,o,u){mE(r,i,o,u),yE()}function yI(){return Se()}function EE(r){return!!r&&"function"==typeof r.then}function wE(r){return!!r&&"function"==typeof r.subscribe}const bE=wE;function ly(r,i,o,u){const c=Se(),d=Tt(),m=vn();return function(r,i,o,u,c,d,m,y){const E=Hr(u),T=r.firstCreatePass&&Pv(r),N=i[8],O=P0(i);let B=!0;if(3&u.type||y){const X=mr(u,i),ke=y?y(X):X,Ie=O.length,rt=y?ft=>y(bt(ft[u.index])):u.index;if(an(o)){let ft=null;if(!y&&E&&(ft=function(r,i,o,u){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const m=c[d];if(m===o&&c[d+1]===u){const y=i[7],E=c[d+2];return y.length>E?y[E]:null}"string"==typeof m&&(d+=2)}return null}(r,i,c,u.index)),null!==ft)(ft.__ngLastListenerFn__||ft).__ngNextListenerFn__=d,ft.__ngLastListenerFn__=d,B=!1;else{d=hy(u,i,N,d,!1);const St=o.listen(ke,c,d);O.push(d,St),T&&T.push(c,rt,Ie,Ie+1)}}else d=hy(u,i,N,d,!0),ke.addEventListener(c,d,m),O.push(d),T&&T.push(c,rt,Ie,m)}else d=hy(u,i,N,d,!1);const q=u.outputs;let ae;if(B&&null!==q&&(ae=q[c])){const X=ae.length;if(X)for(let ke=0;ke<X;ke+=2){const Dr=i[ae[ke]][ae[ke+1]].subscribe(d),ks=O.length;O.push(d,Dr),T&&T.push(c,u.index,ks,-(ks+1))}}}(d,c,c[11],m,r,i,!!o,u),ly}function DE(r,i,o,u){try{return!1!==o(u)}catch(c){return Fv(r,c),!1}}function hy(r,i,o,u,c){return function d(m){if(m===Function)return u;const y=2&r.flags?qn(r.index,i):i;0==(32&i[2])&&Ov(y);let E=DE(i,0,u,m),C=d.__ngNextListenerFn__;for(;C;)E=DE(i,0,C,m)&&E,C=C.__ngNextListenerFn__;return c&&!1===E&&(m.preventDefault(),m.returnValue=!1),E}}function fy(r=1){return function(r){return(ut.lFrame.contextLView=function(r,i){for(;r>0;)i=i[15],r--;return i}(r,ut.lFrame.contextLView))[8]}(r)}function vI(r,i,o,u,c){const d=r[o+1],m=null===i;let y=u?Xs(d):mu(d),E=!1;for(;0!==y&&(!1===E||m);){const T=r[y+1];EI(r[y],i)&&(E=!0,r[y+1]=u?c0(T):u0(T)),y=u?Xs(T):mu(T)}E&&(r[o+1]=u?u0(d):c0(d))}function EI(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&x(r,i)>=0}function _y(r,i){return function(r,i,o,u){const c=Se(),d=Tt(),m=function(r){const i=ut.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}(2);d.firstUpdatePass&&function(r,i,o,u){const c=r.data;if(null===c[o+1]){const d=c[Gr()],m=function(r,i){return i>=r.expandoStartIndex}(r,o);(function(r,i){return 0!=(r.flags&(i?16:32))})(d,u)&&null===i&&!m&&(i=!1),i=function(r,i,o,u){const c=function(r){const i=ut.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let d=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(o=qh(o=vy(null,r,i,o,u),i.attrs,u),d=null);else{const m=i.directiveStylingLast;if(-1===m||r[m]!==c)if(o=vy(c,r,i,o,u),null===d){let E=function(r,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==mu(u))return r[Xs(u)]}(r,i,u);void 0!==E&&Array.isArray(E)&&(E=vy(null,r,i,E[1],u),E=qh(E,i.attrs,u),function(r,i,o,u){r[Xs(o?i.classBindings:i.styleBindings)]=u}(r,i,u,E))}else d=function(r,i,o){let u;const c=i.directiveEnd;for(let d=1+i.directiveStylingLast;d<c;d++)u=qh(u,r[d].hostAttrs,o);return qh(u,i.attrs,o)}(r,i,u)}return void 0!==d&&(u?i.residualClasses=d:i.residualStyles=d),o}(c,d,i,u),function(r,i,o,u,c,d){let m=d?i.classBindings:i.styleBindings,y=Xs(m),E=mu(m);r[u]=o;let T,C=!1;if(Array.isArray(o)){const N=o;T=N[1],(null===T||x(N,T)>0)&&(C=!0)}else T=o;if(c)if(0!==E){const O=Xs(r[y+1]);r[u+1]=ts(O,y),0!==O&&(r[O+1]=mp(r[O+1],u)),r[y+1]=function(r,i){return 131071&r|i<<17}(r[y+1],u)}else r[u+1]=ts(y,0),0!==y&&(r[y+1]=mp(r[y+1],u)),y=u;else r[u+1]=ts(E,0),0===y?y=u:r[E+1]=mp(r[E+1],u),E=u;C&&(r[u+1]=u0(r[u+1])),vI(r,T,u,!0),vI(r,T,u,!1),function(r,i,o,u,c){const d=c?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof i&&x(d,i)>=0&&(o[u+1]=c0(o[u+1]))}(i,T,r,u,d),m=ts(y,E),d?i.classBindings=m:i.styleBindings=m}(c,d,i,o,m,u)}}(d,r,m,u),i!==vt&&pi(c,m,i)&&function(r,i,o,u,c,d,m,y){if(!(3&i.type))return;const E=r.data,C=E[y+1];wy(function(r){return 1==(1&r)}(C)?td(E,i,o,c,mu(C),m):void 0)||(wy(d)||function(r){return 2==(2&r)}(C)&&(d=td(E,null,o,c,y,m)),function(r,i,o,u,c){const d=an(r);if(i)c?d?r.addClass(o,u):o.classList.add(u):d?r.removeClass(o,u):o.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:ba.DashCase;if(null==c)d?r.removeStyle(o,u,m):o.style.removeProperty(u);else{const y="string"==typeof c&&c.endsWith("!important");y&&(c=c.slice(0,-10),m|=ba.Important),d?r.setStyle(o,u,c,m):o.style.setProperty(u,c,y?"important":"")}}}(u,m,Wa(Gr(),o),c,d))}(d,d.data[Gr()],c,c[11],r,c[m+1]=function(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=Z(Mi(r)))),r}(i,o),u,m)}(r,i,null,!0),_y}function vy(r,i,o,u,c){let d=null;const m=o.directiveEnd;let y=o.directiveStylingLast;for(-1===y?y=o.directiveStart:y++;y<m&&(d=i[y],u=qh(u,d.hostAttrs,c),d!==r);)y++;return null!==r&&(o.directiveStylingLast=y),u}function qh(r,i,o){const u=o?1:2;let c=-1;if(null!==i)for(let d=0;d<i.length;d++){const m=i[d];"number"==typeof m?c=m:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),I(r,m,!!o||i[++d]))}return void 0===r?null:r}function td(r,i,o,u,c,d){const m=null===i;let y;for(;c>0;){const E=r[c],C=Array.isArray(E),T=C?E[1]:E,N=null===T;let O=o[c+1];O===vt&&(O=N?$e:void 0);let B=N?D(O,u):T===u?O:void 0;if(C&&!wy(B)&&(B=D(E,u)),wy(B)&&(y=B,m))return y;const q=r[c+1];c=m?Xs(q):mu(q)}if(null!==i){let E=d?i.residualClasses:i.residualStyles;null!=E&&(y=D(E,u))}return y}function wy(r){return void 0!==r}function OI(r,i=""){const o=Se(),u=Tt(),c=r+20,d=u.firstCreatePass?Ul(u,c,1,i,null):u.data[c],m=o[c]=function(r,i){return an(r)?r.createText(i):r.createTextNode(i)}(o[11],i);hp(u,o,m,d),ri(d,!1)}function OE(r){return Hp("",r,""),OE}function Hp(r,i,o){const u=Se(),c=function(r,i,o,u){return pi(r,qi(),o)?i+Le(o)+u:vt}(u,r,i,o);return c!==vt&&Ca(u,Gr(),c),Hp}function Du(r,i,o){const u=Se();return pi(u,qi(),i)&&Ns(Tt(),un(),u,r,i,u[11],o,!0),Du}const Po=void 0;var MA=["en",[["a","p"],["AM","PM"],Po],[["AM","PM"],Po,Po],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Po,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Po,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Po,"{1} 'at' {0}",Po],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let Vn={};function BE(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=Tu(i);if(o)return o;const u=i.split("-")[0];if(o=Tu(u),o)return o;if("en"===u)return MA;throw new Error(`Missing locale data for the locale "${r}".`)}function VI(r){return BE(r)[it.PluralCase]}function Tu(r){return r in Vn||(Vn[r]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[r]),Vn[r]}var it=(()=>((it=it||{})[it.LocaleId=0]="LocaleId",it[it.DayPeriodsFormat=1]="DayPeriodsFormat",it[it.DayPeriodsStandalone=2]="DayPeriodsStandalone",it[it.DaysFormat=3]="DaysFormat",it[it.DaysStandalone=4]="DaysStandalone",it[it.MonthsFormat=5]="MonthsFormat",it[it.MonthsStandalone=6]="MonthsStandalone",it[it.Eras=7]="Eras",it[it.FirstDayOfWeek=8]="FirstDayOfWeek",it[it.WeekendRange=9]="WeekendRange",it[it.DateFormat=10]="DateFormat",it[it.TimeFormat=11]="TimeFormat",it[it.DateTimeFormat=12]="DateTimeFormat",it[it.NumberSymbols=13]="NumberSymbols",it[it.NumberFormats=14]="NumberFormats",it[it.CurrencyCode=15]="CurrencyCode",it[it.CurrencySymbol=16]="CurrencySymbol",it[it.CurrencyName=17]="CurrencyName",it[it.Currencies=18]="Currencies",it[it.Directionality=19]="Directionality",it[it.PluralCase=20]="PluralCase",it[it.ExtraData=21]="ExtraData",it))();const Sa="en-US";let Wh=Sa;function Rc(r){dn(r,"Expected localeId to be defined"),"string"==typeof r&&(Wh=r.toLowerCase().replace(/_/g,"-"))}function Oy(r,i,o,u,c){if(r=G(r),Array.isArray(r))for(let d=0;d<r.length;d++)Oy(r[d],i,o,u,c);else{const d=Tt(),m=Se();let y=Nh(r)?r:G(r.provide),E=jm(r);const C=vn(),T=1048575&C.providerIndexes,N=C.directiveStart,O=C.providerIndexes>>20;if(Nh(r)||!r.multi){const B=new Qa(E,c,Iu),q=ng(y,i,c?T:T+O,N);-1===q?(Fn(bs(C,m),d,y),Py(d,r,i.length),i.push(y),C.directiveStart++,C.directiveEnd++,c&&(C.providerIndexes+=1048576),o.push(B),m.push(B)):(o[q]=B,m[q]=B)}else{const B=ng(y,i,T+O,N),q=ng(y,i,T,T+O),ae=B>=0&&o[B],X=q>=0&&o[q];if(c&&!X||!c&&!ae){Fn(bs(C,m),d,y);const ke=function(r,i,o,u,c){const d=new Qa(r,o,Iu);return d.multi=[],d.index=i,d.componentProviders=0,Jh(d,c,u&&!o),d}(c?cr:HA,o.length,c,u,E);!c&&X&&(o[q].providerFactory=ke),Py(d,r,i.length,0),i.push(y),C.directiveStart++,C.directiveEnd++,c&&(C.providerIndexes+=1048576),o.push(ke),m.push(ke)}else Py(d,r,B>-1?B:q,Jh(o[c?q:B],E,!c&&u));!c&&u&&X&&o[q].componentProviders++}}}function Py(r,i,o,u){const c=Nh(i);if(c||function(r){return!!r.useClass}(i)){const m=(i.useClass||i).prototype.ngOnDestroy;if(m){const y=r.destroyHooks||(r.destroyHooks=[]);if(!c&&i.multi){const E=y.indexOf(o);-1===E?y.push(o,[u,m]):y[E+1].push(u,m)}else y.push(o,m)}}}function Jh(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function ng(r,i,o,u){for(let c=o;c<u;c++)if(i[c]===r)return c;return-1}function HA(r,i,o,u){return Ot(this.multi,[])}function cr(r,i,o,u){const c=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,y=ha(o,o[1],this.providerFactory.index,u);d=y.slice(0,m),Ot(c,d);for(let E=m;E<y.length;E++)d.push(y[E])}else d=[],Ot(c,d);return d}function Ot(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function ew(r,i=[]){return o=>{o.providersResolver=(u,c)=>function(r,i,o){const u=Tt();if(u.firstCreatePass){const c=Ti(r);Oy(o,u.data,u.blueprint,c,!0),Oy(i,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,i)}}class rg{}const kn="ngComponent";class qA{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${Z(r)}. Did you add it to @NgModule.entryComponents?`);return i[kn]=r,i}(i)}}let Kr=(()=>{class r{}return r.NULL=new qA,r})();function ky(...r){}function Xh(r,i){return new os(mr(r,i))}const Fy=function(){return Xh(vn(),Se())};let os=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=Fy,r})();function ef(r){return r instanceof os?r.nativeElement:r}class sg{}let lC=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>hC(),r})();const hC=function(){const r=Se(),o=qn(vn().index,r);return function(r){return r[11]}($r(o)?o:r)};let nw=(()=>{class r{}return r.\u0275prov=on({token:r,providedIn:"root",factory:()=>null}),r})();class pC{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const ud=new pC("12.2.12");class rw{constructor(){}supports(i){return ql(i)}create(i){return new iw(i)}}const zA=(r,i)=>i;class iw{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||zA}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,d=null;for(;o||u;){const m=!u||o&&o.currentIndex<Ly(u,c,d)?o:u,y=Ly(m,c,d),E=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)c++;else{d||(d=[]);const C=y-c,T=E-c;if(C!=T){for(let O=0;O<C;O++){const B=O<d.length?d[O]:d[O]=0,q=B+O;T<=q&&q<C&&(d[O]=B+1)}d[m.previousIndex]=T-C}}y!==E&&i(m,y,E)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!ql(i))throw new Error(`Error trying to diff '${Z(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,d,m,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let y=0;y<this.length;y++)d=i[y],m=this._trackByFn(y,d),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,d,m,y)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,m,y),u=!0),o=o._next}else c=0,function(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[Oh()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,y=>{m=this._trackByFn(c,y),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,y,m,c)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,m,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,d,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,d,c)):i=this._addAfter(new gC(o,u),d,c),i}_verifyReinsertion(i,o,u,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?i=this._reinsertAfter(d,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,d=i._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new ko),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ko),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class gC{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class og{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class ko{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new og,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ly(r,i,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class sw{constructor(){}supports(i){return i instanceof Map||Ph(i)}create(){return new ag}}class ag{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Ph(i)))throw new Error(`Error trying to diff '${Z(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const d=c._prev,m=c._next;return d&&(d._next=m),m&&(m._prev=d),c._next=null,c._prev=null,c}const u=new mC(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class mC{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ow(){return new ug([new rw])}let ug=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||ow()),deps:[[r,new Ea,new Ri]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(r){return r.name||typeof r}(o)}'`)}}return r.\u0275prov=on({token:r,providedIn:"root",factory:ow}),r})();function yC(){return new cd([new sw])}let cd=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||yC()),deps:[[r,new Ea,new Ri]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return r.\u0275prov=on({token:r,providedIn:"root",factory:yC}),r})();function cg(r,i,o,u,c=!1){for(;null!==o;){const d=i[o.index];if(null!==d&&u.push(bt(d)),$t(d))for(let y=10;y<d.length;y++){const E=d[y],C=E[1].firstChild;null!==C&&cg(E[1],E,C,u)}const m=o.type;if(8&m)cg(r,i,o.child,u);else if(32&m){const y=tv(o,i);let E;for(;E=y();)u.push(E)}else if(16&m){const y=ST(i,o);if(Array.isArray(y))u.push(...y);else{const E=Ch(i[16]);cg(E[1],E,y,u,!0)}}o=c?o.projectionNext:o.next}return u}class lg{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return cg(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if($t(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(uv(i,u),Ds(o,u))}this._attachedToViewContainer=!1}Qb(this._lView[1],this._lView)}onDestroy(i){w0(this._lView[1],this._lView,null,i)}markForCheck(){Ov(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){R0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,o){Gi(!0);try{R0(r,i,o)}finally{Gi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,fp(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class _C extends lg{constructor(i){super(i),this._view=i}detectChanges(){M0(this._view)}checkNoChanges(){!function(r){Gi(!0);try{M0(r)}finally{Gi(!1)}}(this._view)}get context(){return null}}const YA=function(r){return function(r,i,o){if(ju(r)&&!o){const u=qn(r.index,i);return new lg(u,u)}return 47&r.type?new lg(i[16],i):null}(vn(),Se(),16==(16&r))};let EC=(()=>{class r{}return r.__NG_ELEMENT_ID__=YA,r})();const QA=[new sw],tf=new ug([new rw]),nf=new cd(QA),eS=function(){return so(vn(),Se())};let rf=(()=>{class r{}return r.__NG_ELEMENT_ID__=eS,r})();const Fo=rf,tS=class extends Fo{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=_p(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),jl(o,u,i),new lg(u)}};function so(r,i){return 4&r.type?new tS(i,r,Xh(r,i)):null}class ld{}class as{}const yi=function(){return us(vn(),Se())};let Vy=(()=>{class r{}return r.__NG_ELEMENT_ID__=yi,r})();const Un=Vy,Lo=class extends Un{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Xh(this._hostTNode,this._hostLView)}get injector(){return new si(this._hostTNode,this._hostLView)}get parentInjector(){const i=zs(this._hostTNode,this._hostLView);if(nc(i)){const o=nu(i,this._hostLView),u=tu(i);return new si(o[1].data[u+8],o)}return new si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=ki(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const c=i.createEmbeddedView(o||{});return this.insert(c,u),c}createComponent(i,o,u,c,d){const m=u||this.parentInjector;if(!d&&null==i.ngModule&&m){const E=m.get(ld,null);E&&(d=E)}const y=i.create(m,c,void 0,d);return this.insert(y.hostView,o),y}insert(i,o){const u=i._lView,c=u[1];if($t(u[3])){const T=this.indexOf(i);if(-1!==T)this.detach(T);else{const N=u[3],O=new Lo(N,N[6],N[3]);O.detach(O.indexOf(i))}}const d=this._adjustIndex(o),m=this._lContainer;!function(r,i,o,u){const c=10+u,d=o.length;u>0&&(o[c-1][4]=i),u<d-10?(i[4]=o[c],Yi(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const m=i[17];null!==m&&o!==m&&function(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(m,i);const y=i[19];null!==y&&y.insertView(r),i[2]|=128}(c,u,m,d);const y=gu(d,m),E=u[11],C=Am(E,m[7]);return null!==C&&function(r,i,o,u,c,d){u[0]=c,u[6]=i,fp(r,u,o,1,c,d)}(c,m[6],E,u,C,y),i.attachToViewContainerRef(),Yi(Ir(m),d,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=ki(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=uv(this._lContainer,o);u&&(Ds(Ir(this._lContainer),o),Qb(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=uv(this._lContainer,o);return u&&null!=Ds(Ir(this._lContainer),o)?new lg(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function ki(r){return r[8]}function Ir(r){return r[8]||(r[8]=[])}function us(r,i){let o;const u=i[r.index];if($t(u))o=u;else{let c;if(8&r.type)c=bt(u);else{const d=i[11];c=d.createComment("");const m=mr(r,i);Ia(d,Am(d,m),c,function(r,i){return an(r)?r.nextSibling(i):i.nextSibling}(d,m),!1)}i[r.index]=o=xv(u,i,c,r),Mv(i,o)}return new Lo(o,r,i)}const Ou={};class VC extends Kr{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Xn(i);return new Sw(o,this.ngModule)}}function Aw(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}const TS=new En("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>up});class Sw extends rg{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=i.selectors.map(FT).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Aw(this.componentDef.inputs)}get outputs(){return Aw(this.componentDef.outputs)}create(i,o,u,c){const d=(c=c||this.ngModule)?function(r,i){return{get:(o,u,c)=>{const d=r.get(o,Ou,c);return d!==Ou||u===Ou?d:i.get(o,u,c)}}}(i,c.injector):i,m=d.get(sg,Xo),y=d.get(nw,null),E=m.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",T=u?function(r,i,o){if(an(r))return r.selectRootElement(i,o===fn.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(E,u,this.componentDef.encapsulation):ov(m.createRenderer(null,this.componentDef),C,function(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(C)),N=this.componentDef.onPush?576:528,O=function(r,i){return{components:[],scheduler:r||up,clean:FN,playerHandler:i||null,flags:0}}(),B=Ep(0,null,null,1,0,null,null,null,null,null),q=_p(null,B,O,N,null,null,m,E,y,d);let ae,X;Do(q);try{const ke=function(r,i,o,u,c,d){const m=o[1];o[20]=r;const E=Ul(m,20,2,"#host",null),C=E.mergedAttrs=i.hostAttrs;null!==C&&(Ip(E,C,!0),null!==r&&(cn(c,r,C),null!==E.classes&&xm(c,r,E.classes),null!==E.styles&&e0(c,r,E.styles)));const T=u.createRenderer(r,i),N=_p(o,Lm(i),null,i.onPush?64:16,o[20],E,u,T,d||null,null);return m.firstCreatePass&&(Fn(bs(E,o),m,i.type),Sv(m,E),A0(E,o.length,1)),Mv(o,N),o[20]=N}(T,this.componentDef,q,m,E);if(T)if(u)cn(E,T,["ng-version",ud.full]);else{const{attrs:Ie,classes:rt}=function(r){const i=[],o=[];let u=1,c=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===c?""!==d&&i.push(d,r[++u]):8===c&&o.push(d);else{if(!Mo(c))break;c=d}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);Ie&&cn(E,T,Ie),rt&&rt.length>0&&xm(E,T,rt.join(" "))}if(X=Hi(B,20),void 0!==o){const Ie=X.projection=[];for(let rt=0;rt<this.ngContentSelectors.length;rt++){const ft=o[rt];Ie.push(null!=ft?Array.from(ft):null)}}ae=function(r,i,o,u,c){const d=o[1],m=function(r,i,o){const u=vn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),QT(r,u,i,Bl(r,i,1,null),o));const c=ha(i,r,u.directiveStart,u);nn(c,i);const d=mr(u,i);return d&&nn(d,i),c}(d,o,i);if(u.components.push(m),r[8]=m,c&&c.forEach(E=>E(m,i)),i.contentQueries){const E=vn();i.contentQueries(1,m,E.directiveStart)}const y=vn();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Wi(y.index),D0(o[1],y,0,y.directiveStart,y.directiveEnd,i),Av(i,m)),m}(ke,this.componentDef,q,O,[Qm]),jl(B,q,null)}finally{Ff()}return new xw(this.componentType,ae,Xh(X,q),q,X)}}class xw extends class{}{constructor(i,o,u,c,d){super(),this.location=u,this._rootLView=c,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new _C(c),this.componentType=i}get injector(){return new si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const ff=new Map;class Nw extends ld{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new VC(this);const u=$n(i),c=i[Dt]||null;c&&Rc(c),this._bootstrapComponents=es(u.bootstrap),this._r3Injector=rA(i,o,[{provide:ld,useValue:this},{provide:Kr,useValue:this.componentFactoryResolver}],Z(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=zt.THROW_IF_NOT_FOUND,u=Ne.Default){return i===zt||i===ld||i===Cc?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Hc extends as{constructor(i){super(),this.moduleType=i,null!==$n(i)&&function(r){const i=new Set;!function o(u){const c=$n(u,!0),d=c.id;null!==d&&(function(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${Z(i)} vs ${Z(i.name)}`)}(d,ff.get(d),u),ff.set(d,u));const m=es(c.imports);for(const y of m)i.has(y)||(i.add(y),o(y))}(r)}(i)}create(i){return new Nw(this.moduleType,i)}}function e_(r,i,o,u,c,d,m){const y=i+o;return function(r,i,o,u){const c=pi(r,i,o);return pi(r,i+1,u)||c}(r,y,c,d)?function(r,i,o){return r[i]=o}(r,y+2,m?u.call(m,c,d):u(c,d)):function(r,i){const o=r[i];return o===vt?void 0:o}(r,y+2)}function n_(r,i){const o=Tt();let u;const c=r+20;o.firstCreatePass?(u=function(r,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(r===u.name)return u}throw new he("302",`The pipe '${r}' could not be found!`)}(i,o.pipeRegistry),o.data[c]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(c,u.onDestroy)):u=o.data[c];const d=u.factory||(u.factory=Sr(u.type)),m=hn(Iu);try{const y=ua(!1),E=d();return ua(y),function(r,i,o,u){o>=r.data.length&&(r.data[o]=null,r.blueprint[o]=null),i[o]=u}(o,Se(),c,E),E}finally{hn(m)}}function r_(r,i,o,u){const c=r+20,d=Se(),m=function(r,i){return r[i]}(d,c);return function(r,i){Rs.isWrapped(i)&&(i=Rs.unwrap(i),r[ut.lFrame.bindingIndex]=vt);return i}(d,function(r,i){return r[1].data[i].pure}(d,c)?e_(d,function(){const r=ut.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}(),i,m.transform,o,u,m):m.transform(o,u))}function Fw(r){return i=>{setTimeout(r,void 0,i)}}const uo=class extends f.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var c,d,m;let y=i,E=o||(()=>null),C=u;if(i&&"object"==typeof i){const N=i;y=null===(c=N.next)||void 0===c?void 0:c.bind(N),E=null===(d=N.error)||void 0===d?void 0:d.bind(N),C=null===(m=N.complete)||void 0===m?void 0:m.bind(N)}this.__isAsync&&(E=Fw(E),y&&(y=Fw(y)),C&&(C=Fw(C)));const T=super.subscribe({next:y,error:E,complete:C});return i instanceof ee.w&&i.add(T),T}};function MS(){return this._results[Oh()]()}class yf{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Oh(),u=yf.prototype;u[o]||(u[o]=MS)}get changes(){return this._changes||(this._changes=new uo)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=oi(i);(this._changesDetected=!function(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],d=i[u];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class bg{constructor(i){this.queryList=i,this.matches=null}clone(){return new bg(this.queryList)}setDirty(){this.queryList.setDirty()}}class qc{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let d=0;d<u;d++){const m=o.getByIndex(d);c.push(this.queries[m.indexInDeclarationView].clone())}return new qc(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==Uw(i,o).matches&&this.queries[o].setDirty()}}class Pu{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class Ig{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(i,c);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new Ig(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Wc{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Wc(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const d=u[c];this.matchTNodeWithReadOption(i,o,_f(o,d)),this.matchTNodeWithReadOption(i,o,da(o,i,d,!1,!1))}else u===rf?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,da(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===os||c===Vy||c===rf&&4&o.type)this.addMatch(o.index,-2);else{const d=da(o,i,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function _f(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function vf(r,i,o,u){return-1===o?function(r,i){return 11&r.type?Xh(r,i):4&r.type?so(r,i):null}(i,r):-2===o?function(r,i,o){return o===os?Xh(i,r):o===rf?so(i,r):o===Vy?us(i,r):void 0}(r,i,u):ha(r,r[1],o,i)}function KC(r,i,o,u){const c=i[19].queries[u];if(null===c.matches){const d=r.data,m=o.matches,y=[];for(let E=0;E<m.length;E+=2){const C=m[E];y.push(C<0?null:vf(i,d[C],m[E+1],o.metadata.read))}c.matches=y}return c.matches}function Cg(r,i,o,u){const c=r.queries.getByIndex(o),d=c.matches;if(null!==d){const m=KC(r,i,c,o);for(let y=0;y<d.length;y+=2){const E=d[y];if(E>0)u.push(m[y/2]);else{const C=d[y+1],T=i[-E];for(let N=10;N<T.length;N++){const O=T[N];O[17]===O[3]&&Cg(O[1],O,C,u)}if(null!==T[9]){const N=T[9];for(let O=0;O<N.length;O++){const B=N[O];Cg(B[1],B,C,u)}}}}}return u}function i_(r){const i=Se(),o=Tt(),u=Co();ll(u+1);const c=Uw(o,u);if(r.dirty&&bo(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?Cg(o,i,u,[]):KC(o,i,c,u);r.reset(d,ef),r.notifyOnChanges()}return!0}return!1}function s_(r,i,o,u){const c=Tt();if(c.firstCreatePass){const d=vn();(function(r,i,o){null===r.queries&&(r.queries=new Ig),r.queries.track(new Wc(i,o))})(c,new Pu(i,o,u),d.index),function(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}!function(r,i,o){const u=new yf(4==(4&o));w0(r,i,u,u.destroy),null===i[19]&&(i[19]=new qc),i[19].queries.push(new bg(u))}(c,Se(),o)}function YC(){return r=Se(),i=Co(),r[19].queries[i].queryList;var r,i}function Uw(r,i){return r.queries.getByIndex(i)}const xg=new En("Application Initializer");let If=(()=>{class r{constructor(o){this.appInits=o,this.resolve=ky,this.reject=ky,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(EE(d))o.push(d);else if(bE(d)){const m=new Promise((y,E)=>{d.subscribe({complete:y,error:E})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Pn(xg,8))},r.\u0275prov=on({token:r,factory:r.\u0275fac}),r})();const fD=new En("AppId"),pD={provide:fD,useFactory:function(){return`${nb()}${nb()}${nb()}`},deps:[]};function nb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rb=new En("Platform Initializer"),gD=new En("Platform ID"),mD=new En("appBootstrapListener");let yD=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=on({token:r,factory:r.\u0275fac}),r})();const v_=new En("LocaleId"),wd=new En("DefaultCurrencyCode");class Ht{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}const Id=function(r){return new Hc(r)},cx=Id,Ra=function(r){return Promise.resolve(Id(r))},ED=function(r){const i=Id(r),u=es($n(r).declarations).reduce((c,d)=>{const m=Xn(d);return m&&c.push(new Sw(m)),c},[]);return new Ht(i,u)},E_=ED,fx=function(r){return Promise.resolve(ED(r))};let Cd=(()=>{class r{constructor(){this.compileModuleSync=cx,this.compileModuleAsync=Ra,this.compileModuleAndAllComponentsSync=E_,this.compileModuleAndAllComponentsAsync=fx}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=on({token:r,factory:r.\u0275fac}),r})();const Bn=(()=>Promise.resolve(0))();function wD(r){"undefined"==typeof Zone?Bn.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Kt{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new uo(!1),this.onMicrotaskEmpty=new uo(!1),this.onStable=new uo(!1),this.onError=new uo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let r=j.requestAnimationFrame,i=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(j,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,sb(r),r.isCheckStableRunning=!0,ib(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),sb(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,d,m,y)=>{try{return CD(r),o.invokeTask(c,d,m,y)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),DD(r)}},onInvoke:(o,u,c,d,m,y,E)=>{try{return CD(r),o.invoke(c,d,m,y,E)}finally{r.shouldCoalesceRunChangeDetection&&i(),DD(r)}},onHasTask:(o,u,c,d)=>{o.hasTask(c,d),u===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,sb(r),ib(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,c,d)=>(o.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Kt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Kt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+c,i,bD,ky,ky);try{return d.runTask(m,o,u)}finally{d.cancelTask(m)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const bD={};function ib(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function sb(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function CD(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function DD(r){r._nesting--,ib(r)}class yx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new uo,this.onMicrotaskEmpty=new uo,this.onStable=new uo,this.onError=new uo}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}let _x=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Kt.assertNotInAngularZone(),wD(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wD(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(Pn(Kt))},r.\u0275prov=on({token:r,factory:r.\u0275fac}),r})(),TD=(()=>{class r{constructor(){this._applications=new Map,Vo.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Vo.findTestabilityInTree(this,o,u)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=on({token:r,factory:r.\u0275fac}),r})();class vx{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function AD(r){Vo=r}let Vo=new vx,Ex=!0,Uo=!1;function ku(){return Uo=!0,Ex}function w_(){if(Uo)throw new Error("Cannot enable prod mode after platform setup.");Ex=!1}let Bo;const C_=new En("AllowMultipleToken");class Cx{constructor(i,o){this.name=i,this.token=o}}function ND(r,i,o=[]){const u=`Platform: ${i}`,c=new En(u);return(d=[])=>{let m=ub();if(!m||m.injector.get(C_,!1))if(r)r(o.concat(d).concat({provide:c,useValue:!0}));else{const y=o.concat(d).concat({provide:c,useValue:!0},{provide:Hl,useValue:"platform"});!function(r){if(Bo&&!Bo.destroyed&&!Bo.injector.get(C_,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Bo=r.get(zc);const i=r.get(rb,null);i&&i.forEach(o=>o())}(zt.create({providers:y,name:u}))}return function(r){const i=ub();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(c)}}function ub(){return Bo&&!Bo.destroyed?Bo:null}let zc=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const y=function(r,i){let o;return o="noop"===r?new yx:("zone.js"===r?void 0:r)||new Kt({enableLongStackTrace:ku(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),E=[{provide:Kt,useValue:y}];return y.run(()=>{const C=zt.create({providers:E,parent:this.injector,name:o.moduleType.name}),T=o.create(C),N=T.injector.get(_e,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const O=y.onError.subscribe({next:B=>{N.handleError(B)}});T.onDestroy(()=>{cb(this._modules,T),O.unsubscribe()})}),function(r,i,o){try{const u=o();return EE(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(N,y,()=>{const O=T.injector.get(If);return O.runInitializers(),O.donePromise.then(()=>(Rc(T.injector.get(v_,Sa)||Sa),this._moduleDoBootstrap(T),T))})})}bootstrapModule(o,u=[]){const c=D_({},u);return function(r,i,o){const u=new Hc(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(o){const u=o.injector.get(Td);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${Z(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Pn(zt))},r.\u0275prov=on({token:r,factory:r.\u0275fac}),r})();function D_(r,i){return Array.isArray(i)?i.reduce(D_,r):Object.assign(Object.assign({},r),i)}let Td=(()=>{class r{constructor(o,u,c,d,m){this._zone=o,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new F.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),E=new F.y(C=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Kt.assertNotInAngularZone(),wD(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{Kt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{T.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ce.T)(y,E.pipe(r=>(0,le.x)()(function(r,i){return function(u){let c;c="function"==typeof r?r:function(){return r};const d=Object.create(u,te.N);return d.source=u,d.subjectFactory=c,d}}(W)(r))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=o instanceof rg?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const d=function(r){return r.isBoundToModule}(c)?void 0:this._injector.get(ld),y=c.create(zt.NULL,[],u||c.selector,d),E=y.location.nativeElement,C=y.injector.get(_x,null),T=C&&y.injector.get(TD);return C&&T&&T.registerApplication(E,C),y.onDestroy(()=>{this.detachView(y.hostView),cb(this.components,y),T&&T.unregisterApplication(E)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;cb(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(mD,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(Pn(Kt),Pn(zt),Pn(_e),Pn(Kr),Pn(If))},r.\u0275prov=on({token:r,factory:r.\u0275fac}),r})();function cb(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}class PD{}class Kc{}const Tx={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let kD=(()=>{class r{constructor(o,u){this._compiler=o,this._config=u||Tx}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,c]=o.split("#");return void 0===c&&(c="default"),V(8255)(u).then(d=>d[c]).then(d=>db(d,u,c)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,c]=o.split("#"),d="NgFactory";return void 0===c&&(c="default",d=""),V(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(m=>m[c+d]).then(m=>db(m,u,c))}}return r.\u0275fac=function(o){return new(o||r)(Pn(Cd),Pn(Kc,8))},r.\u0275prov=on({token:r,factory:r.\u0275fac}),r})();function db(r,i,o){if(!r)throw new Error(`Cannot find '${o}' in '${i}'`);return r}const Nd=function(r){return null},BD=ND(null,"core",[{provide:gD,useValue:"unknown"},{provide:zc,deps:[zt]},{provide:TD,deps:[]},{provide:yD,deps:[]}]),mb=[{provide:Td,useClass:Td,deps:[Kt,zt,_e,Kr,If]},{provide:TS,deps:[Kt],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(o){i.push(o)}}},{provide:If,useClass:If,deps:[[new Ri,xg]]},{provide:Cd,useClass:Cd,deps:[]},pD,{provide:ug,useFactory:function(){return tf},deps:[]},{provide:cd,useFactory:function(){return nf},deps:[]},{provide:v_,useFactory:function(r){return Rc(r=r||"undefined"!=typeof $localize&&$localize.locale||Sa),r},deps:[[new lc(v_),new Ri,new Ea]]},{provide:wd,useValue:"USD"}];let Vx=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Pn(Td))},r.\u0275mod=Ba({type:r}),r.\u0275inj=bi({providers:mb}),r})()},8939:(et,Te,V)=>{"use strict";V.d(Te,{hO:()=>Z,xv:()=>W,Dh:()=>le,GT:()=>ie,cc:()=>re,on:()=>k,pX:()=>te});var f=V(3018),ee=V(7841),F=V(6643);et=V.hmd(et);const ce=["ngOnDestroy"],te=(me,ve,he,Ce={})=>new Proxy(me,{get:(Fe,Le)=>he.runOutsideAngular(()=>{var yt;if(me[Le])return(null===(yt=null==Ce?void 0:Ce.spy)||void 0===yt?void 0:yt.get)&&Ce.spy.get(Le,me[Le]),me[Le];if(ce.indexOf(Le)>-1)return()=>{};const ht=ve.toPromise().then(De=>{const ne=De&&De[Le];return"function"==typeof ne?ne.bind(De):ne&&ne.then?ne.then(oe=>he.run(()=>oe)):he.run(()=>ne)});return new Proxy(()=>{},{get:(De,ne)=>ht[ne],apply:(De,ne,oe)=>ht.then(fe=>{var ue;const Pe=fe&&fe(...oe);return(null===(ue=null==Ce?void 0:Ce.spy)||void 0===ue?void 0:ue.apply)&&Ce.spy.apply(Le,oe,Pe),Pe})})})}),ie=(me,ve)=>{ve.forEach(he=>{Object.getOwnPropertyNames(he.prototype||he).forEach(Ce=>{Object.defineProperty(me.prototype,Ce,Object.getOwnPropertyDescriptor(he.prototype||he,Ce))})})};class Ee{constructor(ve){return ve}}const le=new f.OlP("angularfire2.app.options"),W=new f.OlP("angularfire2.app.name");function k(me,ve,he){const Fe="object"==typeof he&&he||{};Fe.name=Fe.name||"string"==typeof he&&he||"[DEFAULT]";const yt=ee.Z.apps.filter(ht=>ht&&ht.name===Fe.name)[0]||ve.runOutsideAngular(()=>ee.Z.initializeApp(me,Fe));try{JSON.stringify(me)!==JSON.stringify(yt.options)&&L("error",`${yt.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ht){}return new Ee(yt)}const L=(me,...ve)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[me](...ve)},Q={provide:Ee,useFactory:k,deps:[le,f.R0b,[new f.FiY,W]]};let Z=(()=>{class me{constructor(he){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",f.q4F.full,he.toString())}static initializeApp(he,Ce){return{ngModule:me,providers:[{provide:le,useValue:he},{provide:W,useValue:Ce}]}}}return me.\u0275fac=function(he){return new(he||me)(f.LFG(f.Lbi))},me.\u0275mod=f.oAB({type:me}),me.\u0275inj=f.cJS({providers:[Q]}),me})();function re(me,ve,he,Ce,Fe){const[,Le,yt]=globalThis.\u0275AngularfireInstanceCache.find(ht=>ht[0]===me)||[];if(Le)return function(me,ve){try{return me.toString()===ve.toString()}catch(he){return me===ve}}(Fe,yt)||(G("error",`${ve} was already initialized on the ${he} Firebase App with different settings.${de?" You may need to reload as Firebase is not HMR aware.":""}`),G("warn",{is:Fe,was:yt})),Le;{const ht=Ce();return globalThis.\u0275AngularfireInstanceCache.push([me,ht,Fe]),ht}}const de=!!et.hot,G=(me,...ve)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[me](...ve)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:(et,Te,V)=>{"use strict";V.d(Te,{q4:()=>Qg,iC:()=>Rr,HU:()=>qr,vb:()=>xo,JM:()=>uc});var f=V(3018),ee=V(2329),F=V(8239),ce=V(5452),te=V(3854),ie=V(6034),Ee=V(5601),le=V(6676);const W="@firebase/installations",k="0.5.2",Q=`w:${k}`,Z="FIS_v2",ve=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function he(I){return I instanceof te.ZR&&I.code.includes("request-failed")}function Ce({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Fe(I){return{token:I.token,requestStatus:2,expiresIn:fe(I.expiresIn),creationTime:Date.now()}}function Le(I,D){return yt.apply(this,arguments)}function yt(){return(yt=(0,F.Z)(function*(I,D){const U=(yield D.json()).error;return ve.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ht({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function De(I,{refreshToken:D}){const x=ht(I);return x.append("Authorization",function(I){return`${Z} ${I}`}(D)),x}function ne(I){return oe.apply(this,arguments)}function oe(){return(oe=(0,F.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function fe(I){return Number(I.replace("s","000"))}function Pe(I,D){return ge.apply(this,arguments)}function ge(){return(ge=(0,F.Z)(function*(I,{fid:D}){const x=Ce(I),pe={method:"POST",headers:ht(I),body:JSON.stringify({fid:D,authVersion:Z,appId:I.appId,sdkVersion:Q})},Me=yield ne(()=>fetch(x,pe));if(Me.ok){const We=yield Me.json();return{fid:We.fid||D,registrationStatus:2,refreshToken:We.refreshToken,authToken:Fe(We.authToken)}}throw yield Le("Create Installation",Me)})).apply(this,arguments)}function tt(I){return new Promise(D=>{setTimeout(D,I)})}const Mn=/^[cdef][\w-]{21}$/;function Gt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Mn.test(x)?x:""}catch(I){return""}}function qt(I){return`${I.appName}!${I.appId}`}const jn=new Map;function Ur(I,D){const x=qt(I);Nt(x,D),function(I,D){const x=(!fr&&"BroadcastChannel"in self&&(fr=new BroadcastChannel("[Firebase] FID Change"),fr.onmessage=I=>{Nt(I.data.key,I.data.fid)}),fr);x&&x.postMessage({key:I,fid:D}),0===jn.size&&fr&&(fr.close(),fr=null)}(x,D)}function Nt(I,D){const x=jn.get(I);if(x)for(const U of x)U(D)}let fr=null;const ti="firebase-installations-store";let ji=null;function hs(){return ji||(ji=(0,le.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(ti)}})),ji}function ni(I,D){return In.apply(this,arguments)}function In(){return(In=(0,F.Z)(function*(I,D){const x=qt(I),K=(yield hs()).transaction(ti,"readwrite"),pe=K.objectStore(ti),Me=yield pe.get(x);return yield pe.put(D,x),yield K.complete,(!Me||Me.fid!==D.fid)&&Ur(I,D.fid),D})).apply(this,arguments)}function pr(I){return lo.apply(this,arguments)}function lo(){return(lo=(0,F.Z)(function*(I){const D=qt(I),U=(yield hs()).transaction(ti,"readwrite");yield U.objectStore(ti).delete(D),yield U.complete})).apply(this,arguments)}function st(I,D){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,F.Z)(function*(I,D){const x=qt(I),K=(yield hs()).transaction(ti,"readwrite"),pe=K.objectStore(ti),Me=yield pe.get(x),We=D(Me);return void 0===We?yield pe.delete(x):yield pe.put(We,x),yield K.complete,We&&(!Me||Me.fid!==We.fid)&&Ur(I,We.fid),We})).apply(this,arguments)}function Bt(I){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,F.Z)(function*(I){let D;const x=yield st(I,U=>{const K=hn(U),pe=kt(I,K);return D=pe.registrationPromise,pe.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function hn(I){return fn(I||{fid:Gt(),registrationStatus:0})}function kt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ve.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:x,registrationPromise:function(I,D){return Qe.apply(this,arguments)}(I,x)}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:_n(I)}:{installationEntry:D}}function Qe(){return(Qe=(0,F.Z)(function*(I,D){try{return ni(I,yield Pe(I,D))}catch(x){throw he(x)&&409===x.customData.serverCode?yield pr(I):yield ni(I,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function _n(I){return fs.apply(this,arguments)}function fs(){return(fs=(0,F.Z)(function*(I){let D=yield Ii(I);for(;1===D.registrationStatus;)yield tt(100),D=yield Ii(I);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:U}=yield Bt(I);return U||x}return D})).apply(this,arguments)}function Ii(I){return st(I,D=>{if(!D)throw ve.create("installation-not-found");return fn(D)})}function fn(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function ho(I,D){return $.apply(this,arguments)}function $(){return($=(0,F.Z)(function*({appConfig:I,platformLoggerProvider:D},x){const U=H(I,x),K=De(I,x),pe=D.getImmediate({optional:!0});pe&&K.append("x-firebase-client",pe.getPlatformInfoString());const We={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:Q}})},Ge=yield ne(()=>fetch(U,We));if(Ge.ok)return Fe(yield Ge.json());throw yield Le("Generate Auth Token",Ge)})).apply(this,arguments)}function H(I,{fid:D}){return`${Ce(I)}/${D}/authTokens:generate`}function j(I){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(I,D=!1){let x;const U=yield st(I.appConfig,pe=>{if(!Yt(pe))throw ve.create("not-registered");const Me=pe.authToken;if(!D&&Br(Me))return pe;if(1===Me.requestStatus)return x=se(I,D),pe;{if(!navigator.onLine)throw ve.create("app-offline");const We=en(pe);return x=Ft(I,We),We}});return x?yield x:U.authToken})).apply(this,arguments)}function se(I,D){return qe.apply(this,arguments)}function qe(){return(qe=(0,F.Z)(function*(I,D){let x=yield $e(I.appConfig);for(;1===x.authToken.requestStatus;)yield tt(100),x=yield $e(I.appConfig);const U=x.authToken;return 0===U.requestStatus?j(I,D):U})).apply(this,arguments)}function $e(I){return st(I,D=>{if(!Yt(D))throw ve.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ft(I,D){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,F.Z)(function*(I,D){try{const x=yield ho(I,D),U=Object.assign(Object.assign({},D),{authToken:x});return yield ni(I.appConfig,U),x}catch(x){if(!he(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ni(I.appConfig,U)}else yield pr(I.appConfig);throw x}})).apply(this,arguments)}function Yt(I){return void 0!==I&&2===I.registrationStatus}function Br(I){return 2===I.requestStatus&&!function(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function en(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function Go(){return(Go=(0,F.Z)(function*(I){const D=I,{installationEntry:x,registrationPromise:U}=yield Bt(D.appConfig);return U?U.catch(console.error):j(D).catch(console.error),x.fid})).apply(this,arguments)}function Ua(){return(Ua=(0,F.Z)(function*(I,D=!1){const x=I;return yield Vu(x.appConfig),(yield j(x,D)).token})).apply(this,arguments)}function Vu(I){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,F.Z)(function*(I){const{registrationPromise:D}=yield Bt(I);D&&(yield D)})).apply(this,arguments)}function $n(I){return ve.create("missing-app-config-values",{valueName:I})}const Ud="installations";(0,ce._registerComponent)(new ie.wA(Ud,I=>{const D=I.getProvider("app").getImmediate();return{app:D,appConfig:function(I){if(!I||!I.options)throw $n("App Configuration");if(!I.name)throw $n("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!I.options[x])throw $n(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D),platformLoggerProvider:(0,ce._getProvider)(D,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new ie.wA("installations-internal",I=>{const D=I.getProvider("app").getImmediate(),x=(0,ce._getProvider)(D,Ud).getImmediate();return{getId:()=>function(I){return Go.apply(this,arguments)}(x),getToken:K=>function(I){return Ua.apply(this,arguments)}(x,K)}},"PRIVATE")),(0,ce.registerVersion)(W,k),(0,ce.registerVersion)(W,k,"esm2017");const gr="@firebase/remote-config",Tn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class nl{constructor(D,x,U,K){this.client=D,this.storage=x,this.storageCache=U,this.logger=K}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-x,K=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${K}.`),K}fetch(D){var x=this;return(0,F.Z)(function*(){const[U,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(D.cacheMaxAgeMillis,U))return K;D.eTag=K&&K.eTag;const pe=yield x.client.fetch(D),Me=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===pe.status&&Me.push(x.storage.setLastSuccessfulFetchResponse(pe)),yield Promise.all(Me),pe})()}}function $r(I=navigator){return I.languages&&I.languages[0]||I.language}class $t{constructor(D,x,U,K,pe,Me){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=U,this.projectId=K,this.apiKey=pe,this.appId=Me}fetch(D){var x=this;return(0,F.Z)(function*(){const[U,K]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ge={sdk_version:x.sdkVersion,app_instance_id:U,app_instance_id_token:K,app_id:x.appId,language_code:$r()},Mt={method:"POST",headers:We,body:JSON.stringify(Ge)},Lt=fetch(Me,Mt),Zn=new Promise((Ji,Ts)=>{D.signal.addEventListener(()=>{const It=new Error("The operation was aborted.");It.name="AbortError",Ts(It)})});let rr;try{yield Promise.race([Lt,Zn]),rr=yield Lt}catch(Ji){let Ts="fetch-client-network";throw"AbortError"===Ji.name&&(Ts="fetch-timeout"),Tn.create(Ts,{originalErrorMessage:Ji.message})}let Kn=rr.status;const Qi=rr.headers.get("ETag")||void 0;let su,ai;if(200===rr.status){let Ji;try{Ji=yield rr.json()}catch(Ts){throw Tn.create("fetch-client-parse",{originalErrorMessage:Ts.message})}su=Ji.entries,ai=Ji.state}if("INSTANCE_STATE_UNSPECIFIED"===ai?Kn=500:"NO_CHANGE"===ai?Kn=304:("NO_TEMPLATE"===ai||"EMPTY_CONFIG"===ai)&&(su={}),304!==Kn&&200!==Kn)throw Tn.create("fetch-status",{httpStatus:Kn});return{status:Kn,eTag:Qi,config:su}})()}}class Hr{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,F.Z)(function*(){const U=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:U}){var K=this;return(0,F.Z)(function*(){yield function(I,D){return new Promise((x,U)=>{const K=Math.max(D-Date.now(),0),pe=setTimeout(x,K);I.addEventListener(()=>{clearTimeout(pe),U(Tn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const pe=yield K.client.fetch(D);return yield K.storage.deleteThrottleMetadata(),pe}catch(pe){if(!function(I){if(!(I instanceof te.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(pe))throw pe;const Me={throttleEndTimeMillis:Date.now()+(0,te.$s)(U),backoffCount:U+1};return yield K.storage.setThrottleMetadata(Me),K.attemptFetch(D,Me)}})()}}class $g{constructor(D,x,U,K,pe){this.app=D,this._client=x,this._storageCache=U,this._storage=K,this._logger=pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wo(I,D){const x=I.target.error||void 0;return Tn.create(D,{originalErrorMessage:x&&x.message})}const mo="app_namespace_store";class Hd{constructor(D,x,U,K=function(){return new Promise((I,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=U=>{D(Wo(U,"storage-open"))},x.onsuccess=U=>{I(U.target.result)},x.onupgradeneeded=U=>{const K=U.target.result;switch(U.oldVersion){case 0:K.createObjectStore(mo,{keyPath:"compositeKey"})}}}catch(x){D(Tn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=D,this.appName=x,this.namespace=U,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,F.Z)(function*(){const U=yield x.openDbPromise;return new Promise((K,pe)=>{const We=U.transaction([mo],"readonly").objectStore(mo),Ge=x.createCompositeKey(D);try{const Mt=We.get(Ge);Mt.onerror=Lt=>{pe(Wo(Lt,"storage-get"))},Mt.onsuccess=Lt=>{const Zn=Lt.target.result;K(Zn?Zn.value:void 0)}}catch(Mt){pe(Tn.create("storage-get",{originalErrorMessage:Mt&&Mt.message}))}})})()}set(D,x){var U=this;return(0,F.Z)(function*(){const K=yield U.openDbPromise;return new Promise((pe,Me)=>{const Ge=K.transaction([mo],"readwrite").objectStore(mo),Mt=U.createCompositeKey(D);try{const Lt=Ge.put({compositeKey:Mt,value:x});Lt.onerror=Zn=>{Me(Wo(Zn,"storage-set"))},Lt.onsuccess=()=>{pe()}}catch(Lt){Me(Tn.create("storage-set",{originalErrorMessage:Lt&&Lt.message}))}})})()}delete(D){var x=this;return(0,F.Z)(function*(){const U=yield x.openDbPromise;return new Promise((K,pe)=>{const We=U.transaction([mo],"readwrite").objectStore(mo),Ge=x.createCompositeKey(D);try{const Mt=We.delete(Ge);Mt.onerror=Lt=>{pe(Wo(Lt,"storage-delete"))},Mt.onsuccess=()=>{K()}}catch(Mt){pe(Tn.create("storage-delete",{originalErrorMessage:Mt&&Mt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class zo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const x=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),K=D.storage.getActiveConfig(),pe=yield x;pe&&(D.lastFetchStatus=pe);const Me=yield U;Me&&(D.lastSuccessfulFetchTimestampMillis=Me);const We=yield K;We&&(D.activeConfig=We)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function qg(){return $u.apply(this,arguments)}function $u(){return($u=(0,F.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new ie.wA("remote-config",function(D,{instanceIdentifier:x}){const U=D.getProvider("app").getImmediate(),K=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Tn.create("registration-window");if(!(0,te.hl)())throw Tn.create("indexed-db-unavailable");const{projectId:pe,apiKey:Me,appId:We}=U.options;if(!pe)throw Tn.create("registration-project-id");if(!Me)throw Tn.create("registration-api-key");if(!We)throw Tn.create("registration-app-id");const Ge=new Hd(We,U.name,x=x||"firebase"),Mt=new zo(Ge),Lt=new Ee.Yd(gr);Lt.logLevel=Ee.in.ERROR;const Zn=new $t(K,ce.SDK_VERSION,x,pe,Me,We),rr=new Hr(Zn,Ge),Kn=new nl(rr,Ge,Mt,Lt),Qi=new $g(U,Kn,Mt,Ge,Lt);return function(I){const D=(0,te.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Qi),Qi},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(gr,"0.3.1"),(0,ce.registerVersion)(gr,"0.3.1","esm2017");const yo="/firebase-messaging-sw.js",Ga="/firebase-cloud-messaging-push-scope",js="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Hu="google.c.a.c_id",sl="google.c.a.c_l",Wg="google.c.a.ts",Ko="google.c.a.e";var Sr=(()=>{return(I=Sr||(Sr={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Sr;var I})();function Ai(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ol(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(x),K=new Uint8Array(U.length);for(let pe=0;pe<U.length;++pe)K[pe]=U.charCodeAt(pe);return K}const _o="fcm_token_details_db",Gd="fcm_token_object_Store";function Of(I){return vo.apply(this,arguments)}function vo(){return(vo=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(pe=>pe.name).includes(_o))return null;let D=null;return(yield(0,le.openDb)(_o,5,function(){var U=(0,F.Z)(function*(K){var pe;if(K.oldVersion<2||!K.objectStoreNames.contains(Gd))return;const Me=K.transaction.objectStore(Gd),We=yield Me.index("fcmSenderId").get(I);if(yield Me.clear(),We)if(2===K.oldVersion){const Ge=We;if(!Ge.auth||!Ge.p256dh||!Ge.endpoint)return;D={token:Ge.fcmToken,createTime:null!==(pe=Ge.createTime)&&void 0!==pe?pe:Date.now(),subscriptionOptions:{auth:Ge.auth,p256dh:Ge.p256dh,endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:"string"==typeof Ge.vapidKey?Ge.vapidKey:Ai(Ge.vapidKey)}}}else if(3===K.oldVersion){const Ge=We;D={token:Ge.fcmToken,createTime:Ge.createTime,subscriptionOptions:{auth:Ai(Ge.auth),p256dh:Ai(Ge.p256dh),endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:Ai(Ge.vapidKey)}}}else if(4===K.oldVersion){const Ge=We;D={token:Ge.fcmToken,createTime:Ge.createTime,subscriptionOptions:{auth:Ai(Ge.auth),p256dh:Ai(Ge.p256dh),endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:Ai(Ge.vapidKey)}}}});return function(K){return U.apply(this,arguments)}}())).close(),yield(0,le.deleteDb)(_o),yield(0,le.deleteDb)("fcm_vapid_details_db"),yield(0,le.deleteDb)("undefined"),Gu(D)?D:null})).apply(this,arguments)}function Gu(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Gn="firebase-messaging-store";let Yo=null;function Qo(){return Yo||(Yo=(0,le.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(Gn)}})),Yo}function $s(I){return $i.apply(this,arguments)}function $i(){return($i=(0,F.Z)(function*(I){const D=Xo(I),U=yield(yield Qo()).transaction(Gn).objectStore(Gn).get(D);if(U)return U;{const K=yield Of(I.appConfig.senderId);if(K)return yield Eo(I,K),K}})).apply(this,arguments)}function Eo(I,D){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,F.Z)(function*(I,D){const x=Xo(I),K=(yield Qo()).transaction(Gn,"readwrite");return yield K.objectStore(Gn).put(D,x),yield K.complete,D})).apply(this,arguments)}function an(I){return qu.apply(this,arguments)}function qu(){return(qu=(0,F.Z)(function*(I){const D=Xo(I),U=(yield Qo()).transaction(Gn,"readwrite");yield U.objectStore(Gn).delete(D),yield U.complete})).apply(this,arguments)}function Xo({appConfig:I}){return I.appId}const bt=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wd(I,D){return zu.apply(this,arguments)}function zu(){return(zu=(0,F.Z)(function*(I,D){const x=yield qn(I),U=ea(D),K={method:"POST",headers:x,body:JSON.stringify(U)};let pe;try{pe=yield(yield fetch(wo(I.appConfig),K)).json()}catch(Me){throw bt.create("token-subscribe-failed",{errorInfo:Me})}if(pe.error)throw bt.create("token-subscribe-failed",{errorInfo:pe.error.message});if(!pe.token)throw bt.create("token-subscribe-no-token");return pe.token})).apply(this,arguments)}function Wa(I,D){return mr.apply(this,arguments)}function mr(){return(mr=(0,F.Z)(function*(I,D){const x=yield qn(I),U=ea(D.subscriptionOptions),K={method:"PATCH",headers:x,body:JSON.stringify(U)};let pe;try{pe=yield(yield fetch(`${wo(I.appConfig)}/${D.token}`,K)).json()}catch(Me){throw bt.create("token-update-failed",{errorInfo:Me})}if(pe.error)throw bt.create("token-update-failed",{errorInfo:pe.error.message});if(!pe.token)throw bt.create("token-update-no-token");return pe.token})).apply(this,arguments)}function Pf(I,D){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,F.Z)(function*(I,D){const U={method:"DELETE",headers:yield qn(I)};try{const pe=yield(yield fetch(`${wo(I.appConfig)}/${D}`,U)).json();if(pe.error)throw bt.create("token-unsubscribe-failed",{errorInfo:pe.error.message})}catch(K){throw bt.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function wo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function qn(I){return bo.apply(this,arguments)}function bo(){return(bo=(0,F.Z)(function*({appConfig:I,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function ea({p256dh:I,auth:D,endpoint:x,vapidKey:U}){const K={web:{endpoint:x,auth:D,p256dh:I}};return U!==js&&(K.web.applicationPubKey=U),K}const za=6048e5;function Hs(I){return ta.apply(this,arguments)}function ta(){return(ta=(0,F.Z)(function*(I){const D=yield al(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Ai(D.getKey("auth")),p256dh:Ai(D.getKey("p256dh"))},U=yield $s(I.firebaseDependencies);if(U){if(zd(U.subscriptionOptions,x))return Date.now()>=U.createTime+za?zg(I,{token:U.token,createTime:Date.now(),subscriptionOptions:x}):U.token;try{yield Pf(I.firebaseDependencies,U.token)}catch(K){console.warn(K)}return na(I.firebaseDependencies,x)}return na(I.firebaseDependencies,x)})).apply(this,arguments)}function Zu(I){return ut.apply(this,arguments)}function ut(){return(ut=(0,F.Z)(function*(I){const D=yield $s(I.firebaseDependencies);D&&(yield Pf(I.firebaseDependencies,D.token),yield an(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function zg(I,D){return ys.apply(this,arguments)}function ys(){return(ys=(0,F.Z)(function*(I,D){try{const x=yield Wa(I.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Eo(I.firebaseDependencies,U),x}catch(x){throw yield Zu(I),x}})).apply(this,arguments)}function na(I,D){return Io.apply(this,arguments)}function Io(){return(Io=(0,F.Z)(function*(I,D){const U={token:yield Wd(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Eo(I,U),U.token})).apply(this,arguments)}function al(I,D){return _s.apply(this,arguments)}function _s(){return(_s=(0,F.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ol(D)})})).apply(this,arguments)}function zd(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Se(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcm_message_id};return function(I,D){if(!D.notification)return;I.notification={};const x=D.notification.title;x&&(I.notification.title=x);const U=D.notification.body;U&&(I.notification.body=U);const K=D.notification.image;K&&(I.notification.image=K)}(D,I),function(I,D){!D.data||(I.data=D.data)}(D,I),function(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const x=D.fcmOptions.link;x&&(I.fcmOptions.link=x);const U=D.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(D,I),D}function Zd(I){return"object"==typeof I&&!!I&&Hu in I}function ra(I,D){const x=[];for(let U=0;U<I.length;U++)x.push(I.charAt(U)),U<D.length&&x.push(D.charAt(U));return x.join("")}function Za(I){return bt.create("missing-app-config-values",{valueName:I})}ra("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ra("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gs{constructor(D,x,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function(I){if(!I||!I.options)throw Za("App Configuration Object");if(!I.name)throw Za("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const U of D)if(!x[U])throw Za(U);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:K,installations:x,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Kd(I){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(yo,{scope:Ga}),I.swRegistration.update().catch(()=>{})}catch(D){throw bt.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function ia(I,D){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,F.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield Kd(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw bt.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function xr(I,D){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,F.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=js)})).apply(this,arguments)}function qi(){return(qi=(0,F.Z)(function*(I,D){if(!navigator)throw bt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bt.create("permission-blocked");return yield xr(I,null==D?void 0:D.vapidKey),yield ia(I,null==D?void 0:D.serviceWorkerRegistration),Hs(I)})).apply(this,arguments)}function vs(I,D,x){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,F.Z)(function*(I,D,x){const U=Yd(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:x[Hu],message_name:x[sl],message_time:x[Wg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yd(I){switch(I){case Sr.NOTIFICATION_CLICKED:return"notification_open";case Sr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ya(){return(Ya=(0,F.Z)(function*(I,D){const x=D.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===Sr.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Se(x)):I.onMessageHandler.next(Se(x)));const U=x.data;Zd(U)&&"1"===U[Ko]&&(yield vs(I,x.messageType,U))})).apply(this,arguments)}const sa="@firebase/messaging";function Qd(){return Do.apply(this,arguments)}function Do(){return(Do=(0,F.Z)(function*(){return"undefined"!=typeof window&&(0,te.hl)()&&(yield(0,te.eu)())&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new ie.wA("messaging",I=>{const D=new Gs(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function(I,D){return Ya.apply(this,arguments)}(D,x)),D},"PUBLIC")),(0,ce._registerComponent)(new ie.wA("messaging-internal",I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,D){return qi.apply(this,arguments)}(D,U)}},"PRIVATE")),(0,ce.registerVersion)(sa,"0.9.2"),(0,ce.registerVersion)(sa,"0.9.2","esm2017");const Wi="analytics",un="firebase_id",hl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",eh="https://www.googletagmanager.com/gtag/js",Wn=new Ee.Yd("@firebase/analytics");function th(I){return Promise.all(I.map(D=>D.catch(x=>x)))}function oa(I,D){const x=document.createElement("script");x.src=`${eh}?l=${I}&id=${D}`,x.async=!0,document.head.appendChild(x)}function fl(I,D,x,U,K,pe){return To.apply(this,arguments)}function To(){return(To=(0,F.Z)(function*(I,D,x,U,K,pe){const Me=U[K];try{if(Me)yield D[Me];else{const Ge=(yield th(x)).find(Mt=>Mt.measurementId===K);Ge&&(yield D[Ge.appId])}}catch(We){Wn.error(We)}I("config",K,pe)})).apply(this,arguments)}function pl(I,D,x,U,K){return gl.apply(this,arguments)}function gl(){return(gl=(0,F.Z)(function*(I,D,x,U,K){try{let pe=[];if(K&&K.send_to){let Me=K.send_to;Array.isArray(Me)||(Me=[Me]);const We=yield th(x);for(const Ge of Me){const Mt=We.find(Zn=>Zn.measurementId===Ge),Lt=Mt&&D[Mt.appId];if(!Lt){pe=[];break}pe.push(Lt)}}0===pe.length&&(pe=Object.values(D)),yield Promise.all(pe),I("event",U,K||{})}catch(pe){Wn.error(pe)}})).apply(this,arguments)}function W_(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(eh))return D;return null}const yr=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ja=new class{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Zg(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function cn(I){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,F.Z)(function*(I){var D;const{appId:x,apiKey:U}=I,K={method:"GET",headers:Zg(U)},pe=hl.replace("{app-id}",x),Me=yield fetch(pe,K);if(200!==Me.status&&304!==Me.status){let We="";try{const Ge=yield Me.json();(null===(D=Ge.error)||void 0===D?void 0:D.message)&&(We=Ge.error.message)}catch(Ge){}throw yr.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:We})}return Me.json()})).apply(this,arguments)}function ec(I){return eu.apply(this,arguments)}function eu(){return(eu=(0,F.Z)(function*(I,D=Ja,x){const{appId:U,apiKey:K,measurementId:pe}=I.options;if(!U)throw yr.create("no-app-id");if(!K){if(pe)return{measurementId:pe,appId:U};throw yr.create("no-api-key")}const Me=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new nu;return setTimeout((0,F.Z)(function*(){We.abort()}),void 0!==x?x:6e4),tc({appId:U,apiKey:K,measurementId:pe},Me,We,D)})).apply(this,arguments)}function tc(I,D,x){return nc.apply(this,arguments)}function nc(){return(nc=(0,F.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:x},U,K=Ja){const{appId:pe,measurementId:Me}=I;try{yield tu(U,D)}catch(We){if(Me)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:pe,measurementId:Me};throw We}try{const We=yield cn(I);return K.deleteThrottleMetadata(pe),We}catch(We){if(!nh(We)){if(K.deleteThrottleMetadata(pe),Me)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:pe,measurementId:Me};throw We}const Ge=503===Number(We.customData.httpStatus)?(0,te.$s)(x,K.intervalMillis,30):(0,te.$s)(x,K.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+Ge,backoffCount:x+1};return K.setThrottleMetadata(pe,Mt),Wn.debug(`Calling attemptFetch again in ${Ge} millis`),tc(I,Mt,U,K)}})).apply(this,arguments)}function tu(I,D){return new Promise((x,U)=>{const K=Math.max(D-Date.now(),0),pe=setTimeout(x,K);I.addEventListener(()=>{clearTimeout(pe),U(yr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function nh(I){if(!(I instanceof te.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class nu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function ru(){return ua.apply(this,arguments)}function ua(){return(ua=(0,F.Z)(function*(){if(!(0,te.hl)())return Wn.warn(yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(I){return Wn.warn(yr.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ca(){return(ca=(0,F.Z)(function*(I,D,x,U,K,pe,Me){var We;const Ge=ec(I);Ge.then(Kn=>{x[Kn.measurementId]=Kn.appId,I.options.measurementId&&Kn.measurementId!==I.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kn=>Wn.error(Kn)),D.push(Ge);const Mt=ru().then(Kn=>{if(Kn)return U.getId()}),[Lt,Zn]=yield Promise.all([Ge,Mt]);W_()||oa(pe,Lt.measurementId),K("js",new Date);const rr=null!==(We=null==Me?void 0:Me.config)&&void 0!==We?We:{};return rr.origin="firebase",rr.update=!0,null!=Zn&&(rr[un]=Zn),K("config",Lt.measurementId,rr),Lt.measurementId})).apply(this,arguments)}class gn{constructor(D){this.app=D}_delete(){return delete Xe[this.app.options.appId],Promise.resolve()}}let Xe={},zi=[];const bs={};let zs,Fn,nr="dataLayer",ml=!1;function ii(I,D,x){!function(){const I=[];if((0,te.ru)()&&I.push("This is a browser extension environment."),(0,te.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((U,K)=>`(${K+1}) ${U}`).join(" "),x=yr.create("invalid-analytics-context",{errorInfo:D});Wn.warn(x.message)}}();const U=I.options.appId;if(!U)throw yr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw yr.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xe[U])throw yr.create("already-exists",{id:U});if(!ml){!function(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(nr);const{wrappedGtag:pe,gtagCore:Me}=function(I,D,x,U,K){let pe=function(...Me){window[U].push(arguments)};return window[K]&&"function"==typeof window[K]&&(pe=window[K]),window[K]=function(I,D,x,U){function pe(){return(pe=(0,F.Z)(function*(Me,We,Ge){try{"event"===Me?yield pl(I,D,x,We,Ge):"config"===Me?yield fl(I,D,x,U,We,Ge):I("set",We)}catch(Mt){Wn.error(Mt)}})).apply(this,arguments)}return function(Me,We,Ge){return pe.apply(this,arguments)}}(pe,I,D,x),{gtagCore:pe,wrappedGtag:window[K]}}(Xe,zi,bs,nr,"gtag");Fn=pe,zs=Me,ml=!0}return Xe[U]=function(I,D,x,U,K,pe,Me){return ca.apply(this,arguments)}(I,zi,bs,D,zs,nr,x),new gn(I)}function yl(){return(yl=(0,F.Z)(function*(I,D,x,U,K){if(K&&K.global)I("event",x,U);else{const pe=yield D;I("event",x,Object.assign(Object.assign({},U),{send_to:pe}))}})).apply(this,arguments)}function Is(){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,F.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}const Yg="@firebase/analytics";(0,ce._registerComponent)(new ie.wA(Wi,(D,{options:x})=>ii(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ce._registerComponent)(new ie.wA("analytics-internal",function(D){try{const x=D.getProvider(Wi).getImmediate();return{logEvent:(U,K,pe)=>function(I,D,x,U){I=(0,te.m9)(I),function(I,D,x,U,K){return yl.apply(this,arguments)}(Fn,Xe[I.app.options.appId],D,x,U).catch(K=>Wn.error(K))}(x,U,K,pe)}}catch(x){throw yr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ce.registerVersion)(Yg,"0.7.2"),(0,ce.registerVersion)(Yg,"0.7.2","esm2017");var vl=V(7771),En=V(3637),pa=V(3342),ga=V(3101),sh=V(309);const Qg=new f.GfV("7.1.1"),iu="__angularfire_symbol__analyticsIsSupported",Ks="__angularfire_symbol__remoteConfigIsSupported",ma="__angularfire_symbol__messagingIsSupported";function uc(I,D,x){if(D){if(1===D.length)return D[0];const pe=D.filter(Me=>Me.app===x);if(1===pe.length)return pe[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[iu]||(globalThis[iu]=Is().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[ma]||(globalThis[ma]=Qd().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[Ks]||(globalThis[Ks]=qg().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const xo=(I,D)=>{const x=D?[D]:(0,ee.C6)(),U=[];return x.forEach(K=>{K.container.getProvider(I).instances.forEach(Me=>{U.includes(Me)||U.push(Me)})}),U};function ya(){}class oh{constructor(D,x=vl.N){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,U){const K=this.zone;return this.delegate.schedule(function(Me){K.runGuarded(()=>{D.apply(this,[Me])})},x,U)}}class oi{constructor(D){this.zone=D,this.task=null}call(D,x){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ya,{},ya,ya)),x.pipe((0,pa.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let qr=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new oh(Zone.current)),this.insideAngular=x.run(()=>new oh(Zone.current,En.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Yi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Rr(I){return Yi(),function(I){return function(x){return(x=x.lift(new oi(I.ngZone))).pipe((0,ga.R)(I.outsideAngular),(0,sh.QV)(I.insideAngular))}}(Yi())(I)}},4486:(et,Te,V)=>{"use strict";V.d(Te,{Z:()=>we});var f=V(3854),ee=V(6034),F=V(5452),ce=V(5601);class te{constructor(G,me){this._delegate=G,this.firebase=me,(0,F._addComponent)(G,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=G.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(G){this._delegate.automaticDataCollectionEnabled=G}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(G=>{this._delegate.checkDestroyed(),G()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(G,me=F._DEFAULT_ENTRY_NAME){var ve;this._delegate.checkDestroyed();const he=this._delegate.container.getProvider(G);return!he.isInitialized()&&"EXPLICIT"===(null===(ve=he.getComponent())||void 0===ve?void 0:ve.instantiationMode)&&he.initialize(),he.getImmediate({identifier:me})}_removeServiceInstance(G,me=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(G).clearInstance(me)}_addComponent(G){(0,F._addComponent)(this._delegate,G)}_addOrOverwriteComponent(G){(0,F._addOrOverwriteComponent)(this._delegate,G)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),k=function W(){const de=function(de){const G={},me={__esModule:!0,initializeApp:function(ht,De={}){const ne=F.initializeApp(ht,De);if((0,f.r3)(G,ne.name))return G[ne.name];const oe=new de(ne,me);return G[ne.name]=oe,oe},app:he,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function(ht){const De=ht.name,ne=De.replace("-compat","");if(F._registerComponent(ht)&&"PUBLIC"===ht.type){const oe=(fe=he())=>{if("function"!=typeof fe[ne])throw Ee.create("invalid-app-argument",{appName:De});return fe[ne]()};void 0!==ht.serviceProps&&(0,f.ZB)(oe,ht.serviceProps),me[ne]=oe,de.prototype[ne]=function(...fe){return this._getService.bind(this,De).apply(this,ht.multipleInstances?fe:[])}}return"PUBLIC"===ht.type?me[ne]:null},removeApp:function(ht){delete G[ht]},useAsService:function(ht,De){return"serverAuth"===De?null:De},modularAPIs:F}};function he(ht){if(!(0,f.r3)(G,ht=ht||F._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:ht});return G[ht]}return me.default=me,Object.defineProperty(me,"apps",{get:function(){return Object.keys(G).map(ht=>G[ht])}}),he.App=de,me}(te);return de.INTERNAL=Object.assign(Object.assign({},de.INTERNAL),{createFirebaseNamespace:W,extendNamespace:function(me){(0,f.ZB)(de,me)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),de}(),L=new ce.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){L.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const de=self.firebase.SDK_VERSION;de&&de.indexOf("LITE")>=0&&L.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=k;(0,F.registerVersion)("@firebase/app-compat","0.1.5",undefined)},5452:(et,Te,V)=>{"use strict";V.r(Te),V.d(Te,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>ei,_DEFAULT_ENTRY_NAME:()=>Mn,_addComponent:()=>qt,_addOrOverwriteComponent:()=>jn,_apps:()=>Gt,_clearComponents:()=>Nt,_components:()=>On,_getProvider:()=>dn,_registerComponent:()=>Ur,_removeServiceInstance:()=>at,deleteApp:()=>ji,getApp:()=>Tr,getApps:()=>ti,initializeApp:()=>bi,onLog:()=>In,registerVersion:()=>ni,setLogLevel:()=>pr});var f=V(8239),ee=V(6034),F=V(5601),ce=V(3854);class te{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(Bt=>{if(function(st){const Ne=st.getComponent();return"VERSION"===(null==Ne?void 0:Ne.type)}(Bt)){const Jt=Bt.getImmediate();return`${Jt.library}/${Jt.version}`}return null}).filter(Bt=>Bt).join(" ")}}const Ee="@firebase/app",W=new F.Yd("@firebase/app"),Mn="[DEFAULT]",_t={[Ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gt=new Map,On=new Map;function qt(st,Ne){try{st.container.addComponent(Ne)}catch(Bt){W.debug(`Component ${Ne.name} failed to register with FirebaseApp ${st.name}`,Bt)}}function jn(st,Ne){st.container.addOrOverwriteComponent(Ne)}function Ur(st){const Ne=st.name;if(On.has(Ne))return W.debug(`There were multiple attempts to register component ${Ne}.`),!1;On.set(Ne,st);for(const Bt of Gt.values())qt(Bt,st);return!0}function dn(st,Ne){return st.container.getProvider(Ne)}function at(st,Ne,Bt=Mn){dn(st,Ne).clearInstance(Bt)}function Nt(){On.clear()}const fr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class on{constructor(Ne,Bt,Jt){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},Bt),this._name=Bt.name,this._automaticDataCollectionEnabled=Bt.automaticDataCollectionEnabled,this._container=Jt,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const ei="9.1.3";function bi(st,Ne={}){"object"!=typeof Ne&&(Ne={name:Ne});const Bt=Object.assign({name:Mn,automaticDataCollectionEnabled:!1},Ne),Jt=Bt.name;if("string"!=typeof Jt||!Jt)throw fr.create("bad-app-name",{appName:String(Jt)});const hn=Gt.get(Jt);if(hn){if((0,ce.vZ)(st,hn.options)&&(0,ce.vZ)(Bt,hn.config))return hn;throw fr.create("duplicate-app",{appName:Jt})}const kt=new ee.H0(Jt);for(const Qe of On.values())kt.addComponent(Qe);const Ye=new on(st,Bt,kt);return Gt.set(Jt,Ye),Ye}function Tr(st=Mn){const Ne=Gt.get(st);if(!Ne)throw fr.create("no-app",{appName:st});return Ne}function ti(){return Array.from(Gt.values())}function ji(st){return hs.apply(this,arguments)}function hs(){return(hs=(0,f.Z)(function*(st){const Ne=st.name;Gt.has(Ne)&&(Gt.delete(Ne),yield Promise.all(st.container.getProviders().map(Bt=>Bt.delete())),st.isDeleted=!0)})).apply(this,arguments)}function ni(st,Ne,Bt){var Jt;let hn=null!==(Jt=_t[st])&&void 0!==Jt?Jt:st;Bt&&(hn+=`-${Bt}`);const kt=hn.match(/\s|\//),Ye=Ne.match(/\s|\//);if(kt||Ye){const Qe=[`Unable to register library "${hn}" with version "${Ne}":`];return kt&&Qe.push(`library name "${hn}" contains illegal characters (whitespace or "/")`),kt&&Ye&&Qe.push("and"),Ye&&Qe.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void W.warn(Qe.join(" "))}Ur(new ee.wA(`${hn}-version`,()=>({library:hn,version:Ne}),"VERSION"))}function In(st,Ne){if(null!==st&&"function"!=typeof st)throw fr.create("invalid-log-argument");(0,F.Am)(st,Ne)}function pr(st){(0,F.Ub)(st)}Ur(new ee.wA("platform-logger",Ne=>new te(Ne),"PRIVATE")),ni(Ee,"0.7.4",""),ni(Ee,"0.7.4","esm2017"),ni("fire-js","")},6034:(et,Te,V)=>{"use strict";V.d(Te,{wA:()=>F,H0:()=>le});var f=V(4762),ee=V(3854),F=function(){function W(k,L,Q){this.name=k,this.instanceFactory=L,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return W.prototype.setInstantiationMode=function(k){return this.instantiationMode=k,this},W.prototype.setMultipleInstances=function(k){return this.multipleInstances=k,this},W.prototype.setServiceProps=function(k){return this.serviceProps=k,this},W.prototype.setInstanceCreatedCallback=function(k){return this.onInstanceCreated=k,this},W}(),ce="[DEFAULT]",te=function(){function W(k,L){this.name=k,this.container=L,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return W.prototype.get=function(k){var L=this.normalizeInstanceIdentifier(k);if(!this.instancesDeferred.has(L)){var Q=new ee.BH;if(this.instancesDeferred.set(L,Q),this.isInitialized(L)||this.shouldAutoInitialize())try{var Z=this.getOrInitializeService({instanceIdentifier:L});Z&&Q.resolve(Z)}catch(re){}}return this.instancesDeferred.get(L).promise},W.prototype.getImmediate=function(k){var L,Q=this.normalizeInstanceIdentifier(null==k?void 0:k.identifier),Z=null!==(L=null==k?void 0:k.optional)&&void 0!==L&&L;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Z)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(re){if(Z)return null;throw re}},W.prototype.getComponent=function(){return this.component},W.prototype.setComponent=function(k){var L,Q;if(k.name!==this.name)throw Error("Mismatching Component "+k.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=k,this.shouldAutoInitialize()){if(function(W){return"EAGER"===W.instantiationMode}(k))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(he){}try{for(var Z=(0,f.XA)(this.instancesDeferred.entries()),re=Z.next();!re.done;re=Z.next()){var we=(0,f.CR)(re.value,2),G=we[1],me=this.normalizeInstanceIdentifier(we[0]);try{var ve=this.getOrInitializeService({instanceIdentifier:me});G.resolve(ve)}catch(he){}}}catch(he){L={error:he}}finally{try{re&&!re.done&&(Q=Z.return)&&Q.call(Z)}finally{if(L)throw L.error}}}},W.prototype.clearInstance=function(k){void 0===k&&(k=ce),this.instancesDeferred.delete(k),this.instancesOptions.delete(k),this.instances.delete(k)},W.prototype.delete=function(){return(0,f.mG)(this,void 0,void 0,function(){var k;return(0,f.Jh)(this,function(L){switch(L.label){case 0:return k=Array.from(this.instances.values()),[4,Promise.all((0,f.ev)((0,f.ev)([],(0,f.CR)(k.filter(function(Q){return"INTERNAL"in Q}).map(function(Q){return Q.INTERNAL.delete()}))),(0,f.CR)(k.filter(function(Q){return"_delete"in Q}).map(function(Q){return Q._delete()}))))];case 1:return L.sent(),[2]}})})},W.prototype.isComponentSet=function(){return null!=this.component},W.prototype.isInitialized=function(k){return void 0===k&&(k=ce),this.instances.has(k)},W.prototype.getOptions=function(k){return void 0===k&&(k=ce),this.instancesOptions.get(k)||{}},W.prototype.initialize=function(k){var L,Q;void 0===k&&(k={});var Z=k.options,re=void 0===Z?{}:Z,we=this.normalizeInstanceIdentifier(k.instanceIdentifier);if(this.isInitialized(we))throw Error(this.name+"("+we+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var de=this.getOrInitializeService({instanceIdentifier:we,options:re});try{for(var G=(0,f.XA)(this.instancesDeferred.entries()),me=G.next();!me.done;me=G.next()){var ve=(0,f.CR)(me.value,2),Ce=ve[1];we===this.normalizeInstanceIdentifier(ve[0])&&Ce.resolve(de)}}catch(Le){L={error:Le}}finally{try{me&&!me.done&&(Q=G.return)&&Q.call(G)}finally{if(L)throw L.error}}return de},W.prototype.onInit=function(k,L){var Q,Z=this.normalizeInstanceIdentifier(L),re=null!==(Q=this.onInitCallbacks.get(Z))&&void 0!==Q?Q:new Set;re.add(k),this.onInitCallbacks.set(Z,re);var we=this.instances.get(Z);return we&&k(we,Z),function(){re.delete(k)}},W.prototype.invokeOnInitCallbacks=function(k,L){var Q,Z,re=this.onInitCallbacks.get(L);if(re)try{for(var we=(0,f.XA)(re),de=we.next();!de.done;de=we.next()){var G=de.value;try{G(k,L)}catch(me){}}}catch(me){Q={error:me}}finally{try{de&&!de.done&&(Z=we.return)&&Z.call(we)}finally{if(Q)throw Q.error}}},W.prototype.getOrInitializeService=function(k){var L=k.instanceIdentifier,Q=k.options,Z=void 0===Q?{}:Q,re=this.instances.get(L);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:ie(L),options:Z}),this.instances.set(L,re),this.instancesOptions.set(L,Z),this.invokeOnInitCallbacks(re,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,re)}catch(we){}return re||null},W.prototype.normalizeInstanceIdentifier=function(k){return void 0===k&&(k=ce),this.component?this.component.multipleInstances?k:ce:k},W.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},W}();function ie(W){return W===ce?void 0:W}var le=function(){function W(k){this.name=k,this.providers=new Map}return W.prototype.addComponent=function(k){var L=this.getProvider(k.name);if(L.isComponentSet())throw new Error("Component "+k.name+" has already been registered with "+this.name);L.setComponent(k)},W.prototype.addOrOverwriteComponent=function(k){this.getProvider(k.name).isComponentSet()&&this.providers.delete(k.name),this.addComponent(k)},W.prototype.getProvider=function(k){if(this.providers.has(k))return this.providers.get(k);var L=new te(k,this);return this.providers.set(k,L),L},W.prototype.getProviders=function(){return Array.from(this.providers.values())},W}()},5601:(et,Te,V)=>{"use strict";V.d(Te,{in:()=>ee,Yd:()=>Ee,Ub:()=>le,Am:()=>W});const f=[];var ee=(()=>{return(k=ee||(ee={}))[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT",ee;var k})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ce=ee.INFO,te={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ie=(k,L,...Q)=>{if(L<k.logLevel)return;const Z=(new Date).toISOString(),re=te[L];if(!re)throw new Error(`Attempted to log a message with an invalid logType (value: ${L})`);console[re](`[${Z}]  ${k.name}:`,...Q)};class Ee{constructor(L){this.name=L,this._logLevel=ce,this._logHandler=ie,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(L){if(!(L in ee))throw new TypeError(`Invalid value "${L}" assigned to \`logLevel\``);this._logLevel=L}setLogLevel(L){this._logLevel="string"==typeof L?F[L]:L}get logHandler(){return this._logHandler}set logHandler(L){if("function"!=typeof L)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=L}get userLogHandler(){return this._userLogHandler}set userLogHandler(L){this._userLogHandler=L}debug(...L){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...L),this._logHandler(this,ee.DEBUG,...L)}log(...L){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...L),this._logHandler(this,ee.VERBOSE,...L)}info(...L){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...L),this._logHandler(this,ee.INFO,...L)}warn(...L){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...L),this._logHandler(this,ee.WARN,...L)}error(...L){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...L),this._logHandler(this,ee.ERROR,...L)}}function le(k){f.forEach(L=>{L.setLogLevel(k)})}function W(k,L){for(const Q of f){let Z=null;L&&L.level&&(Z=F[L.level]),Q.userLogHandler=null===k?null:(re,we,...de)=>{const G=de.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch(ve){return null}}).filter(me=>me).join(" ");we>=(null!=Z?Z:re.logLevel)&&k({level:ee[we].toLowerCase(),message:G,args:de,type:re.name})}}}},3854:(et,Te,V)=>{"use strict";V.d(Te,{BH:()=>Z,LL:()=>ge,ZR:()=>Pe,zI:()=>oe,US:()=>ie,tV:()=>W,$s:()=>Ii,r3:()=>dn,Sg:()=>re,ne:()=>ji,vZ:()=>fr,ZB:()=>L,pd:()=>Tr,m9:()=>ho,z$:()=>we,jU:()=>me,ru:()=>ve,d:()=>Ce,xb:()=>Nt,w1:()=>Fe,hl:()=>De,uI:()=>de,UG:()=>G,b$:()=>he,G6:()=>ht,Mn:()=>Le,xO:()=>ei,zd:()=>bi,eu:()=>ne});const ce=function($){const H=[];let j=0;for(let Ae=0;Ae<$.length;Ae++){let se=$.charCodeAt(Ae);se<128?H[j++]=se:se<2048?(H[j++]=se>>6|192,H[j++]=63&se|128):55296==(64512&se)&&Ae+1<$.length&&56320==(64512&$.charCodeAt(Ae+1))?(se=65536+((1023&se)<<10)+(1023&$.charCodeAt(++Ae)),H[j++]=se>>18|240,H[j++]=se>>12&63|128,H[j++]=se>>6&63|128,H[j++]=63&se|128):(H[j++]=se>>12|224,H[j++]=se>>6&63|128,H[j++]=63&se|128)}return H},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,H){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let se=0;se<$.length;se+=3){const qe=$[se],$e=se+1<$.length,Ft=$e?$[se+1]:0,Xt=se+2<$.length,Yt=Xt?$[se+2]:0;let en=(15&Ft)<<2|Yt>>6,Jn=63&Yt;Xt||(Jn=64,$e||(en=64)),Ae.push(j[qe>>2],j[(3&qe)<<4|Ft>>4],j[en],j[Jn])}return Ae.join("")},encodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa($):this.encodeByteArray(ce($),H)},decodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?atob($):function($){const H=[];let j=0,Ae=0;for(;j<$.length;){const se=$[j++];if(se<128)H[Ae++]=String.fromCharCode(se);else if(se>191&&se<224){const qe=$[j++];H[Ae++]=String.fromCharCode((31&se)<<6|63&qe)}else if(se>239&&se<365){const Xt=((7&se)<<18|(63&$[j++])<<12|(63&$[j++])<<6|63&$[j++])-65536;H[Ae++]=String.fromCharCode(55296+(Xt>>10)),H[Ae++]=String.fromCharCode(56320+(1023&Xt))}else{const qe=$[j++],$e=$[j++];H[Ae++]=String.fromCharCode((15&se)<<12|(63&qe)<<6|63&$e)}}return H.join("")}(this.decodeStringToByteArray($,H))},decodeStringToByteArray($,H){this.init_();const j=H?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let se=0;se<$.length;){const qe=j[$.charAt(se++)],Ft=se<$.length?j[$.charAt(se)]:0;++se;const Yt=se<$.length?j[$.charAt(se)]:64;++se;const Dt=se<$.length?j[$.charAt(se)]:64;if(++se,null==qe||null==Ft||null==Yt||null==Dt)throw Error();Ae.push(qe<<2|Ft>>4),64!==Yt&&(Ae.push(Ft<<4&240|Yt>>2),64!==Dt&&Ae.push(Yt<<6&192|Dt))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},le=function($){return function($){const H=ce($);return ie.encodeByteArray(H,!0)}($).replace(/\./g,"")},W=function($){try{return ie.decodeString($,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function L($,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return H}for(const j in H)!H.hasOwnProperty(j)||!Q(j)||($[j]=L($[j],H[j]));return $}function Q($){return"__proto__"!==$}class Z{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,j)=>{this.resolve=H,this.reject=j})}wrapCallback(H){return(j,Ae)=>{j?this.reject(j):this.resolve(Ae),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(j):H(j,Ae))}}}function re($,H){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=H||"demo-project",se=$.iat||0,qe=$.sub||$.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $e=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:se,exp:se+3600,auth_time:se,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},$);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify($e)),""].join(".")}function we(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function G(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function me(){return"object"==typeof self&&self.self===self}function ve(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function he(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return we().indexOf("Electron/")>=0}function Fe(){const $=we();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Le(){return we().indexOf("MSAppHost/")>=0}function ht(){return!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function De(){return"object"==typeof indexedDB}function ne(){return new Promise(($,H)=>{try{let j=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(Ae);se.onsuccess=()=>{se.result.close(),j||self.indexedDB.deleteDatabase(Ae),$(!0)},se.onupgradeneeded=()=>{j=!1},se.onerror=()=>{var qe;H((null===(qe=se.error)||void 0===qe?void 0:qe.message)||"")}}catch(j){H(j)}})}function oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Pe extends Error{constructor(H,j,Ae){super(j),this.code=H,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}}class ge{constructor(H,j,Ae){this.service=H,this.serviceName=j,this.errors=Ae}create(H,...j){const Ae=j[0]||{},se=`${this.service}/${H}`,qe=this.errors[H],$e=qe?function($,H){return $.replace(Ut,(j,Ae)=>{const se=H[Ae];return null!=se?String(se):`<${Ae}?>`})}(qe,Ae):"Error";return new Pe(se,`${this.serviceName}: ${$e} (${se}).`,Ae)}}const Ut=/\{\$([^}]+)}/g;function dn($,H){return Object.prototype.hasOwnProperty.call($,H)}function Nt($){for(const H in $)if(Object.prototype.hasOwnProperty.call($,H))return!1;return!0}function fr($,H){if($===H)return!0;const j=Object.keys($),Ae=Object.keys(H);for(const se of j){if(!Ae.includes(se))return!1;const qe=$[se],$e=H[se];if(on(qe)&&on($e)){if(!fr(qe,$e))return!1}else if(qe!==$e)return!1}for(const se of Ae)if(!j.includes(se))return!1;return!0}function on($){return null!==$&&"object"==typeof $}function ei($){const H=[];for(const[j,Ae]of Object.entries($))Array.isArray(Ae)?Ae.forEach(se=>{H.push(encodeURIComponent(j)+"="+encodeURIComponent(se))}):H.push(encodeURIComponent(j)+"="+encodeURIComponent(Ae));return H.length?"&"+H.join("&"):""}function bi($){const H={};return $.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[se,qe]=Ae.split("=");H[decodeURIComponent(se)]=decodeURIComponent(qe)}}),H}function Tr($){const H=$.indexOf("?");if(!H)return"";const j=$.indexOf("#",H);return $.substring(H,j>0?j:void 0)}function ji($,H){const j=new hs($,H);return j.subscribe.bind(j)}class hs{constructor(H,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{H(this)}).catch(Ae=>{this.error(Ae)})}next(H){this.forEachObserver(j=>{j.next(H)})}error(H){this.forEachObserver(j=>{j.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,j,Ae){let se;if(void 0===H&&void 0===j&&void 0===Ae)throw new Error("Missing Observer.");se=function($,H){if("object"!=typeof $||null===$)return!1;for(const j of["next","error","complete"])if(j in $&&"function"==typeof $[j])return!0;return!1}(H)?H:{next:H,error:j,complete:Ae},void 0===se.next&&(se.next=pr),void 0===se.error&&(se.error=pr),void 0===se.complete&&(se.complete=pr);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch($e){}}),this.observers.push(se),qe}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,H)}sendOne(H,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{j(this.observers[H])}catch(Ae){"undefined"!=typeof console&&console.error&&console.error(Ae)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pr(){}function Ii($,H=1e3,j=2){const Ae=H*Math.pow(j,$),se=Math.round(.5*Ae*(Math.random()-.5)*2);return Math.min(144e5,Ae+se)}function ho($){return $&&$._delegate?$._delegate:$}},2329:(et,Te,V)=>{"use strict";V.d(Te,{Mq:()=>f.getApp,C6:()=>f.getApps});var f=V(5452);(0,f.registerVersion)("firebase","9.1.3","app")},7841:(et,Te,V)=>{"use strict";V.d(Te,{Z:()=>f.Z});var f=V(4486);f.Z.registerVersion("firebase","9.1.3","app-compat")},4671:(et,Te,V)=>{"use strict";V.r(Te);var f=V(8239),ee=V(4486),F=V(3854),ce=V(5452),te=V(4762),ie=V(5601),Ee=V(6034);const we=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},de=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},G=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new ie.Yd("@firebase/auth");function he(_,...h){ve.logLevel<=ie.in.ERROR&&ve.error(`Auth (${ce.SDK_VERSION}): ${_}`,...h)}function Ce(_,...h){throw ht(_,...h)}function Fe(_,...h){return ht(_,...h)}function Le(_,h,g){const w=Object.assign(Object.assign({},de()),{[h]:g});return new F.LL("auth","Firebase",w).create(h,{appName:_.name})}function yt(_,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Ce(_,"argument-error"),Le(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ht(_,...h){if("string"!=typeof _){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(g,...w)}return G.create(_,...h)}function De(_,h,...g){if(!_)throw ht(h,...g)}function ne(_){const h="INTERNAL ASSERTION FAILED: "+_;throw he(h),new Error(h)}function oe(_,h){_||ne(h)}const fe=new Map;function ue(_){oe(_ instanceof Function,"Expected a class definition");let h=fe.get(_);return h?(oe(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,fe.set(_,h),h)}function tt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Ut(){return"http:"===Mn()||"https:"===Mn()}function Mn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class On{constructor(h,g){this.shortDelay=h,this.longDelay=g,oe(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ut()||(0,F.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function qt(_,h){oe(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class jn{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ne("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ne("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ne("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ur={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},dn=new On(3e4,6e4);function at(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function Nt(_,h,g,w){return co.apply(this,arguments)}function co(){return(co=(0,f.Z)(function*(_,h,g,w,A={}){return fr(_,A,()=>{let M={},z={};w&&("GET"===h?z=w:M={body:JSON.stringify(w)});const _e=(0,F.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Ue=new(jn.headers());return Ue.set("Content-Type","application/json"),Ue.set("X-Client-Version",_._getSdkClientVersion()),_.languageCode&&Ue.set("X-Firebase-Locale",_.languageCode),jn.fetch()(Tr(_,_.config.apiHost,g,_e),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},M))})})).apply(this,arguments)}function fr(_,h,g){return on.apply(this,arguments)}function on(){return(on=(0,f.Z)(function*(_,h,g){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},Ur),h);try{const A=new ti(_),M=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const z=yield M.json();if("needConfirmation"in z)throw ji(_,"account-exists-with-different-credential",z);if(M.ok&&!("errorMessage"in z))return z;{const _e=M.ok?z.errorMessage:z.error.message,[Ue,ze]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw ji(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ue)throw ji(_,"email-already-in-use",z);const lt=w[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(ze)throw Le(_,lt,ze);Ce(_,lt)}}catch(A){if(A instanceof F.ZR)throw A;Ce(_,"network-request-failed")}})).apply(this,arguments)}function ei(_,h,g,w){return bi.apply(this,arguments)}function bi(){return(bi=(0,f.Z)(function*(_,h,g,w,A={}){const M=yield Nt(_,h,g,w,A);return"mfaPendingCredential"in M&&Ce(_,"multi-factor-auth-required",{serverResponse:M}),M})).apply(this,arguments)}function Tr(_,h,g,w){const A=`${h}${g}?${w}`;return _.config.emulator?qt(_.config,A):`${_.config.apiScheme}://${A}`}class ti{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Fe(this.auth,"timeout")),dn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ji(_,h,g){const w={appName:_.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=Fe(_,h,w);return A.customData._tokenResponse=g,A}function ni(){return(ni=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function In(_,h){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function lo(_,h){return st.apply(this,arguments)}function st(){return(st=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ne(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function hn(){return(hn=(0,f.Z)(function*(_,h=!1){const g=(0,F.m9)(_),w=yield g.getIdToken(h),A=Ye(w);De(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const M="object"==typeof A.firebase?A.firebase:void 0,z=null==M?void 0:M.sign_in_provider;return{claims:A,token:w,authTime:Ne(kt(A.auth_time)),issuedAtTime:Ne(kt(A.iat)),expirationTime:Ne(kt(A.exp)),signInProvider:z||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function kt(_){return 1e3*Number(_)}function Ye(_){const[h,g,w]=_.split(".");if(void 0===h||void 0===g||void 0===w)return he("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(g);return A?JSON.parse(A):(he("Failed to decode base64 JWT payload"),null)}catch(A){return he("Caught error parsing JWT payload as JSON",A),null}}function _n(_,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,f.Z)(function*(_,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof F.ZR&&Ii(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function Ii({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class fn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&h.schedule(!0))}h.schedule()})()}}class Ar{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ne(this.lastLoginAt),this.creationTime=Ne(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ho(_){return $.apply(this,arguments)}function $(){return($=(0,f.Z)(function*(_){var h;const g=_.auth,w=yield _.getIdToken(),A=yield _n(_,lo(g,{idToken:w}));De(null==A?void 0:A.users.length,g,"internal-error");const M=A.users[0];_._notifyReloadListener(M);const z=(null===(h=M.providerUserInfo)||void 0===h?void 0:h.length)?se(M.providerUserInfo):[],_e=Ae(_.providerData,z),lt=!!_.isAnonymous&&!(_.email&&M.passwordHash||(null==_e?void 0:_e.length)),ot={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:_e,metadata:new Ar(M.createdAt,M.lastLoginAt),isAnonymous:lt};Object.assign(_,ot)})).apply(this,arguments)}function j(){return(j=(0,f.Z)(function*(_){const h=(0,F.m9)(_);yield ho(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ae(_,h){return[..._.filter(w=>!h.some(A=>A.providerId===w.providerId)),...h]}function se(_){return _.map(h=>{var{providerId:g}=h,w=(0,te._T)(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function $e(){return($e=(0,f.Z)(function*(_,h){const g=yield fr(_,{},()=>{const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:M}=_.config,z=Tr(_,A,"/v1/token",`key=${M}`);return jn.fetch()(z,{method:"POST",headers:{"X-Client-Version":_._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:w})});return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ft{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){De(h.idToken,"internal-error"),De(void 0!==h.idToken,"internal-error"),De(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(_){const h=Ye(_);return De(h,"internal-error"),De(void 0!==h.exp,"internal-error"),De(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,f.Z)(function*(){return De(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:M,expiresIn:z}=yield function(_,h){return $e.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(A,M,Number(z))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:A,expirationTime:M}=g,z=new Ft;return w&&(De("string"==typeof w,"internal-error",{appName:h}),z.refreshToken=w),A&&(De("string"==typeof A,"internal-error",{appName:h}),z.accessToken=A),M&&(De("number"==typeof M,"internal-error",{appName:h}),z.expirationTime=M),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ft,this.toJSON())}_performRefresh(){return ne("not implemented")}}function Xt(_,h){De("string"==typeof _||void 0===_,"internal-error",{appName:h})}class Yt{constructor(h){var{uid:g,auth:w,stsTokenManager:A}=h,M=(0,te._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new fn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.metadata=new Ar(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const w=yield _n(g,g.stsTokenManager.getToken(g.auth,h));return De(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function(_){return hn.apply(this,arguments)}(this,h)}reload(){return function(_){return j.apply(this,arguments)}(this)}_assign(h){this!==h&&(De(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Yt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,f.Z)(function*(){let A=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),A=!0),g&&(yield ho(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield _n(h,function(_,h){return ni.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,A,M,z,_e,Ue,ze,lt;const ot=null!==(w=g.displayName)&&void 0!==w?w:void 0,An=null!==(A=g.email)&&void 0!==A?A:void 0,li=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,Yn=null!==(z=g.photoURL)&&void 0!==z?z:void 0,sp=null!==(_e=g.tenantId)&&void 0!==_e?_e:void 0,op=null!==(Ue=g._redirectEventId)&&void 0!==Ue?Ue:void 0,Ec=null!==(ze=g.createdAt)&&void 0!==ze?ze:void 0,ap=null!==(lt=g.lastLoginAt)&&void 0!==lt?lt:void 0,{uid:wm,emailVerified:up,isAnonymous:bm,providerData:cp,stsTokenManager:Im}=g;De(wm&&Im,h,"internal-error");const wc=Ft.fromJSON(this.name,Im);De("string"==typeof wm,h,"internal-error"),Xt(ot,h.name),Xt(An,h.name),De("boolean"==typeof up,h,"internal-error"),De("boolean"==typeof bm,h,"internal-error"),Xt(li,h.name),Xt(Yn,h.name),Xt(sp,h.name),Xt(op,h.name),Xt(Ec,h.name),Xt(ap,h.name);const es=new Yt({uid:wm,auth:h,email:An,emailVerified:up,displayName:ot,isAnonymous:bm,photoURL:Yn,phoneNumber:li,tenantId:sp,stsTokenManager:wc,createdAt:Ec,lastLoginAt:ap});return cp&&Array.isArray(cp)&&(es.providerData=cp.map(qb=>Object.assign({},qb))),op&&(es._redirectEventId=op),es}static _fromIdTokenResponse(h,g,w=!1){return(0,f.Z)(function*(){const A=new Ft;A.updateFromServerResponse(g);const M=new Yt({uid:g.localId,auth:h,stsTokenManager:A,isAnonymous:w});return yield ho(M),M})()}}const Dt=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,f.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,f.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,f.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return _.type="NONE",_})();function en(_,h,g){return`firebase:${_}:${h}:${g}`}class Jn{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:A,name:M}=this.auth;this.fullUserKey=en(this.userKey,A.apiKey,M),this.fullPersistenceKey=en("persistence",A.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Yt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,f.Z)(function*(){if(!g.length)return new Jn(ue(Dt),h,w);const A=(yield Promise.all(g.map(function(){var ze=(0,f.Z)(function*(lt){if(yield lt._isAvailable())return lt});return function(lt){return ze.apply(this,arguments)}}()))).filter(ze=>ze);let M=A[0]||ue(Dt);const z=en(w,h.config.apiKey,h.name);let _e=null;for(const ze of g)try{const lt=yield ze._get(z);if(lt){const ot=Yt._fromJSON(h,lt);ze!==M&&(_e=ot),M=ze;break}}catch(lt){}const Ue=A.filter(ze=>ze._shouldAllowMigration);return M._shouldAllowMigration&&Ue.length?(M=Ue[0],_e&&(yield M._set(z,_e.toJSON())),yield Promise.all(g.map(function(){var ze=(0,f.Z)(function*(lt){if(lt!==M)try{yield lt._remove(z)}catch(ot){}});return function(lt){return ze.apply(this,arguments)}}())),new Jn(M,h,w)):new Jn(M,h,w)})()}}function Lu(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Vu(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Go(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ba(h))return"Blackberry";if(Ls(h))return"Webos";if(el(h))return"Safari";if((h.includes("chrome/")||Ua(h))&&!h.includes("edge/"))return"Chrome";if(Fs(h))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Go(_=(0,F.z$)()){return/firefox\//i.test(_)}function el(_=(0,F.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ua(_=(0,F.z$)()){return/crios\//i.test(_)}function Vu(_=(0,F.z$)()){return/iemobile/i.test(_)}function Fs(_=(0,F.z$)()){return/android/i.test(_)}function Ba(_=(0,F.z$)()){return/blackberry/i.test(_)}function Ls(_=(0,F.z$)()){return/webos/i.test(_)}function Ci(_=(0,F.z$)()){return/iphone|ipad|ipod/i.test(_)}function ps(_=(0,F.z$)()){return Ci(_)||Fs(_)||Ls(_)||Ba(_)||/windows phone/i.test(_)||Vu(_)}function $n(_,h=[]){let g;switch(_){case"Browser":g=Lu((0,F.z$)());break;case"Worker":g=`${Lu((0,F.z$)())}-${_}`;break;default:g=_}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ce.SDK_VERSION}/${w}`}class Ud{constructor(h,g){this.app=h,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Be(this),this.idTokenSubscription=new Be(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=ue(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A;w._deleted||(w.persistenceManager=yield Jn.create(w,h),!w._deleted&&((null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)&&(yield w._popupRedirectResolver._initialize(w)),yield w.initializeCurrentUser(g),!w._deleted&&(w._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var w;let A=yield g.assertedPersistence.getCurrentUser();if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const M=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,z=null==A?void 0:A._redirectEventId,_e=yield g.tryRedirectSignIn(h);(!M||M===z)&&(null==_e?void 0:_e.user)&&(A=_e.user)}return A?A._redirectEventId?(De(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(A){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield ho(h)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const w=h?(0,F.m9)(h):null;return w&&De(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){if(!g._deleted)return h&&De(g.tenantId===h.tenantId,g,"tenant-id-mismatch"),g.queue((0,f.Z)(function*(){yield g.directlySetCurrentUser(h),g.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ue(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new F.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,f.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&ue(h)||g._popupRedirectResolver;De(w,g,"argument-error"),g.redirectPersistenceManager=yield Jn.create(g,[ue(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,A){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return De(z,this,"internal-error"),z.then(()=>M(this.currentUser)),"function"==typeof g?h.addObserver(g,w,A):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=$n(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function jt(_){return(0,F.m9)(_)}class Be{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function tn(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function gs(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class er{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return ne("not implemented")}_getIdTokenResponse(h){return ne("not implemented")}_linkToIdToken(h,g){return ne("not implemented")}_getReauthenticationResolver(h){return ne("not implemented")}}function pn(_,h){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:resetPassword",at(_,h))})).apply(this,arguments)}function qo(_,h){return gt.apply(this,arguments)}function gt(){return(gt=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Bu(_,h){return ms.apply(this,arguments)}function ms(){return(ms=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:update",at(_,h))})).apply(this,arguments)}function Di(){return(Di=(0,f.Z)(function*(_,h){return ei(_,"POST","/v1/accounts:signInWithPassword",at(_,h))})).apply(this,arguments)}function Hn(_,h){return po.apply(this,arguments)}function po(){return(po=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:sendOobCode",at(_,h))})).apply(this,arguments)}function Vs(_,h){return jr.apply(this,arguments)}function jr(){return(jr=(0,f.Z)(function*(_,h){return Hn(_,h)})).apply(this,arguments)}function Wt(_,h){return go.apply(this,arguments)}function go(){return(go=(0,f.Z)(function*(_,h){return Hn(_,h)})).apply(this,arguments)}function Bd(_,h){return ja.apply(this,arguments)}function ja(){return(ja=(0,f.Z)(function*(_,h){return Hn(_,h)})).apply(this,arguments)}function jd(_,h){return $a.apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(_,h){return Hn(_,h)})).apply(this,arguments)}function Bs(){return(Bs=(0,f.Z)(function*(_,h){return ei(_,"POST","/v1/accounts:signInWithEmailLink",at(_,h))})).apply(this,arguments)}function nl(){return(nl=(0,f.Z)(function*(_,h){return ei(_,"POST","/v1/accounts:signInWithEmailLink",at(_,h))})).apply(this,arguments)}class $r extends er{constructor(h,g,w,A=null){super("password",w),this._email=h,this._password=g,this._tenantId=A}static _fromEmailAndPassword(h,g){return new $r(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new $r(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function(_,h){return Di.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(_,h){return Bs.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Ce(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,f.Z)(function*(){switch(w.signInMethod){case"password":return qo(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(_,h){return nl.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:Ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function $t(_,h){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,f.Z)(function*(_,h){return ei(_,"POST","/v1/accounts:signInWithIdp",at(_,h))})).apply(this,arguments)}class Hr extends er{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Hr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A}=g,M=(0,te._T)(g,["providerId","signInMethod"]);if(!w||!A)return null;const z=new Hr(w,A);return z.idToken=M.idToken||void 0,z.accessToken=M.accessToken||void 0,z.secret=M.secret,z.nonce=M.nonce,z.pendingToken=M.pendingToken||null,z}_getIdTokenResponse(h){return $t(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,$t(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,$t(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,F.xO)(g)}return h}}function Ti(_,h){return rl.apply(this,arguments)}function rl(){return(rl=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:sendVerificationCode",at(_,h))})).apply(this,arguments)}function Wo(){return(Wo=(0,f.Z)(function*(_,h){return ei(_,"POST","/v1/accounts:signInWithPhoneNumber",at(_,h))})).apply(this,arguments)}function $d(){return($d=(0,f.Z)(function*(_,h){const g=yield ei(_,"POST","/v1/accounts:signInWithPhoneNumber",at(_,h));if(g.temporaryProof)throw ji(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Mf={USER_NOT_FOUND:"user-not-found"};function Hd(){return(Hd=(0,f.Z)(function*(_,h){return ei(_,"POST","/v1/accounts:signInWithPhoneNumber",at(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Mf)})).apply(this,arguments)}class zo extends er{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new zo({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new zo({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function(_,h){return Wo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function(_,h){return $d.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(_,h){return Hd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:M}=h;return w||g||A||M?new zo({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:M}):null}}class Zo{constructor(h){var g,w,A,M,z,_e;const Ue=(0,F.zd)((0,F.pd)(h)),ze=null!==(g=Ue.apiKey)&&void 0!==g?g:null,lt=null!==(w=Ue.oobCode)&&void 0!==w?w:null,ot=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);De(ze&&lt&&ot,"argument-error"),this.apiKey=ze,this.operation=ot,this.code=lt,this.continueUrl=null!==(M=Ue.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(z=Ue.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(_e=Ue.tenantId)&&void 0!==_e?_e:null}static parseLink(h){const g=function(_){const h=(0,F.zd)((0,F.pd)(_)).link,g=h?(0,F.zd)((0,F.pd)(h)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(_)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||g||h||_}(h);try{return new Zo(g)}catch(w){return null}}}let $u=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,w){return $r._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=Zo.parseLink(w);return De(A,"argument-error"),$r._fromEmailAndCode(g,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class yo{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ga extends yo{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class js extends Ga{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return De("providerId"in g&&"signInMethod"in g,"argument-error"),Hr._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return De(h.idToken||h.accessToken,"argument-error"),Hr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return js.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return js.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:M,nonce:z,providerId:_e}=h;if(!w&&!A&&!g&&!M||!_e)return null;try{return new js(_e)._credential({idToken:g,accessToken:w,nonce:z,pendingToken:M})}catch(Ue){return null}}}let il=(()=>{class _ extends Ga{constructor(){super("facebook.com")}static credential(g){return Hr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Hu=(()=>{class _ extends Ga{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Hr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return _.credential(w,A)}catch(M){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),sl=(()=>{class _ extends Ga{constructor(){super("github.com")}static credential(g){return Hr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ko extends er{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return $t(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,$t(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,$t(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A,pendingToken:M}=g;return w&&A&&M&&w===A?new Ko(w,M):null}static _create(h,g){return new Ko(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Ai=(()=>{class _ extends Ga{constructor(){super("twitter.com")}static credential(g,w){return Hr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return _.credential(w,A)}catch(M){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function ol(_,h){return _o.apply(this,arguments)}function _o(){return(_o=(0,f.Z)(function*(_,h){return ei(_,"POST","/v1/accounts:signUp",at(_,h))})).apply(this,arguments)}class Si{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,A=!1){return(0,f.Z)(function*(){const M=yield Yt._fromIdTokenResponse(h,w,A),z=Gd(w);return new Si({user:M,providerId:z,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const A=Gd(w);return new Si({user:h,providerId:A,_tokenResponse:w,operationType:g})})()}}function Gd(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function vo(){return(vo=(0,f.Z)(function*(_){var h;const g=jt(_);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new Si({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield ol(g,{returnSecureToken:!0}),A=yield Si._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Gu extends F.ZR{constructor(h,g,w,A){var M;super(g.code,g.message),this.operationType=w,this.user=A,this.name="FirebaseError",Object.setPrototypeOf(this,Gu.prototype),this.appName=h.name,this.code=g.code,this.tenantId=null!==(M=h.tenantId)&&void 0!==M?M:void 0,this.serverResponse=g.customData.serverResponse}static _fromErrorAndOperation(h,g,w,A){return new Gu(h,g,w,A)}}function qa(_,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Gu._fromErrorAndOperation(_,M,h,w):M})}function qd(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function Yo(){return(Yo=(0,f.Z)(function*(_,h){const g=(0,F.m9)(_);yield $i(!0,g,h);const{providerUserInfo:w}=yield In(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),A=qd(w||[]);return g.providerData=g.providerData.filter(M=>A.has(M.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Qo(_,h){return $s.apply(this,arguments)}function $s(){return($s=(0,f.Z)(function*(_,h,g=!1){const w=yield _n(_,h._linkToIdToken(_.auth,yield _.getIdToken()),g);return Si._forOperation(_,"link",w)})).apply(this,arguments)}function $i(_,h,g){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,f.Z)(function*(_,h,g){yield ho(h);const A=!1===_?"provider-already-linked":"no-such-provider";De(qd(h.providerData).has(g)===_,h.auth,A)})).apply(this,arguments)}function Jo(_,h){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(_,h,g=!1){const{auth:w}=_,A="reauthenticate";try{const M=yield _n(_,qa(w,A,h,_),g);De(M.idToken,w,"internal-error");const z=Ye(M.idToken);De(z,w,"internal-error");const{sub:_e}=z;return De(_.uid===_e,w,"user-mismatch"),Si._forOperation(_,A,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Ce(w,"user-mismatch"),M}})).apply(this,arguments)}function qu(_,h){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(_,h,g=!1){const w="signIn",A=yield qa(_,w,h),M=yield Si._fromIdTokenResponse(_,w,A);return g||(yield _._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Wu(_,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(_,h){return qu(jt(_),h)})).apply(this,arguments)}function Wd(_,h){return zu.apply(this,arguments)}function zu(){return(zu=(0,f.Z)(function*(_,h){const g=(0,F.m9)(_);return yield $i(!1,g,h.providerId),Qo(g,h)})).apply(this,arguments)}function Wa(_,h){return mr.apply(this,arguments)}function mr(){return(mr=(0,f.Z)(function*(_,h){return Jo((0,F.m9)(_),h)})).apply(this,arguments)}function Pf(_,h){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,f.Z)(function*(_,h){return ei(_,"POST","/v1/accounts:signInWithCustomToken",at(_,h))})).apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(_,h){const g=jt(_),w=yield Pf(g,{token:h,returnSecureToken:!0}),A=yield Si._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class bo{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?ea._fromServerResponse(h,g):Ce(h,"internal-error")}}class ea extends bo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new ea(g)}}function za(_,h,g){var w;De((null===(w=g.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),De(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(De(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(De(g.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function ta(){return(ta=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_),A={requestType:"PASSWORD_RESET",email:h};g&&za(w,A,g),yield Wt(w,A)})).apply(this,arguments)}function ut(){return(ut=(0,f.Z)(function*(_,h,g){yield pn((0,F.m9)(_),{oobCode:h,newPassword:g})})).apply(this,arguments)}function ys(){return(ys=(0,f.Z)(function*(_,h){yield Bu((0,F.m9)(_),{oobCode:h})})).apply(this,arguments)}function na(_,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,f.Z)(function*(_,h){const g=(0,F.m9)(_),w=yield pn(g,{oobCode:h}),A=w.requestType;switch(De(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(w.mfaInfo,g,"internal-error");default:De(w.email,g,"internal-error")}let M=null;return w.mfaInfo&&(M=bo._fromServerResponse(jt(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:M},operation:A}})).apply(this,arguments)}function _s(){return(_s=(0,f.Z)(function*(_,h){const{data:g}=yield na((0,F.m9)(_),h);return g.email})).apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(_,h,g){const w=jt(_),A=yield ol(w,{returnSecureToken:!0,email:h,password:g}),M=yield Si._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(M.user),M})).apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_),A={requestType:"EMAIL_SIGNIN",email:h};De(g.handleCodeInApp,w,"argument-error"),g&&za(w,A,g),yield Bd(w,A)})).apply(this,arguments)}function ri(){return(ri=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_),A=$u.credentialWithLink(h,g||tt());return De(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Wu(w,A)})).apply(this,arguments)}function Za(_,h){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:createAuthUri",at(_,h))})).apply(this,arguments)}function Ku(){return(Ku=(0,f.Z)(function*(_,h){const w={identifier:h,continueUri:Ut()?tt():"http://localhost"},{signinMethods:A}=yield Za((0,F.m9)(_),w);return A||[]})).apply(this,arguments)}function Gi(){return(Gi=(0,f.Z)(function*(_,h){const g=(0,F.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&za(g.auth,A,h);const{email:M}=yield Vs(g.auth,A);M!==_.email&&(yield _.reload())})).apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};g&&za(w.auth,M,g);const{email:z}=yield jd(w.auth,M);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function Yu(_,h){return qi.apply(this,arguments)}function qi(){return(qi=(0,f.Z)(function*(_,h){return Nt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ka(){return(Ka=(0,f.Z)(function*(_,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,F.m9)(_),M={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},z=yield _n(w,Yu(w.auth,M));w.displayName=z.displayName||null,w.photoURL=z.photoUrl||null;const _e=w.providerData.find(({providerId:Ue})=>"password"===Ue);_e&&(_e.displayName=w.displayName,_e.photoURL=w.photoURL),yield w._updateTokensIfNecessary(z)})).apply(this,arguments)}function Ya(_,h,g){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(_,h,g){const{auth:w}=_,M={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(M.email=h),g&&(M.password=g);const z=yield _n(_,qo(w,M));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Co{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class ll extends Co{constructor(h,g,w,A){super(h,g,w),this.username=A}}class kf extends Co{constructor(h,g){super(h,"facebook.com",g)}}class Qd extends ll{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Do extends Co{constructor(h,g){super(h,"google.com",g)}}class Jd extends ll{constructor(h,g,w){super(h,"twitter.com",g,w)}}function Ju(_){const{user:h,_tokenResponse:g}=_;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(_){var h,g;if(!_)return null;const{providerId:w}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},M=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&(null==_?void 0:_.idToken)){const z=null===(g=null===(h=Ye(_.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Co(M,"anonymous"!==z&&"custom"!==z?z:null)}if(!w)return null;switch(w){case"facebook.com":return new kf(M,A);case"github.com":return new Qd(M,A);case"google.com":return new Do(M,A);case"twitter.com":return new Jd(M,A,_.screenName||null);case"custom":case"anonymous":return new Co(M,null);default:return new Co(M,w,A)}}(g)}class Es{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new Es("enroll",h)}static _fromMfaPendingCredential(h){return new Es("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Es._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(w=h.multiFactorSession)||void 0===w?void 0:w.idToken)return Es._fromIdtoken(h.multiFactorSession.idToken)}return null}}class dl{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=jt(h),A=(g.serverResponse.mfaInfo||[]).map(z=>bo._fromServerResponse(w,z));De(g.serverResponse.mfaPendingCredential,w,"internal-error");const M=Es._fromMfaPendingCredential(g.serverResponse.mfaPendingCredential);return new dl(M,A,function(){var z=(0,f.Z)(function*(_e){const Ue=yield _e._process(w,M);delete g.serverResponse.mfaInfo,delete g.serverResponse.mfaPendingCredential;const ze=Object.assign(Object.assign({},g.serverResponse),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(g.operationType){case"signIn":const lt=yield Si._fromIdTokenResponse(w,g.operationType,ze);return yield w._updateCurrentUser(lt.user),lt;case"reauthenticate":return De(g.user,w,"internal-error"),Si._forOperation(g.user,g.operationType,ze);default:Ce(w,"internal-error")}});return function(_e){return z.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function eh(_,h){return Nt(_,"POST","/v2/accounts/mfaEnrollment:start",at(_,h))}class oa{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>bo._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new oa(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Es._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var w=this;return(0,f.Z)(function*(){const A=h,M=yield w.getSession(),z=yield _n(w.user,A._process(w.user.auth,M,g));return yield w.user._updateTokensIfNecessary(z),w.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const w="string"==typeof h?h:h.uid,A=yield g.user.getIdToken(),M=yield _n(g.user,function(_,h){return Nt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",at(_,h))}(g.user.auth,{idToken:A,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==w),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const aa=new WeakMap,To="__sak";class pl{constructor(h,g){this.storage=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(To,"1"),this.storage.removeItem(To),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}}const Xu=(()=>{class _ extends pl{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,F.z$)();return el(_)||Ci(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=ps(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),M=this.localCache[w];A!==M&&g(w,M,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((_e,Ue,ze)=>{this.notifyListeners(_e,ze)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(A);if(g.newValue!==_e)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const M=()=>{const _e=this.storage.getItem(A);!w&&this.localCache[A]===_e||this.notifyListeners(A,_e)},z=this.storage.getItem(A);(0,F.w1)()&&10===document.documentMode&&z!==g.newValue&&g.newValue!==g.oldValue?setTimeout(M,10):M()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const M of Array.from(A))M(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,M=this;return(0,f.Z)(function*(){yield A().call(M,g,w),M.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,f.Z)(function*(){const M=yield w().call(A,g);return A.localCache[g]=JSON.stringify(M),M})()}_remove(g){var w=()=>super._remove,A=this;return(0,f.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return _.type="LOCAL",_})(),ws=(()=>{class _ extends pl{constructor(){super(window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return _.type="SESSION",_})();let Ws=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(M=>M.isListeningto(g));if(w)return w;const A=new _(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,f.Z)(function*(){const A=g,{eventId:M,eventType:z,data:_e}=A.data,Ue=w.handlersMap[z];if(!(null==Ue?void 0:Ue.size))return;A.ports[0].postMessage({status:"ack",eventId:M,eventType:z});const ze=Array.from(Ue).map(function(){var ot=(0,f.Z)(function*(An){return An(A.origin,_e)});return function(An){return ot.apply(this,arguments)}}()),lt=yield function(_){return Promise.all(_.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}(ze);A.ports[0].postMessage({status:"done",eventId:M,eventType:z,response:lt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Ja(_="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return _+g}class Zg{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var A=this;return(0,f.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let z,_e;return new Promise((Ue,ze)=>{const lt=Ja("",20);M.port1.start();const ot=setTimeout(()=>{ze(new Error("unsupported_event"))},w);_e={messageChannel:M,onMessage(An){const li=An;if(li.data.eventId===lt)switch(li.data.status){case"ack":clearTimeout(ot),z=setTimeout(()=>{ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ue(li.data.response);break;default:clearTimeout(ot),clearTimeout(z),ze(new Error("invalid_response"))}}},A.handlers.add(_e),M.port1.addEventListener("message",_e.onMessage),A.target.postMessage({eventType:h,eventId:lt,data:g},[M.port2])}).finally(()=>{_e&&A.removeMessageHandler(_e)})})()}}function cn(){return window}function ec(){return void 0!==cn().WorkerGlobalScope&&"function"==typeof cn().importScripts}function tc(){return(tc=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const nh="firebaseLocalStorageDb",ru="firebaseLocalStorage",ua="fbase_key";class rc{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ca(_,h){return _.transaction([ru],h?"readwrite":"readonly").objectStore(ru)}function Xe(){const _=indexedDB.open(nh,1);return new Promise((h,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(ru,{keyPath:ua})}catch(A){g(A)}}),_.addEventListener("success",(0,f.Z)(function*(){const w=_.result;w.objectStoreNames.contains(ru)?h(w):(w.close(),yield function(){const _=indexedDB.deleteDatabase(nh);return new rc(_).toPromise()}(),h(yield Xe()))}))})}function zi(_,h,g){return bs.apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(_,h,g){const w=ca(_,!0).put({[ua]:h,value:g});return new rc(w).toPromise()})).apply(this,arguments)}function Ao(){return(Ao=(0,f.Z)(function*(_,h){const g=ca(_,!1).get(h),w=yield new rc(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function zs(_,h){const g=ca(_,!0).delete(h);return new rc(g).toPromise()}const la=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Xe()),g.db})()}_withRetries(g){var w=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const M=yield w._openDb();return yield g(M)}catch(M){if(A++>3)throw M;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return ec()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=Ws._getInstance(ec()?self:null),g.receiver._subscribe("keyChanged",function(){var w=(0,f.Z)(function*(A,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(A,M){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,f.Z)(function*(A,M){return["keyChanged"]});return function(A,M){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function(){return tc.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Zg(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(w=M[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=M[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,f.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Xe();return yield zi(g,To,"1"),yield zs(g,To),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,f.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(M=>zi(M,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,f.Z)(function*(){const A=yield w._withRetries(M=>function(_,h){return Ao.apply(this,arguments)}(M,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,f.Z)(function*(){return w._withPendingWrite((0,f.Z)(function*(){return yield w._withRetries(A=>zs(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const w=yield g._withRetries(z=>{const _e=ca(z,!1).getAll();return new rc(_e).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],M=new Set;for(const{fbase_key:z,value:_e}of w)M.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(_e)&&(g.notifyListeners(z,_e),A.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!M.has(z)&&(g.notifyListeners(z,null),A.push(z));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const M of Array.from(A))M(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function ii(_,h){return Nt(_,"POST","/v2/accounts/mfaSignIn:start",at(_,h))}function ic(){return(ic=(0,f.Z)(function*(_){return(yield Nt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ha(_){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=h,w.onerror=A=>{const M=Fe("internal-error");M.customData=A,g(M)},w.type="text/javascript",w.charset="UTF-8",function(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(w)})}function sc(_){return`__${_}${Math.floor(1e6*Math.random())}`}const si=1e12;class oc{constructor(h){this.auth=h,this.counter=si,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new ac(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||si;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||si))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var w;return null===(w=g._widgets.get(h||si))||void 0===w||w.execute(),""})()}}class ac{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;De(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}();const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Is=sc("rcb"),Zs=new On(3e4,6e4);class Cs{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!cn().grecaptcha}load(h,g=""){return De((_=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(cn().grecaptcha):new Promise((w,A)=>{const M=cn().setTimeout(()=>{A(Fe(h,"network-request-failed"))},Zs.get());cn()[Is]=()=>{cn().clearTimeout(M),delete cn()[Is];const _e=cn().grecaptcha;if(!_e)return void A(Fe(h,"internal-error"));const Ue=_e.render;_e.render=(ze,lt)=>{const ot=Ue(ze,lt);return this.counter++,ot},this.hostLanguage=g,w(_e)},ha(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Is,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),A(Fe(h,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!cn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fa{load(h){return(0,f.Z)(function*(){return new oc(h)})()}clearedOneInstance(){}}const Bf="recaptcha",Yg={theme:"light",type:"image"};class _l{constructor(h,g=Object.assign({},Yg),w){this.parameters=g,this.type=Bf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jt(w),this.isInvisible="invisible"===this.parameters.size,De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;De(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fa:new Cs,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(M=>{const z=_e=>{!_e||(h.tokenChangeListeners.delete(z),M(_e))};h.tokenChangeListeners.add(z),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=cn()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){De(Ut()&&!ec(),h.auth,"internal-error"),yield function(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function(_){return ic.apply(this,arguments)}(h.auth);De(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vl{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=zo._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function pa(){return(pa=(0,f.Z)(function*(_,h,g){const w=jt(_),A=yield iu(w,h,(0,F.m9)(g));return new vl(A,M=>Wu(w,M))})).apply(this,arguments)}function sh(){return(sh=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_);yield $i(!1,w,"phone");const A=yield iu(w.auth,h,(0,F.m9)(g));return new vl(A,M=>Wd(w,M))})).apply(this,arguments)}function xi(){return(xi=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_),A=yield iu(w.auth,h,(0,F.m9)(g));return new vl(A,M=>Wa(w,M))})).apply(this,arguments)}function iu(_,h,g){return El.apply(this,arguments)}function El(){return(El=(0,f.Z)(function*(_,h,g){var w;const A=yield g.verify();try{let M;if(De("string"==typeof A,_,"argument-error"),De(g.type===Bf,_,"argument-error"),M="string"==typeof h?{phoneNumber:h}:h,"session"in M){const z=M.session;if("phoneNumber"in M)return De("enroll"===z.type,_,"internal-error"),(yield eh(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{De("signin"===z.type,_,"internal-error");const _e=(null===(w=M.multiFactorHint)||void 0===w?void 0:w.uid)||M.multiFactorUid;return De(_e,_,"missing-multi-factor-info"),(yield ii(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Ti(_,{phoneNumber:M.phoneNumber,recaptchaToken:A});return z}}finally{g._reset()}})).apply(this,arguments)}function wl(){return(wl=(0,f.Z)(function*(_,h){yield Qo((0,F.m9)(_),h)})).apply(this,arguments)}let ma=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=jt(g)}verifyPhoneNumber(g,w){return iu(this.auth,g,(0,F.m9)(w))}static credential(g,w){return zo._fromVerification(g,w)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?zo._fromTokenResponse(w,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function wn(_,h){return h?ue(h):(De(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ki extends er{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return $t(h,this._buildIdpRequest())}_linkToIdToken(h,g){return $t(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return $t(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function jf(_){return qu(_.auth,new Ki(_),_.bypassAuthState)}function Ln(_){const{auth:h,user:g}=_;return De(g,h,"internal-error"),Jo(g,new Ki(_),_.bypassAuthState)}function uc(_){return xo.apply(this,arguments)}function xo(){return(xo=(0,f.Z)(function*(_){const{auth:h,user:g}=_;return De(g,h,"internal-error"),Qo(g,new Ki(_),_.bypassAuthState)})).apply(this,arguments)}class ya{constructor(h,g,w,A,M=!1){this.auth=h,this.resolver=w,this.user=A,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(w,A){h.pendingPromise={resolve:w,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(M){h.reject(M)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:M,tenantId:z,error:_e,type:Ue}=h;if(_e)return void g.reject(_e);const ze={auth:g.auth,requestUri:w,sessionId:A,tenantId:z||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ue)(ze))}catch(lt){g.reject(lt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return jf;case"linkViaPopup":case"linkViaRedirect":return uc;case"reauthViaPopup":case"reauthViaRedirect":return Ln;default:Ce(this.auth,"internal-error")}}resolve(h){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oh=new On(2e3,1e4);function qr(){return(qr=(0,f.Z)(function*(_,h,g){const w=jt(_);yt(_,h,yo);const A=wn(w,g);return new Ys(w,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Ds(){return(Ds=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_);yt(w.auth,h,yo);const A=wn(w.auth,g);return new Ys(w.auth,"reauthViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}function bl(){return(bl=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_);yt(w.auth,h,yo);const A=wn(w.auth,g);return new Ys(w.auth,"linkViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}let Ys=(()=>{class _ extends ya{constructor(g,w,A,M,z){super(g,w,M,z),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const w=yield g.execute();return De(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,f.Z)(function*(){oe(1===g.filter.length,"Popup operations only handle one event");const w=Ja();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Fe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,oh.get())};g()}}return _.currentPopupAction=null,_})();const ah=new Map;class $f extends ya{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let w=ah.get(g.auth._key());if(!w){try{const M=(yield function(_,h){return I.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(M)}catch(A){w=()=>Promise.reject(A)}ah.set(g.auth._key(),w)}return w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const A=yield w.auth._redirectUserForId(h.eventId);if(A)return w.user=A,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function I(){return(I=(0,f.Z)(function*(_,h){const g=pe(h),w="true"===(yield K(_)._get(g));return yield K(_)._remove(g),w})).apply(this,arguments)}function D(_,h){return x.apply(this,arguments)}function x(){return(x=(0,f.Z)(function*(_,h){return K(_)._set(pe(h),"true")})).apply(this,arguments)}function K(_){return ue(_._redirectPersistence)}function pe(_){return en("pendingRedirect",_.config.apiKey,_.name)}function Ge(){return(Ge=(0,f.Z)(function*(_,h,g){const w=jt(_);yt(_,h,yo);const A=wn(w,g);return yield D(A,w),A._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function Zn(){return(Zn=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_);yt(w.auth,h,yo);const A=wn(w.auth,g);yield D(A,w.auth);const M=yield It(w);return A._openRedirect(w.auth,h,"reauthViaRedirect",M)})).apply(this,arguments)}function Qi(){return(Qi=(0,f.Z)(function*(_,h,g){const w=(0,F.m9)(_);yt(w.auth,h,yo);const A=wn(w.auth,g);yield $i(!1,w,h.providerId),yield D(A,w.auth);const M=yield It(w);return A._openRedirect(w.auth,h,"linkViaRedirect",M)})).apply(this,arguments)}function ai(){return(ai=(0,f.Z)(function*(_,h){return yield jt(_)._initializationPromise,Ji(_,h,!1)})).apply(this,arguments)}function Ji(_,h){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(_,h,g=!1){const w=jt(_),A=wn(w,h),z=yield new $f(w,A,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield w._persistUserIfCurrent(z.user),yield w._setRedirectUser(null,h)),z})).apply(this,arguments)}function It(_){return Il.apply(this,arguments)}function Il(){return(Il=(0,f.Z)(function*(_){const h=Ja(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class Dl{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ou(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!ou(h)){const A=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Fe(this.auth,A))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_a(h))}saveEventToCache(h){this.cachedEventUids.add(_a(h)),this.lastProcessedEventTime=Date.now()}}function _a(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function ou({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Pn(_){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(_,h={}){return Nt(_,"GET","/v1/projects",h)})).apply(this,arguments)}const Z_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,va=/^https?/;function Jg(){return(Jg=(0,f.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Pn(_);for(const g of h)try{if(ir(g))return}catch(w){}Ce(_,"unauthorized-domain")})).apply(this,arguments)}function ir(_){const h=tt(),{protocol:g,hostname:w}=new URL(h);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===w?"chrome-extension:"===g&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===w}if(!va.test(g))return!1;if(Z_.test(_))return w===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const As=new On(3e4,6e4);function K_(){const _=cn().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let Ri=null;function Tl(_){return Ri=Ri||function(_){return new Promise((h,g)=>{var w,A,M;function z(){K_(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{K_(),g(Fe(_,"network-request-failed"))},timeout:As.get()})}if(null===(A=null===(w=cn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(M=cn().gapi)||void 0===M?void 0:M.load)){const _e=sc("iframefcb");return cn()[_e]=()=>{gapi.load?z():g(Fe(_,"network-request-failed"))},ha(`https://apis.google.com/js/api.js?onload=${_e}`)}z()}}).catch(h=>{throw Ri=null,h})}(_),Ri}const Ea=new On(5e3,15e3),uh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Al=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sl(_){const h=_.config;De(h.authDomain,_,"auth-domain-config-required");const g=h.emulator?qt(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:_.name,v:ce.SDK_VERSION},A=Al.get(_.config.apiHost);A&&(w.eid=A);const M=_._getFrameworks();return M.length&&(w.fw=M.join(",")),`${g}?${(0,F.xO)(w).slice(1)}`}function At(){return(At=(0,f.Z)(function*(_){const h=yield Tl(_),g=cn().gapi;return De(g,_,"internal-error"),h.open({where:document.body,url:Sl(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uh,dontclear:!0},w=>new Promise(function(){var A=(0,f.Z)(function*(M,z){yield w.restyle({setHideOnLeave:!1});const _e=Fe(_,"network-request-failed"),Ue=cn().setTimeout(()=>{z(_e)},Ea.get());function ze(){cn().clearTimeout(Ue),M(w)}w.ping(ze).then(ze,()=>{z(_e)})});return function(M,z){return A.apply(this,arguments)}}()))})).apply(this,arguments)}const Qs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gf{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function No(_,h,g,w,A,M){De(_.config.authDomain,_,"auth-domain-config-required"),De(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:w,v:ce.SDK_VERSION,eventId:A};if(h instanceof yo){h.setDefaultLanguage(_.languageCode),z.providerId=h.providerId||"",(0,F.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,ze]of Object.entries(M||{}))z[Ue]=ze}if(h instanceof Ga){const Ue=h.getScopes().filter(ze=>""!==ze);Ue.length>0&&(z.scopes=Ue.join(","))}_.tenantId&&(z.tid=_.tenantId);const _e=z;for(const Ue of Object.keys(_e))void 0===_e[Ue]&&delete _e[Ue];return`${function({config:_}){return _.emulator?qt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,F.xO)(_e).slice(1)}`}const Js="webStorageSupport";class dc extends class{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return ne("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new dc(h)}_finalizeEnroll(h,g,w){return function(_,h){return Nt(_,"POST","/v2/accounts/mfaEnrollment:finalize",at(_,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function(_,h){return Nt(_,"POST","/v2/accounts/mfaSignIn:finalize",at(_,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zf=(()=>{class _{constructor(){}static assertion(g){return dc._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var _,Zf="@firebase/auth";class nm{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{var A;h((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function lu(){return window}function Mi(){return(Mi=(0,f.Z)(function*(_,h,g){var w;const{BuildInfo:A}=lu();oe(h.sessionId,"AuthEvent did not contain a session ID");const M=yield om(h.sessionId),z={};return Ci()?z.ibi=A.packageName:Fs()?z.apn=A.packageName:Ce(_,"operation-not-supported-in-this-environment"),A.displayName&&(z.appDisplayName=A.displayName),z.sessionId=M,No(_,g,h.type,void 0,null!==(w=h.eventId)&&void 0!==w?w:void 0,z)})).apply(this,arguments)}function wa(){return(wa=(0,f.Z)(function*(_){const{BuildInfo:h}=lu(),g={};Ci()?g.iosBundleId=h.packageName:Fs()?g.androidPackageName=h.packageName:Ce(_,"operation-not-supported-in-this-environment"),yield Pn(_,g)})).apply(this,arguments)}function Yf(){return(Yf=(0,f.Z)(function*(_,h,g){const{cordova:w}=lu();let A=()=>{};try{yield new Promise((M,z)=>{let _e=null;function Ue(){var ot;M();const An=null===(ot=w.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof An&&An(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function ze(){_e||(_e=window.setTimeout(()=>{z(Fe(_,"redirect-cancelled-by-user"))},2e3))}function lt(){"visible"===(null==document?void 0:document.visibilityState)&&ze()}h.addPassiveListener(Ue),document.addEventListener("resume",ze,!1),Fs()&&document.addEventListener("visibilitychange",lt,!1),A=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",ze,!1),document.removeEventListener("visibilitychange",lt,!1),_e&&window.clearTimeout(_e)}})}finally{A()}})).apply(this,arguments)}function om(_){return hh.apply(this,arguments)}function hh(){return(hh=(0,f.Z)(function*(_){const h=fh(_),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function fh(_){if(oe(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),g=new Uint8Array(h);for(let w=0;w<_.length;w++)g[w]=_.charCodeAt(w);return g}_="Browser",(0,ce._registerComponent)(new Ee.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),{apiKey:A,authDomain:M}=w.options;return(z=>{De(A&&!A.includes(":"),"invalid-api-key",{appName:z.name}),De(!(null==M?void 0:M.includes(":")),"argument-error",{appName:z.name});const _e={apiKey:A,authDomain:M,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$n(_)},Ue=new Ud(z,_e);return function(_,h){const g=(null==h?void 0:h.persistence)||[],w=(Array.isArray(g)?g:[g]).map(ue);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(w,null==h?void 0:h.popupRedirectResolver)}(Ue,g),Ue})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new Ee.wA("auth-internal",h=>{const g=jt(h.getProvider("auth").getImmediate());return new nm(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Zf,"0.18.3",void 0),(0,ce.registerVersion)(Zf,"0.18.3","esm2017");class Qf extends Dl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function ph(_){return du.apply(this,arguments)}function du(){return(du=(0,f.Z)(function*(_){const h=yield hu()._get(gh(_));return h&&(yield hu()._remove(gh(_))),h})).apply(this,arguments)}function Ss(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*h.length);_.push(h.charAt(w))}return _.join("")}function hu(){return ue(Xu)}function gh(_){return en("authEvent",_.config.apiKey,_.name)}function fu(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...g]=_.split("?");return(0,F.zd)(g.join("?"))}function yh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fe("no-auth-event")}}function Pl(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function fm(_=(0,F.z$)()){return!("file:"!==Pl()&&"ionic:"!==Pl()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function vh(){try{const _=self.localStorage,h=Ja();if(_)return _.setItem(h,"1"),_.removeItem(h),!function(_=(0,F.z$)()){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,F.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,F.hl)()}catch(_){return ep()&&(0,F.hl)()}return!1}function ep(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function mn(){return("http:"===Pl()||"https:"===Pl()||(0,F.ru)()||fm())&&!((0,F.b$)()||(0,F.UG)())&&vh()&&!ep()}function gm(){return fm()&&"undefined"!=typeof document}function Xi(){return(Xi=(0,f.Z)(function*(){return!!gm()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const ci={LOCAL:"local",NONE:"none",SESSION:"session"},xs=De,mm="persistence";function np(_){return rp.apply(this,arguments)}function rp(){return(rp=(0,f.Z)(function*(_){yield _._initializationPromise;const h=Fl(),g=en(mm,_.config.apiKey,_.name);(null==h?void 0:h.sessionStorage)&&h.sessionStorage.setItem(g,_._getPersistence())})).apply(this,arguments)}function Fl(){return"undefined"!=typeof window?window:null}const pc=De;class Cn{constructor(){this.browserResolver=ue(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ws,this._completeRedirectFn=Ji}_openPopup(h,g,w,A){var M=this;return(0,f.Z)(function*(){var z;oe(null===(z=M.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const _e=No(h,g,w,tt(),A);return function(_,h,g,w=500,A=600){const M=Math.max((window.screen.availHeight-A)/2,0).toString(),z=Math.max((window.screen.availWidth-w)/2,0).toString();let _e="";const Ue=Object.assign(Object.assign({},Qs),{width:w.toString(),height:A.toString(),top:M,left:z}),ze=(0,F.z$)().toLowerCase();g&&(_e=Ua(ze)?"_blank":g),Go(ze)&&(h=h||"http://localhost",Ue.scrollbars="yes");const lt=Object.entries(Ue).reduce((An,[li,Yn])=>`${An}${li}=${Yn},`,"");if(function(_=(0,F.z$)()){var h;return Ci(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(ze)&&"_self"!==_e)return function(_,h){const g=document.createElement("a");g.href=_,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",_e),new Gf(null);const ot=window.open(h||"",_e,lt);De(ot,_,"popup-blocked");try{ot.focus()}catch(An){}return new Gf(ot)}(h,_e,Ja())})()}_openRedirect(h,g,w,A){var M=this;return(0,f.Z)(function*(){return yield M._originValidation(h),_=No(h,g,w,tt(),A),cn().location.href=_,new Promise(()=>{});var _})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:A,promise:M}=this.eventManagers[g];return A?Promise.resolve(A):(oe(M,"If manager is not set, promise should be"),M)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const w=yield function(_){return At.apply(this,arguments)}(h),A=new Dl(h);return w.register("authEvent",M=>(De(null==M?void 0:M.authEvent,h,"invalid-auth-event"),{status:A.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:A},g.iframes[h._key()]=w,A})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Js,{type:Js},A=>{var M;const z=null===(M=null==A?void 0:A[0])||void 0===M?void 0:M[Js];void 0!==z&&g(!!z),Ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return Jg.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return ps()||el()||Ci()}}),this.cordovaResolver=ue(class{constructor(){this._redirectPersistence=ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ji}_initialize(h){var g=this;return(0,f.Z)(function*(){const w=h._key();let A=g.eventManagers.get(w);return A||(A=new Qf(h),g.eventManagers.set(w,A),g.attachCallbackListeners(h,A)),A})()}_openPopup(h){Ce(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,w,A){var M=this;return(0,f.Z)(function*(){!function(_){var h,g,w,A,M,z,_e,Ue,ze,lt;const ot=lu();De("function"==typeof(null===(h=null==ot?void 0:ot.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(void 0!==(null===(g=null==ot?void 0:ot.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De("function"==typeof(null===(M=null===(A=null===(w=null==ot?void 0:ot.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===M?void 0:M.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(Ue=null===(_e=null===(z=null==ot?void 0:ot.cordova)||void 0===z?void 0:z.plugins)||void 0===_e?void 0:_e.browsertab)||void 0===Ue?void 0:Ue.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(lt=null===(ze=null==ot?void 0:ot.cordova)||void 0===ze?void 0:ze.InAppBrowser)||void 0===lt?void 0:lt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield M._initialize(h);yield z.initialized(),z.resetRedirect(),ah.clear(),yield M._originValidation(h);const _e=function(_,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Ss(),postBody:null,tenantId:_.tenantId,error:Fe(_,"no-auth-event")}}(h,w,A);yield function(_,h){return hu()._set(gh(_),h)}(h,_e);const Ue=yield function(_,h,g){return Mi.apply(this,arguments)}(h,_e,g),ze=yield function(_){const{cordova:h}=lu();return new Promise(g=>{h.plugins.browsertab.isAvailable(w=>{let A=null;w?h.plugins.browsertab.openUrl(_):A=h.InAppBrowser.open(_,function(_=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(A)})})}(Ue);return function(_,h,g){return Yf.apply(this,arguments)}(h,z,ze)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return wa.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:w,handleOpenURL:A,BuildInfo:M}=lu(),z=setTimeout((0,f.Z)(function*(){yield ph(h),g.onEvent(yh())}),500),_e=function(){var lt=(0,f.Z)(function*(ot){clearTimeout(z);const An=yield ph(h);let li=null;An&&(null==ot?void 0:ot.url)&&(li=function(_,h){var g,w;const A=function(_){const h=fu(_),g=h.link?decodeURIComponent(h.link):void 0,w=fu(g).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return fu(A).link||A||w||g||_}(h);if(A.includes("/__/auth/callback")){const M=fu(A),z=M.firebaseError?function(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(M.firebaseError)):null,_e=null===(w=null===(g=null==z?void 0:z.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Ue=_e?Fe(_e):null;return Ue?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:A,postBody:null}}return null}(An,ot.url)),g.onEvent(li||yh())});return function(An){return lt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,_e);const Ue=A,ze=`${M.packageName.toLowerCase()}://`;lu().handleOpenURL=function(){var lt=(0,f.Z)(function*(ot){if(ot.toLowerCase().startsWith(ze)&&_e({url:ot}),"function"==typeof Ue)try{Ue(ot)}catch(An){console.error(An)}});return function(ot){return lt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ws,this._completeRedirectFn=Ji}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,w,A){var M=this;return(0,f.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(h,g,w,A)})()}_openRedirect(h,g,w,A){var M=this;return(0,f.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(h,g,w,A)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return gm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function(){return Xi.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function wh(_){return _.unwrap()}function bh(_){return pu(_)}function pu(_){const{_tokenResponse:h}=_ instanceof F.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof F.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ma.credentialFromResult(_);const g=h.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=Hu;break;case"facebook.com":w=il;break;case"github.com":w=sl;break;case"twitter.com":w=Ai;break;default:const{oauthIdToken:A,oauthAccessToken:M,oauthTokenSecret:z,pendingToken:_e,nonce:Ue}=h;return M||z||A||_e?_e?g.startsWith("saml.")?Ko._create(g,_e):Hr._fromParams({providerId:g,signInMethod:g,pendingToken:_e,idToken:A,accessToken:M}):new js(g).credential({idToken:A,accessToken:M,rawNonce:Ue}):null}return _ instanceof F.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function vr(_,h){return h.catch(g=>{throw g instanceof F.ZR&&function(_,h){var g;const w=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new _m(_,function(_,h){var g;const w=(0,F.m9)(_),A=h;return De(h.operationType,w,"argument-error"),De(null===(g=A.serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),dl._fromError(w,A)}(_,h));else if(w){const A=pu(h),M=h;A&&(M.credential=A,M.tenantId=w.tenantId||void 0,M.email=w.email||void 0,M.phoneNumber=w.phoneNumber||void 0)}}(_,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:bh(g),additionalUserInfo:Ju(g),user:Ro.getOrCreate(A)}})}function gc(_,h){return mc.apply(this,arguments)}function mc(){return(mc=(0,f.Z)(function*(_,h){const g=yield h;return{verificationId:g.verificationId,confirm:w=>vr(_,g.confirm(w))}})).apply(this,arguments)}class _m{constructor(h,g){this.resolver=g,this.auth=function(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return vr(wh(this.auth),this.resolver.resolveSignIn(h))}}class Ro{constructor(h){this._delegate=h,this.multiFactor=function(_){const h=(0,F.m9)(_);return aa.has(h)||aa.set(h,oa._fromUser(h)),aa.get(h)}(h)}static getOrCreate(h){return Ro.USER_MAP.has(h)||Ro.USER_MAP.set(h,new Ro(h)),Ro.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return vr(g.auth,Wd(g._delegate,h))})()}linkWithPhoneNumber(h,g){var w=this;return(0,f.Z)(function*(){return gc(w.auth,function(_,h,g){return sh.apply(this,arguments)}(w._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return vr(g.auth,function(_,h,g){return bl.apply(this,arguments)}(g._delegate,h,Cn))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield np(jt(g.auth)),function(_,h,g){return function(_,h,g){return Qi.apply(this,arguments)}(_,h,g)}(g._delegate,h,Cn)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return vr(g.auth,Wa(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return gc(this.auth,function(_,h,g){return xi.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return vr(this.auth,function(_,h,g){return Ds.apply(this,arguments)}(this._delegate,h,Cn))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield np(jt(g.auth)),function(_,h,g){return function(_,h,g){return Zn.apply(this,arguments)}(_,h,g)}(g._delegate,h,Cn)})()}sendEmailVerification(h){return function(_,h){return Gi.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function(_,h){return Yo.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function(_,h){return Ya((0,F.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function(_,h){return Ya((0,F.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(_,h){return wl.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(_,h){return Ka.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function(_,h,g){return Nr.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ro.USER_MAP=new WeakMap;const yc=De;let vm=(()=>{class _{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;yc(A,"invalid-api-key",{appName:g.name});let M=[Dt];if("undefined"!=typeof window){M=function(_,h){const g=Fl();if(!(null==g?void 0:g.sessionStorage))return[];const w=en(mm,_,h);switch(g.sessionStorage.getItem(w)){case ci.NONE:return[Dt];case ci.LOCAL:return[la,ws];case ci.SESSION:return[ws];default:return[]}}(A,g.name);for(const _e of[la,Xu,ws])M.includes(_e)||M.push(_e)}yc(A,"invalid-api-key",{appName:g.name});const z="undefined"!=typeof window?Cn:void 0;this._delegate=w.initialize({options:{persistence:M,popupRedirectResolver:z}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ro.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function(_,h,g){const w=jt(_);De(w._canInitEmulator,w,"emulator-config-failed"),De(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),M=tn(h),{host:z,port:_e}=function(_){const h=tn(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const M=A[1];return{host:M,port:gs(w.substr(M.length+1))}}{const[M,z]=w.split(":");return{host:M,port:gs(z)}}}(h);w.config.emulator={url:`${M}//${z}${null===_e?"":`:${_e}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:z,port:_e,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function(){function _(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,w)}applyActionCode(g){return function(_,h){return ys.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return na(this._delegate,g)}confirmPasswordReset(g,w){return function(_,h,g){return ut.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var A=this;return(0,f.Z)(function*(){return vr(A._delegate,function(_,h,g){return Se.apply(this,arguments)}(A._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(_,h){return Ku.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(_,h){const g=Zo.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){yc(mn(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function(_,h){return ai.apply(this,arguments)}(g._delegate,Cn);return w?vr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(_,h){jt(_)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,w,A){const{next:M,error:z,complete:_e}=_c(g,w,A);return this._delegate.onAuthStateChanged(M,z,_e)}onIdTokenChanged(g,w,A){const{next:M,error:z,complete:_e}=_c(g,w,A);return this._delegate.onIdTokenChanged(M,z,_e)}sendSignInLinkToEmail(g,w){return function(_,h,g){return vn.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function(_,h,g){return ta.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,f.Z)(function*(){let A;switch(function(_,h){xs(Object.values(ci).includes(h),_,"invalid-persistence-type"),(0,F.b$)()?xs(h!==ci.SESSION,_,"unsupported-persistence-type"):(0,F.UG)()?xs(h===ci.NONE,_,"unsupported-persistence-type"):ep()?xs(h===ci.NONE||h===ci.LOCAL&&(0,F.hl)(),_,"unsupported-persistence-type"):xs(h===ci.NONE||vh(),_,"unsupported-persistence-type")}(w._delegate,g),g){case ci.SESSION:A=ws;break;case ci.LOCAL:A=(yield ue(la)._isAvailable())?la:Xu;break;case ci.NONE:A=Dt;break;default:return Ce("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return vr(this._delegate,function(_){return vo.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return vr(this._delegate,Wu(this._delegate,g))}signInWithCustomToken(g){return vr(this._delegate,function(_,h){return qn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return vr(this._delegate,function(_,h,g){return Wu((0,F.m9)(_),$u.credential(h,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return vr(this._delegate,function(_,h,g){return ri.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return gc(this._delegate,function(_,h,g){return pa.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,f.Z)(function*(){return yc(mn(),w._delegate,"operation-not-supported-in-this-environment"),vr(w._delegate,function(_,h,g){return qr.apply(this,arguments)}(w._delegate,g,Cn))})()}signInWithRedirect(g){var w=this;return(0,f.Z)(function*(){return yc(mn(),w._delegate,"operation-not-supported-in-this-environment"),yield np(w._delegate),function(_,h,g){return function(_,h,g){return Ge.apply(this,arguments)}(_,h,g)}(w._delegate,g,Cn)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(_,h){return _s.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=ci,_})();function _c(_,h,g){let w=_;"function"!=typeof _&&({next:w,error:h,complete:g}=_);const A=w;return{next:z=>A(z&&Ro.getOrCreate(z)),error:h,complete:g}}class Ih{constructor(){this.providerId="phone",this._delegate=new ma(wh(ee.Z.auth()))}static credential(h,g){return ma.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Ih.PHONE_SIGN_IN_METHOD=ma.PHONE_SIGN_IN_METHOD,Ih.PROVIDER_ID=ma.PROVIDER_ID;const Em=De;class Ll{constructor(h,g,w=ee.Z.app()){var A;Em(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new _l(h,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new Ee.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),w=h.getProvider("auth");return new vm(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:$u,FacebookAuthProvider:il,GithubAuthProvider:sl,GoogleAuthProvider:Hu,OAuthProvider:js,PhoneAuthProvider:Ih,PhoneMultiFactorGenerator:zf,RecaptchaVerifier:Ll,TwitterAuthProvider:Ai,Auth:vm,AuthCredential:er,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.1.6")}(ee.Z)},6676:function(et,Te){!function(V){"use strict";function f(G){return Array.prototype.slice.call(G)}function ee(G){return new Promise(function(me,ve){G.onsuccess=function(){me(G.result)},G.onerror=function(){ve(G.error)}})}function F(G,me,ve){var he,Ce=new Promise(function(Fe,Le){ee(he=G[me].apply(G,ve)).then(Fe,Le)});return Ce.request=he,Ce}function ce(G,me,ve){var he=F(G,me,ve);return he.then(function(Ce){if(Ce)return new k(Ce,he.request)})}function te(G,me,ve){ve.forEach(function(he){Object.defineProperty(G.prototype,he,{get:function(){return this[me][he]},set:function(Ce){this[me][he]=Ce}})})}function ie(G,me,ve,he){he.forEach(function(Ce){Ce in ve.prototype&&(G.prototype[Ce]=function(){return F(this[me],Ce,arguments)})})}function Ee(G,me,ve,he){he.forEach(function(Ce){Ce in ve.prototype&&(G.prototype[Ce]=function(){return this[me][Ce].apply(this[me],arguments)})})}function le(G,me,ve,he){he.forEach(function(Ce){Ce in ve.prototype&&(G.prototype[Ce]=function(){return ce(this[me],Ce,arguments)})})}function W(G){this._index=G}function k(G,me){this._cursor=G,this._request=me}function L(G){this._store=G}function Q(G){this._tx=G,this.complete=new Promise(function(me,ve){G.oncomplete=function(){me()},G.onerror=function(){ve(G.error)},G.onabort=function(){ve(G.error)}})}function Z(G,me,ve){this._db=G,this.oldVersion=me,this.transaction=new Q(ve)}function re(G){this._db=G}te(W,"_index",["name","keyPath","multiEntry","unique"]),ie(W,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),le(W,"_index",IDBIndex,["openCursor","openKeyCursor"]),te(k,"_cursor",["direction","key","primaryKey","value"]),ie(k,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(G){G in IDBCursor.prototype&&(k.prototype[G]=function(){var me=this,ve=arguments;return Promise.resolve().then(function(){return me._cursor[G].apply(me._cursor,ve),ee(me._request).then(function(he){if(he)return new k(he,me._request)})})})}),L.prototype.createIndex=function(){return new W(this._store.createIndex.apply(this._store,arguments))},L.prototype.index=function(){return new W(this._store.index.apply(this._store,arguments))},te(L,"_store",["name","keyPath","indexNames","autoIncrement"]),ie(L,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),le(L,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Ee(L,"_store",IDBObjectStore,["deleteIndex"]),Q.prototype.objectStore=function(){return new L(this._tx.objectStore.apply(this._tx,arguments))},te(Q,"_tx",["objectStoreNames","mode"]),Ee(Q,"_tx",IDBTransaction,["abort"]),Z.prototype.createObjectStore=function(){return new L(this._db.createObjectStore.apply(this._db,arguments))},te(Z,"_db",["name","version","objectStoreNames"]),Ee(Z,"_db",IDBDatabase,["deleteObjectStore","close"]),re.prototype.transaction=function(){return new Q(this._db.transaction.apply(this._db,arguments))},te(re,"_db",["name","version","objectStoreNames"]),Ee(re,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(G){[L,W].forEach(function(me){G in me.prototype&&(me.prototype[G.replace("open","iterate")]=function(){var ve=f(arguments),he=ve[ve.length-1],Ce=this._store||this._index,Fe=Ce[G].apply(Ce,ve.slice(0,-1));Fe.onsuccess=function(){he(Fe.result)}})})}),[W,L].forEach(function(G){G.prototype.getAll||(G.prototype.getAll=function(me,ve){var he=this,Ce=[];return new Promise(function(Fe){he.iterateCursor(me,function(Le){Le?(Ce.push(Le.value),void 0===ve||Ce.length!=ve?Le.continue():Fe(Ce)):Fe(Ce)})})})}),V.openDb=function(G,me,ve){var he=F(indexedDB,"open",[G,me]),Ce=he.request;return Ce&&(Ce.onupgradeneeded=function(Fe){ve&&ve(new Z(Ce.result,Fe.oldVersion,Ce.transaction))}),he.then(function(Fe){return new re(Fe)})},V.deleteDb=function(G){return F(indexedDB,"deleteDatabase",[G])},Object.defineProperty(V,"__esModule",{value:!0})}(Te)},7574:(et,Te,V)=>{"use strict";V.d(Te,{y:()=>L});var f=V(7393),F=V(9181),ce=V(6490),ie=V(6554),Ee=V(4487);var k=V(2494);let L=(()=>{class Z{constructor(we){this._isScalar=!1,we&&(this._subscribe=we)}lift(we){const de=new Z;return de.source=this,de.operator=we,de}subscribe(we,de,G){const{operator:me}=this,ve=function(Z,re,we){if(Z){if(Z instanceof f.L)return Z;if(Z[F.b])return Z[F.b]()}return Z||re||we?new f.L(Z,re,we):new f.L(ce.c)}(we,de,G);if(ve.add(me?me.call(ve,this.source):this.source||k.v.useDeprecatedSynchronousErrorHandling&&!ve.syncErrorThrowable?this._subscribe(ve):this._trySubscribe(ve)),k.v.useDeprecatedSynchronousErrorHandling&&ve.syncErrorThrowable&&(ve.syncErrorThrowable=!1,ve.syncErrorThrown))throw ve.syncErrorValue;return ve}_trySubscribe(we){try{return this._subscribe(we)}catch(de){k.v.useDeprecatedSynchronousErrorHandling&&(we.syncErrorThrown=!0,we.syncErrorValue=de),function(Z){for(;Z;){const{closed:re,destination:we,isStopped:de}=Z;if(re||de)return!1;Z=we&&we instanceof f.L?we:null}return!0}(we)?we.error(de):console.warn(de)}}forEach(we,de){return new(de=Q(de))((G,me)=>{let ve;ve=this.subscribe(he=>{try{we(he)}catch(Ce){me(Ce),ve&&ve.unsubscribe()}},me,G)})}_subscribe(we){const{source:de}=this;return de&&de.subscribe(we)}[ie.L](){return this}pipe(...we){return 0===we.length?this:function(Z){return 0===Z.length?Ee.y:1===Z.length?Z[0]:function(we){return Z.reduce((de,G)=>G(de),we)}}(we)(this)}toPromise(we){return new(we=Q(we))((de,G)=>{let me;this.subscribe(ve=>me=ve,ve=>G(ve),()=>de(me))})}}return Z.create=re=>new Z(re),Z})();function Q(Z){if(Z||(Z=k.v.Promise||Promise),!Z)throw new Error("no Promise impl found");return Z}},6490:(et,Te,V)=>{"use strict";V.d(Te,{c:()=>F});var f=V(2494),ee=V(4449);const F={closed:!0,next(ce){},error(ce){if(f.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,ee.z)(ce)},complete(){}}},9765:(et,Te,V)=>{"use strict";V.d(Te,{Yc:()=>Ee,xQ:()=>le});var f=V(7574),ee=V(7393),F=V(5319),ce=V(7971),te=V(8858),ie=V(9181);class Ee extends ee.L{constructor(L){super(L),this.destination=L}}let le=(()=>{class k extends f.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ie.b](){return new Ee(this)}lift(Q){const Z=new W(this,this);return Z.operator=Q,Z}next(Q){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:Z}=this,re=Z.length,we=Z.slice();for(let de=0;de<re;de++)we[de].next(Q)}}error(Q){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=Q,this.isStopped=!0;const{observers:Z}=this,re=Z.length,we=Z.slice();for(let de=0;de<re;de++)we[de].error(Q);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:Q}=this,Z=Q.length,re=Q.slice();for(let we=0;we<Z;we++)re[we].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Q){if(this.closed)throw new ce.N;return super._trySubscribe(Q)}_subscribe(Q){if(this.closed)throw new ce.N;return this.hasError?(Q.error(this.thrownError),F.w.EMPTY):this.isStopped?(Q.complete(),F.w.EMPTY):(this.observers.push(Q),new te.W(this,Q))}asObservable(){const Q=new f.y;return Q.source=this,Q}}return k.create=(L,Q)=>new W(L,Q),k})();class W extends le{constructor(L,Q){super(),this.destination=L,this.source=Q}next(L){const{destination:Q}=this;Q&&Q.next&&Q.next(L)}error(L){const{destination:Q}=this;Q&&Q.error&&this.destination.error(L)}complete(){const{destination:L}=this;L&&L.complete&&this.destination.complete()}_subscribe(L){const{source:Q}=this;return Q?this.source.subscribe(L):F.w.EMPTY}}},8858:(et,Te,V)=>{"use strict";V.d(Te,{W:()=>ee});var f=V(5319);class ee extends f.w{constructor(ce,te){super(),this.subject=ce,this.subscriber=te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,te=ce.observers;if(this.subject=null,!te||0===te.length||ce.isStopped||ce.closed)return;const ie=te.indexOf(this.subscriber);-1!==ie&&te.splice(ie,1)}}},7393:(et,Te,V)=>{"use strict";V.d(Te,{L:()=>Ee});var f=V(9105),ee=V(6490),F=V(5319),ce=V(9181),te=V(2494),ie=V(4449);class Ee extends F.w{constructor(k,L,Q){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ee.c;break;case 1:if(!k){this.destination=ee.c;break}if("object"==typeof k){k instanceof Ee?(this.syncErrorThrowable=k.syncErrorThrowable,this.destination=k,k.add(this)):(this.syncErrorThrowable=!0,this.destination=new le(this,k));break}default:this.syncErrorThrowable=!0,this.destination=new le(this,k,L,Q)}}[ce.b](){return this}static create(k,L,Q){const Z=new Ee(k,L,Q);return Z.syncErrorThrowable=!1,Z}next(k){this.isStopped||this._next(k)}error(k){this.isStopped||(this.isStopped=!0,this._error(k))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(k){this.destination.next(k)}_error(k){this.destination.error(k),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:k}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=k,this}}class le extends Ee{constructor(k,L,Q,Z){super(),this._parentSubscriber=k;let re,we=this;(0,f.m)(L)?re=L:L&&(re=L.next,Q=L.error,Z=L.complete,L!==ee.c&&(we=Object.create(L),(0,f.m)(we.unsubscribe)&&this.add(we.unsubscribe.bind(we)),we.unsubscribe=this.unsubscribe.bind(this))),this._context=we,this._next=re,this._error=Q,this._complete=Z}next(k){if(!this.isStopped&&this._next){const{_parentSubscriber:L}=this;te.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?this.__tryOrSetError(L,this._next,k)&&this.unsubscribe():this.__tryOrUnsub(this._next,k)}}error(k){if(!this.isStopped){const{_parentSubscriber:L}=this,{useDeprecatedSynchronousErrorHandling:Q}=te.v;if(this._error)Q&&L.syncErrorThrowable?(this.__tryOrSetError(L,this._error,k),this.unsubscribe()):(this.__tryOrUnsub(this._error,k),this.unsubscribe());else if(L.syncErrorThrowable)Q?(L.syncErrorValue=k,L.syncErrorThrown=!0):(0,ie.z)(k),this.unsubscribe();else{if(this.unsubscribe(),Q)throw k;(0,ie.z)(k)}}}complete(){if(!this.isStopped){const{_parentSubscriber:k}=this;if(this._complete){const L=()=>this._complete.call(this._context);te.v.useDeprecatedSynchronousErrorHandling&&k.syncErrorThrowable?(this.__tryOrSetError(k,L),this.unsubscribe()):(this.__tryOrUnsub(L),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(k,L){try{k.call(this._context,L)}catch(Q){if(this.unsubscribe(),te.v.useDeprecatedSynchronousErrorHandling)throw Q;(0,ie.z)(Q)}}__tryOrSetError(k,L,Q){if(!te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{L.call(this._context,Q)}catch(Z){return te.v.useDeprecatedSynchronousErrorHandling?(k.syncErrorValue=Z,k.syncErrorThrown=!0,!0):((0,ie.z)(Z),!0)}return!1}_unsubscribe(){const{_parentSubscriber:k}=this;this._context=null,this._parentSubscriber=null,k.unsubscribe()}}},5319:(et,Te,V)=>{"use strict";V.d(Te,{w:()=>ie});var f=V(9796),ee=V(1555),F=V(9105);const te=(()=>{function le(W){return Error.call(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((k,L)=>`${L+1}) ${k.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W,this}return le.prototype=Object.create(Error.prototype),le})();class ie{constructor(W){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,W&&(this._ctorUnsubscribe=!0,this._unsubscribe=W)}unsubscribe(){let W;if(this.closed)return;let{_parentOrParents:k,_ctorUnsubscribe:L,_unsubscribe:Q,_subscriptions:Z}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,k instanceof ie)k.remove(this);else if(null!==k)for(let re=0;re<k.length;++re)k[re].remove(this);if((0,F.m)(Q)){L&&(this._unsubscribe=void 0);try{Q.call(this)}catch(re){W=re instanceof te?Ee(re.errors):[re]}}if((0,f.k)(Z)){let re=-1,we=Z.length;for(;++re<we;){const de=Z[re];if((0,ee.K)(de))try{de.unsubscribe()}catch(G){W=W||[],G instanceof te?W=W.concat(Ee(G.errors)):W.push(G)}}}if(W)throw new te(W)}add(W){let k=W;if(!W)return ie.EMPTY;switch(typeof W){case"function":k=new ie(W);case"object":if(k===this||k.closed||"function"!=typeof k.unsubscribe)return k;if(this.closed)return k.unsubscribe(),k;if(!(k instanceof ie)){const Z=k;k=new ie,k._subscriptions=[Z]}break;default:throw new Error("unrecognized teardown "+W+" added to Subscription.")}let{_parentOrParents:L}=k;if(null===L)k._parentOrParents=this;else if(L instanceof ie){if(L===this)return k;k._parentOrParents=[L,this]}else{if(-1!==L.indexOf(this))return k;L.push(this)}const Q=this._subscriptions;return null===Q?this._subscriptions=[k]:Q.push(k),k}remove(W){const k=this._subscriptions;if(k){const L=k.indexOf(W);-1!==L&&k.splice(L,1)}}}var le;function Ee(le){return le.reduce((W,k)=>W.concat(k instanceof te?k.errors:k),[])}ie.EMPTY=((le=new ie).closed=!0,le)},2494:(et,Te,V)=>{"use strict";V.d(Te,{v:()=>ee});let f=!1;const ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(F){if(F){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else f&&console.log("RxJS: Back to a better error behavior. Thank you. <3");f=F},get useDeprecatedSynchronousErrorHandling(){return f}}},5345:(et,Te,V)=>{"use strict";V.d(Te,{IY:()=>ce,Ds:()=>ie,ft:()=>le});var f=V(7393),ee=V(7574),F=V(7444);class ce extends f.L{constructor(k){super(),this.parent=k}_next(k){this.parent.notifyNext(k)}_error(k){this.parent.notifyError(k),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ie extends f.L{notifyNext(k){this.destination.next(k)}notifyError(k){this.destination.error(k)}notifyComplete(){this.destination.complete()}}function le(W,k){if(k.closed)return;if(W instanceof ee.y)return W.subscribe(k);let L;try{L=(0,F.s)(W)(k)}catch(Q){k.error(Q)}return L}},2441:(et,Te,V)=>{"use strict";V.d(Te,{c:()=>te,N:()=>ie});var f=V(9765),ee=V(7574),F=V(5319),ce=V(1307);class te extends ee.y{constructor(L,Q){super(),this.source=L,this.subjectFactory=Q,this._refCount=0,this._isComplete=!1}_subscribe(L){return this.getSubject().subscribe(L)}getSubject(){const L=this._subject;return(!L||L.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let L=this._connection;return L||(this._isComplete=!1,L=this._connection=new F.w,L.add(this.source.subscribe(new Ee(this.getSubject(),this))),L.closed&&(this._connection=null,L=F.w.EMPTY)),L}refCount(){return(0,ce.x)()(this)}}const ie=(()=>{const k=te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:k._subscribe},_isComplete:{value:k._isComplete,writable:!0},getSubject:{value:k.getSubject},connect:{value:k.connect},refCount:{value:k.refCount}}})();class Ee extends f.Yc{constructor(L,Q){super(L),this.connectable=Q}_error(L){this._unsubscribe(),super._error(L)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const L=this.connectable;if(L){this.connectable=null;const Q=L._connection;L._refCount=0,L._subject=null,L._connection=null,Q&&Q.unsubscribe()}}}},9193:(et,Te,V)=>{"use strict";V.d(Te,{E:()=>ee,c:()=>F});var f=V(7574);const ee=new f.y(te=>te.complete());function F(te){return te?function(te){return new f.y(ie=>te.schedule(()=>ie.complete()))}(te):ee}},4402:(et,Te,V)=>{"use strict";V.d(Te,{D:()=>we});var f=V(7574),ee=V(7444),F=V(5319),ce=V(6554),Ee=V(4087),le=V(377),L=V(4072),Q=V(9489);function we(de,G){return G?function(de,G){if(null!=de){if(function(de){return de&&"function"==typeof de[ce.L]}(de))return function(de,G){return new f.y(me=>{const ve=new F.w;return ve.add(G.schedule(()=>{const he=de[ce.L]();ve.add(he.subscribe({next(Ce){ve.add(G.schedule(()=>me.next(Ce)))},error(Ce){ve.add(G.schedule(()=>me.error(Ce)))},complete(){ve.add(G.schedule(()=>me.complete()))}}))})),ve})}(de,G);if((0,L.t)(de))return function(de,G){return new f.y(me=>{const ve=new F.w;return ve.add(G.schedule(()=>de.then(he=>{ve.add(G.schedule(()=>{me.next(he),ve.add(G.schedule(()=>me.complete()))}))},he=>{ve.add(G.schedule(()=>me.error(he)))}))),ve})}(de,G);if((0,Q.z)(de))return(0,Ee.r)(de,G);if(function(de){return de&&"function"==typeof de[le.hZ]}(de)||"string"==typeof de)return function(de,G){if(!de)throw new Error("Iterable cannot be null");return new f.y(me=>{const ve=new F.w;let he;return ve.add(()=>{he&&"function"==typeof he.return&&he.return()}),ve.add(G.schedule(()=>{he=de[le.hZ](),ve.add(G.schedule(function(){if(me.closed)return;let Ce,Fe;try{const Le=he.next();Ce=Le.value,Fe=Le.done}catch(Le){return void me.error(Le)}Fe?me.complete():(me.next(Ce),this.schedule())}))})),ve})}(de,G)}throw new TypeError((null!==de&&typeof de||de)+" is not observable")}(de,G):de instanceof f.y?de:new f.y((0,ee.s)(de))}},6693:(et,Te,V)=>{"use strict";V.d(Te,{n:()=>ce});var f=V(7574),ee=V(5015),F=V(4087);function ce(te,ie){return ie?(0,F.r)(te,ie):new f.y((0,ee.V)(te))}},6682:(et,Te,V)=>{"use strict";V.d(Te,{T:()=>te});var f=V(7574),ee=V(4869),F=V(3282),ce=V(6693);function te(...ie){let Ee=Number.POSITIVE_INFINITY,le=null,W=ie[ie.length-1];return(0,ee.K)(W)?(le=ie.pop(),ie.length>1&&"number"==typeof ie[ie.length-1]&&(Ee=ie.pop())):"number"==typeof W&&(Ee=ie.pop()),null===le&&1===ie.length&&ie[0]instanceof f.y?ie[0]:(0,F.J)(Ee)((0,ce.n)(ie,le))}},5917:(et,Te,V)=>{"use strict";V.d(Te,{of:()=>ce});var f=V(4869),ee=V(6693),F=V(4087);function ce(...te){let ie=te[te.length-1];return(0,f.K)(ie)?(te.pop(),(0,F.r)(te,ie)):(0,ee.n)(te)}},8002:(et,Te,V)=>{"use strict";V.d(Te,{U:()=>ee});var f=V(7393);function ee(te,ie){return function(le){if("function"!=typeof te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return le.lift(new F(te,ie))}}class F{constructor(ie,Ee){this.project=ie,this.thisArg=Ee}call(ie,Ee){return Ee.subscribe(new ce(ie,this.project,this.thisArg))}}class ce extends f.L{constructor(ie,Ee,le){super(ie),this.project=Ee,this.count=0,this.thisArg=le||this}_next(ie){let Ee;try{Ee=this.project.call(this.thisArg,ie,this.count++)}catch(le){return void this.destination.error(le)}this.destination.next(Ee)}}},3282:(et,Te,V)=>{"use strict";V.d(Te,{J:()=>F});var f=V(9773),ee=V(4487);function F(ce=Number.POSITIVE_INFINITY){return(0,f.zg)(ee.y,ce)}},9773:(et,Te,V)=>{"use strict";V.d(Te,{zg:()=>ce});var f=V(8002),ee=V(4402),F=V(5345);function ce(le,W,k=Number.POSITIVE_INFINITY){return"function"==typeof W?L=>L.pipe(ce((Q,Z)=>(0,ee.D)(le(Q,Z)).pipe((0,f.U)((re,we)=>W(Q,re,Z,we))),k)):("number"==typeof W&&(k=W),L=>L.lift(new te(le,k)))}class te{constructor(W,k=Number.POSITIVE_INFINITY){this.project=W,this.concurrent=k}call(W,k){return k.subscribe(new ie(W,this.project,this.concurrent))}}class ie extends F.Ds{constructor(W,k,L=Number.POSITIVE_INFINITY){super(W),this.project=k,this.concurrent=L,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(W){this.active<this.concurrent?this._tryNext(W):this.buffer.push(W)}_tryNext(W){let k;const L=this.index++;try{k=this.project(W,L)}catch(Q){return void this.destination.error(Q)}this.active++,this._innerSub(k)}_innerSub(W){const k=new F.IY(this),L=this.destination;L.add(k);const Q=(0,F.ft)(W,k);Q!==k&&L.add(Q)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(W){this.destination.next(W)}notifyComplete(){const W=this.buffer;this.active--,W.length>0?this._next(W.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(et,Te,V)=>{"use strict";V.d(Te,{ht:()=>L,QV:()=>W});var f=V(7393),ee=V(9193),F=V(5917),ce=V(7574);class le{constructor(re,we,de){this.kind=re,this.value=we,this.error=de,this.hasValue="N"===re}observe(re){switch(this.kind){case"N":return re.next&&re.next(this.value);case"E":return re.error&&re.error(this.error);case"C":return re.complete&&re.complete()}}do(re,we,de){switch(this.kind){case"N":return re&&re(this.value);case"E":return we&&we(this.error);case"C":return de&&de()}}accept(re,we,de){return re&&"function"==typeof re.next?this.observe(re):this.do(re,we,de)}toObservable(){switch(this.kind){case"N":return(0,F.of)(this.value);case"E":return Z=this.error,new ce.y(we=>we.error(Z));case"C":return(0,ee.c)()}var Z;throw new Error("unexpected notification kind value")}static createNext(re){return void 0!==re?new le("N",re):le.undefinedValueNotification}static createError(re){return new le("E",void 0,re)}static createComplete(){return le.completeNotification}}function W(Z,re=0){return function(de){return de.lift(new k(Z,re))}}le.completeNotification=new le("C"),le.undefinedValueNotification=new le("N",void 0);class k{constructor(re,we=0){this.scheduler=re,this.delay=we}call(re,we){return we.subscribe(new L(re,this.scheduler,this.delay))}}class L extends f.L{constructor(re,we,de=0){super(re),this.scheduler=we,this.delay=de}static dispatch(re){const{notification:we,destination:de}=re;we.observe(de),this.unsubscribe()}scheduleMessage(re){this.destination.add(this.scheduler.schedule(L.dispatch,this.delay,new Q(re,this.destination)))}_next(re){this.scheduleMessage(le.createNext(re))}_error(re){this.scheduleMessage(le.createError(re)),this.unsubscribe()}_complete(){this.scheduleMessage(le.createComplete()),this.unsubscribe()}}class Q{constructor(re,we){this.notification=re,this.destination=we}}},1307:(et,Te,V)=>{"use strict";V.d(Te,{x:()=>ee});var f=V(7393);function ee(){return function(ie){return ie.lift(new F(ie))}}class F{constructor(ie){this.connectable=ie}call(ie,Ee){const{connectable:le}=this;le._refCount++;const W=new ce(ie,le),k=Ee.subscribe(W);return W.closed||(W.connection=le.connect()),k}}class ce extends f.L{constructor(ie,Ee){super(ie),this.connectable=Ee}_unsubscribe(){const{connectable:ie}=this;if(!ie)return void(this.connection=null);this.connectable=null;const Ee=ie._refCount;if(Ee<=0)return void(this.connection=null);if(ie._refCount=Ee-1,Ee>1)return void(this.connection=null);const{connection:le}=this,W=ie._connection;this.connection=null,W&&(!le||W===le)&&W.unsubscribe()}}},3101:(et,Te,V)=>{"use strict";V.d(Te,{R:()=>G});var f=V(7574);let ee=1;const F=Promise.resolve(),ce={};function te(ve){return ve in ce&&(delete ce[ve],!0)}const ie={setImmediate(ve){const he=ee++;return ce[he]=!0,F.then(()=>te(he)&&ve()),he},clearImmediate(ve){te(ve)}};var le=V(6465),k=V(6102);const Z=new class extends k.v{flush(he){this.active=!0,this.scheduled=void 0;const{actions:Ce}=this;let Fe,Le=-1,yt=Ce.length;he=he||Ce.shift();do{if(Fe=he.execute(he.state,he.delay))break}while(++Le<yt&&(he=Ce.shift()));if(this.active=!1,Fe){for(;++Le<yt&&(he=Ce.shift());)he.unsubscribe();throw Fe}}}(class extends le.o{constructor(he,Ce){super(he,Ce),this.scheduler=he,this.work=Ce}requestAsyncId(he,Ce,Fe=0){return null!==Fe&&Fe>0?super.requestAsyncId(he,Ce,Fe):(he.actions.push(this),he.scheduled||(he.scheduled=ie.setImmediate(he.flush.bind(he,null))))}recycleAsyncId(he,Ce,Fe=0){if(null!==Fe&&Fe>0||null===Fe&&this.delay>0)return super.recycleAsyncId(he,Ce,Fe);0===he.actions.length&&(ie.clearImmediate(Ce),he.scheduled=void 0)}});var re=V(9796);class de extends f.y{constructor(he,Ce=0,Fe=Z){var ve;super(),this.source=he,this.delayTime=Ce,this.scheduler=Fe,(!(!(0,re.k)(ve=Ce)&&ve-parseFloat(ve)+1>=0)||Ce<0)&&(this.delayTime=0),(!Fe||"function"!=typeof Fe.schedule)&&(this.scheduler=Z)}static create(he,Ce=0,Fe=Z){return new de(he,Ce,Fe)}static dispatch(he){const{source:Ce,subscriber:Fe}=he;return this.add(Ce.subscribe(Fe))}_subscribe(he){return this.scheduler.schedule(de.dispatch,this.delayTime,{source:this.source,subscriber:he})}}function G(ve,he=0){return function(Fe){return Fe.lift(new me(ve,he))}}class me{constructor(he,Ce){this.scheduler=he,this.delay=Ce}call(he,Ce){return new de(Ce,this.delay,this.scheduler).subscribe(he)}}},3342:(et,Te,V)=>{"use strict";V.d(Te,{b:()=>ce});var f=V(7393);function ee(){}var F=V(9105);function ce(Ee,le,W){return function(L){return L.lift(new te(Ee,le,W))}}class te{constructor(le,W,k){this.nextOrObserver=le,this.error=W,this.complete=k}call(le,W){return W.subscribe(new ie(le,this.nextOrObserver,this.error,this.complete))}}class ie extends f.L{constructor(le,W,k,L){super(le),this._tapNext=ee,this._tapError=ee,this._tapComplete=ee,this._tapError=k||ee,this._tapComplete=L||ee,(0,F.m)(W)?(this._context=this,this._tapNext=W):W&&(this._context=W,this._tapNext=W.next||ee,this._tapError=W.error||ee,this._tapComplete=W.complete||ee)}_next(le){try{this._tapNext.call(this._context,le)}catch(W){return void this.destination.error(W)}this.destination.next(le)}_error(le){try{this._tapError.call(this._context,le)}catch(W){return void this.destination.error(W)}this.destination.error(le)}_complete(){try{this._tapComplete.call(this._context)}catch(le){return void this.destination.error(le)}return this.destination.complete()}}},4087:(et,Te,V)=>{"use strict";V.d(Te,{r:()=>F});var f=V(7574),ee=V(5319);function F(ce,te){return new f.y(ie=>{const Ee=new ee.w;let le=0;return Ee.add(te.schedule(function(){le!==ce.length?(ie.next(ce[le++]),ie.closed||Ee.add(this.schedule())):ie.complete()})),Ee})}},6465:(et,Te,V)=>{"use strict";V.d(Te,{o:()=>F});var f=V(5319);class ee extends f.w{constructor(te,ie){super()}schedule(te,ie=0){return this}}class F extends ee{constructor(te,ie){super(te,ie),this.scheduler=te,this.work=ie,this.pending=!1}schedule(te,ie=0){if(this.closed)return this;this.state=te;const Ee=this.id,le=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(le,Ee,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(le,this.id,ie),this}requestAsyncId(te,ie,Ee=0){return setInterval(te.flush.bind(te,this),Ee)}recycleAsyncId(te,ie,Ee=0){if(null!==Ee&&this.delay===Ee&&!1===this.pending)return ie;clearInterval(ie)}execute(te,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(te,ie);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,ie){let le,Ee=!1;try{this.work(te)}catch(W){Ee=!0,le=!!W&&W||new Error(W)}if(Ee)return this.unsubscribe(),le}_unsubscribe(){const te=this.id,ie=this.scheduler,Ee=ie.actions,le=Ee.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==le&&Ee.splice(le,1),null!=te&&(this.id=this.recycleAsyncId(ie,te,null)),this.delay=null}}},6102:(et,Te,V)=>{"use strict";V.d(Te,{v:()=>ee});let f=(()=>{class F{constructor(te,ie=F.now){this.SchedulerAction=te,this.now=ie}schedule(te,ie=0,Ee){return new this.SchedulerAction(this,te).schedule(Ee,ie)}}return F.now=()=>Date.now(),F})();class ee extends f{constructor(ce,te=f.now){super(ce,()=>ee.delegate&&ee.delegate!==this?ee.delegate.now():te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,te=0,ie){return ee.delegate&&ee.delegate!==this?ee.delegate.schedule(ce,te,ie):super.schedule(ce,te,ie)}flush(ce){const{actions:te}=this;if(this.active)return void te.push(ce);let ie;this.active=!0;do{if(ie=ce.execute(ce.state,ce.delay))break}while(ce=te.shift());if(this.active=!1,ie){for(;ce=te.shift();)ce.unsubscribe();throw ie}}}},3637:(et,Te,V)=>{"use strict";V.d(Te,{z:()=>F});var f=V(6465);const F=new(V(6102).v)(f.o)},7771:(et,Te,V)=>{"use strict";V.d(Te,{c:()=>ie,N:()=>te});var f=V(6465),F=V(6102);const te=new class extends F.v{}(class extends f.o{constructor(le,W){super(le,W),this.scheduler=le,this.work=W}schedule(le,W=0){return W>0?super.schedule(le,W):(this.delay=W,this.state=le,this.scheduler.flush(this),this)}execute(le,W){return W>0||this.closed?super.execute(le,W):this._execute(le,W)}requestAsyncId(le,W,k=0){return null!==k&&k>0||null===k&&this.delay>0?super.requestAsyncId(le,W,k):le.flush(this)}}),ie=te},377:(et,Te,V)=>{"use strict";V.d(Te,{hZ:()=>ee});const ee="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(et,Te,V)=>{"use strict";V.d(Te,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(et,Te,V)=>{"use strict";V.d(Te,{b:()=>f});const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(et,Te,V)=>{"use strict";V.d(Te,{N:()=>ee});const ee=(()=>{function F(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return F.prototype=Object.create(Error.prototype),F})()},4449:(et,Te,V)=>{"use strict";function f(ee){setTimeout(()=>{throw ee},0)}V.d(Te,{z:()=>f})},4487:(et,Te,V)=>{"use strict";function f(ee){return ee}V.d(Te,{y:()=>f})},9796:(et,Te,V)=>{"use strict";V.d(Te,{k:()=>f});const f=Array.isArray||(ee=>ee&&"number"==typeof ee.length)},9489:(et,Te,V)=>{"use strict";V.d(Te,{z:()=>f});const f=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},9105:(et,Te,V)=>{"use strict";function f(ee){return"function"==typeof ee}V.d(Te,{m:()=>f})},1555:(et,Te,V)=>{"use strict";function f(ee){return null!==ee&&"object"==typeof ee}V.d(Te,{K:()=>f})},4072:(et,Te,V)=>{"use strict";function f(ee){return!!ee&&"function"!=typeof ee.subscribe&&"function"==typeof ee.then}V.d(Te,{t:()=>f})},4869:(et,Te,V)=>{"use strict";function f(ee){return ee&&"function"==typeof ee.schedule}V.d(Te,{K:()=>f})},7444:(et,Te,V)=>{"use strict";V.d(Te,{s:()=>L});var f=V(5015),ee=V(4449),ce=V(377),ie=V(6554),le=V(9489),W=V(4072),k=V(1555);const L=Q=>{if(Q&&"function"==typeof Q[ie.L])return(Q=>Z=>{const re=Q[ie.L]();if("function"!=typeof re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return re.subscribe(Z)})(Q);if((0,le.z)(Q))return(0,f.V)(Q);if((0,W.t)(Q))return(Q=>Z=>(Q.then(re=>{Z.closed||(Z.next(re),Z.complete())},re=>Z.error(re)).then(null,ee.z),Z))(Q);if(Q&&"function"==typeof Q[ce.hZ])return(Q=>Z=>{const re=Q[ce.hZ]();for(;;){let we;try{we=re.next()}catch(de){return Z.error(de),Z}if(we.done){Z.complete();break}if(Z.next(we.value),Z.closed)break}return"function"==typeof re.return&&Z.add(()=>{re.return&&re.return()}),Z})(Q);{const re=`You provided ${(0,k.K)(Q)?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(re)}}},5015:(et,Te,V)=>{"use strict";V.d(Te,{V:()=>f});const f=ee=>F=>{for(let ce=0,te=ee.length;ce<te&&!F.closed;ce++)F.next(ee[ce]);F.complete()}},9635:(et,Te,V)=>{"use strict";var f=V(3018);let ee=null;function F(){return ee}const Ee=new f.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:W,token:n,providedIn:"platform"}),n})();function W(){return(0,f.LFG)(L)}const k=new f.OlP("Location Initialized");let L=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const s=F().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",t,!1),()=>s.removeEventListener("popstate",t)}onHashChange(t){const s=F().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",t,!1),()=>s.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,s,a){Q()?this._history.pushState(t,s,a):this.location.hash=a}replaceState(t,s,a){Q()?this._history.replaceState(t,s,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ee))},n.\u0275prov=(0,f.Yz7)({factory:Z,token:n,providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Z(){return new L((0,f.LFG)(Ee))}function re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function de(n){return n&&"?"!==n[0]?"?"+n:n}let G=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:me,token:n,providedIn:"root"}),n})();function me(n){const e=(0,f.LFG)(Ee).location;return new he((0,f.LFG)(le),e&&e.origin||"")}const ve=new f.OlP("appBaseHref");let he=(()=>{class n extends G{constructor(t,s){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return re(this._baseHref,t)}path(t=!1){const s=this._platformLocation.pathname+de(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${s}${a}`:s}pushState(t,s,a,l){const p=this.prepareExternalUrl(a+de(l));this._platformLocation.pushState(t,s,p)}replaceState(t,s,a,l){const p=this.prepareExternalUrl(a+de(l));this._platformLocation.replaceState(t,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(ve,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends G{constructor(t,s){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(t){const s=re(this._baseHref,t);return s.length>0?"#"+s:s}pushState(t,s,a,l){let p=this.prepareExternalUrl(a+de(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(t,s,p)}replaceState(t,s,a,l){let p=this.prepareExternalUrl(a+de(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(t,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(ve,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t,s){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=we(ht(a)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,s=""){return this.path()==this.normalize(t+de(s))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ht(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,s="",a=null){this._platformStrategy.pushState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+de(s)),a)}replaceState(t,s="",a=null){this._platformStrategy.replaceState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+de(s)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformStrategy).historyGo)||void 0===a||a.call(s,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(t="",s){this._urlChangeListeners.forEach(a=>a(t,s))}subscribe(t,s,a){return this._subject.subscribe({next:t,error:s,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(G),f.LFG(le))},n.normalizeQueryParams=de,n.joinWithSlash=re,n.stripTrailingSlash=we,n.\u0275prov=(0,f.Yz7)({factory:Le,token:n,providedIn:"root"}),n})();function Le(){return new Fe((0,f.LFG)(G),(0,f.LFG)(le))}function ht(n){return n.replace(/\/index.html$/,"")}var oe=(()=>((oe=oe||{})[oe.Zero=0]="Zero",oe[oe.One=1]="One",oe[oe.Two=2]="Two",oe[oe.Few=3]="Few",oe[oe.Many=4]="Many",oe[oe.Other=5]="Other",oe))(),fe=(()=>((fe=fe||{})[fe.Format=0]="Format",fe[fe.Standalone=1]="Standalone",fe))(),ue=(()=>((ue=ue||{})[ue.Narrow=0]="Narrow",ue[ue.Abbreviated=1]="Abbreviated",ue[ue.Wide=2]="Wide",ue[ue.Short=3]="Short",ue))(),Pe=(()=>((Pe=Pe||{})[Pe.Short=0]="Short",Pe[Pe.Medium=1]="Medium",Pe[Pe.Long=2]="Long",Pe[Pe.Full=3]="Full",Pe))(),ge=(()=>((ge=ge||{})[ge.Decimal=0]="Decimal",ge[ge.Group=1]="Group",ge[ge.List=2]="List",ge[ge.PercentSign=3]="PercentSign",ge[ge.PlusSign=4]="PlusSign",ge[ge.MinusSign=5]="MinusSign",ge[ge.Exponential=6]="Exponential",ge[ge.SuperscriptingExponent=7]="SuperscriptingExponent",ge[ge.PerMille=8]="PerMille",ge[ge.Infinity=9]="Infinity",ge[ge.NaN=10]="NaN",ge[ge.TimeSeparator=11]="TimeSeparator",ge[ge.CurrencyDecimal=12]="CurrencyDecimal",ge[ge.CurrencyGroup=13]="CurrencyGroup",ge))();function Ur(n,e){return In((0,f.cg1)(n)[f.wAp.DateFormat],e)}function dn(n,e){return In((0,f.cg1)(n)[f.wAp.TimeFormat],e)}function at(n,e){return In((0,f.cg1)(n)[f.wAp.DateTimeFormat],e)}function Nt(n,e){const t=(0,f.cg1)(n),s=t[f.wAp.NumberSymbols][e];if(void 0===s){if(e===ge.CurrencyDecimal)return t[f.wAp.NumberSymbols][ge.Decimal];if(e===ge.CurrencyGroup)return t[f.wAp.NumberSymbols][ge.Group]}return s}const Tr=f.kL8;function ti(n){if(!n[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function In(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function pr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Bt=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Jt={},hn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var kt=(()=>((kt=kt||{})[kt.Short=0]="Short",kt[kt.ShortGMT=1]="ShortGMT",kt[kt.Long=2]="Long",kt[kt.Extended=3]="Extended",kt))(),Ye=(()=>((Ye=Ye||{})[Ye.FullYear=0]="FullYear",Ye[Ye.Month=1]="Month",Ye[Ye.Date=2]="Date",Ye[Ye.Hours=3]="Hours",Ye[Ye.Minutes=4]="Minutes",Ye[Ye.Seconds=5]="Seconds",Ye[Ye.FractionalSeconds=6]="FractionalSeconds",Ye[Ye.Day=7]="Day",Ye))(),Qe=(()=>((Qe=Qe||{})[Qe.DayPeriods=0]="DayPeriods",Qe[Qe.Days=1]="Days",Qe[Qe.Months=2]="Months",Qe[Qe.Eras=3]="Eras",Qe))();function _n(n,e,t,s){let a=function(n){if(Vu(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[a,l=1,p=1]=n.split("-").map(v=>+v);return fs(a,l-1,p)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let s;if(s=n.match(Bt))return function(n){const e=new Date(0);let t=0,s=0;const a=n[8]?e.setUTCFullYear:e.setFullYear,l=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),s=Number(n[9]+n[11])),a.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const p=Number(n[4]||0)-t,v=Number(n[5]||0)-s,b=Number(n[6]||0),S=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(e,p,v,b,S),e}(s)}const e=new Date(n);if(!Vu(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Ii(t,e)||e;let v,p=[];for(;e;){if(v=hn.exec(e),!v){p.push(e);break}{p=p.concat(v.slice(1));const R=p.pop();if(!R)break;e=R}}let b=a.getTimezoneOffset();s&&(b=Jn(s,b),a=function(n,e,t){const a=n.getTimezoneOffset();return function(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(Jn(e,a)-a))}(a,s));let S="";return p.forEach(R=>{const P=function(n){if(Dt[n])return Dt[n];let e;switch(n){case"G":case"GG":case"GGG":e=j(Qe.Eras,ue.Abbreviated);break;case"GGGG":e=j(Qe.Eras,ue.Wide);break;case"GGGGG":e=j(Qe.Eras,ue.Narrow);break;case"y":e=$(Ye.FullYear,1,0,!1,!0);break;case"yy":e=$(Ye.FullYear,2,0,!0,!0);break;case"yyy":e=$(Ye.FullYear,3,0,!1,!0);break;case"yyyy":e=$(Ye.FullYear,4,0,!1,!0);break;case"Y":e=Br(1);break;case"YY":e=Br(2,!0);break;case"YYY":e=Br(3);break;case"YYYY":e=Br(4);break;case"M":case"L":e=$(Ye.Month,1,1);break;case"MM":case"LL":e=$(Ye.Month,2,1);break;case"MMM":e=j(Qe.Months,ue.Abbreviated);break;case"MMMM":e=j(Qe.Months,ue.Wide);break;case"MMMMM":e=j(Qe.Months,ue.Narrow);break;case"LLL":e=j(Qe.Months,ue.Abbreviated,fe.Standalone);break;case"LLLL":e=j(Qe.Months,ue.Wide,fe.Standalone);break;case"LLLLL":e=j(Qe.Months,ue.Narrow,fe.Standalone);break;case"w":e=Yt(1);break;case"ww":e=Yt(2);break;case"W":e=Yt(1,!0);break;case"d":e=$(Ye.Date,1);break;case"dd":e=$(Ye.Date,2);break;case"c":case"cc":e=$(Ye.Day,1);break;case"ccc":e=j(Qe.Days,ue.Abbreviated,fe.Standalone);break;case"cccc":e=j(Qe.Days,ue.Wide,fe.Standalone);break;case"ccccc":e=j(Qe.Days,ue.Narrow,fe.Standalone);break;case"cccccc":e=j(Qe.Days,ue.Short,fe.Standalone);break;case"E":case"EE":case"EEE":e=j(Qe.Days,ue.Abbreviated);break;case"EEEE":e=j(Qe.Days,ue.Wide);break;case"EEEEE":e=j(Qe.Days,ue.Narrow);break;case"EEEEEE":e=j(Qe.Days,ue.Short);break;case"a":case"aa":case"aaa":e=j(Qe.DayPeriods,ue.Abbreviated);break;case"aaaa":e=j(Qe.DayPeriods,ue.Wide);break;case"aaaaa":e=j(Qe.DayPeriods,ue.Narrow);break;case"b":case"bb":case"bbb":e=j(Qe.DayPeriods,ue.Abbreviated,fe.Standalone,!0);break;case"bbbb":e=j(Qe.DayPeriods,ue.Wide,fe.Standalone,!0);break;case"bbbbb":e=j(Qe.DayPeriods,ue.Narrow,fe.Standalone,!0);break;case"B":case"BB":case"BBB":e=j(Qe.DayPeriods,ue.Abbreviated,fe.Format,!0);break;case"BBBB":e=j(Qe.DayPeriods,ue.Wide,fe.Format,!0);break;case"BBBBB":e=j(Qe.DayPeriods,ue.Narrow,fe.Format,!0);break;case"h":e=$(Ye.Hours,1,-12);break;case"hh":e=$(Ye.Hours,2,-12);break;case"H":e=$(Ye.Hours,1);break;case"HH":e=$(Ye.Hours,2);break;case"m":e=$(Ye.Minutes,1);break;case"mm":e=$(Ye.Minutes,2);break;case"s":e=$(Ye.Seconds,1);break;case"ss":e=$(Ye.Seconds,2);break;case"S":e=$(Ye.FractionalSeconds,1);break;case"SS":e=$(Ye.FractionalSeconds,2);break;case"SSS":e=$(Ye.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=se(kt.Short);break;case"ZZZZZ":e=se(kt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=se(kt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=se(kt.Long);break;default:return null}return Dt[n]=e,e}(R);S+=P?P(a,t,b):"''"===R?"'":R.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),S}function fs(n,e,t){const s=new Date(0);return s.setFullYear(n,e,t),s.setHours(0,0,0),s}function Ii(n,e){const t=function(n){return(0,f.cg1)(n)[f.wAp.LocaleId]}(n);if(Jt[t]=Jt[t]||{},Jt[t][e])return Jt[t][e];let s="";switch(e){case"shortDate":s=Ur(n,Pe.Short);break;case"mediumDate":s=Ur(n,Pe.Medium);break;case"longDate":s=Ur(n,Pe.Long);break;case"fullDate":s=Ur(n,Pe.Full);break;case"shortTime":s=dn(n,Pe.Short);break;case"mediumTime":s=dn(n,Pe.Medium);break;case"longTime":s=dn(n,Pe.Long);break;case"fullTime":s=dn(n,Pe.Full);break;case"short":const a=Ii(n,"shortTime"),l=Ii(n,"shortDate");s=fn(at(n,Pe.Short),[a,l]);break;case"medium":const p=Ii(n,"mediumTime"),v=Ii(n,"mediumDate");s=fn(at(n,Pe.Medium),[p,v]);break;case"long":const b=Ii(n,"longTime"),S=Ii(n,"longDate");s=fn(at(n,Pe.Long),[b,S]);break;case"full":const R=Ii(n,"fullTime"),P=Ii(n,"fullDate");s=fn(at(n,Pe.Full),[R,P])}return s&&(Jt[t][e]=s),s}function fn(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,s){return null!=e&&s in e?e[s]:t})),n}function Ar(n,e,t="-",s,a){let l="";(n<0||a&&n<=0)&&(a?n=1-n:(n=-n,l=t));let p=String(n);for(;p.length<e;)p="0"+p;return s&&(p=p.substr(p.length-e)),l+p}function $(n,e,t=0,s=!1,a=!1){return function(l,p){let v=function(n,e){switch(n){case Ye.FullYear:return e.getFullYear();case Ye.Month:return e.getMonth();case Ye.Date:return e.getDate();case Ye.Hours:return e.getHours();case Ye.Minutes:return e.getMinutes();case Ye.Seconds:return e.getSeconds();case Ye.FractionalSeconds:return e.getMilliseconds();case Ye.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((t>0||v>-t)&&(v+=t),n===Ye.Hours)0===v&&-12===t&&(v=12);else if(n===Ye.FractionalSeconds)return function(n,e){return Ar(n,3).substr(0,e)}(v,e);const b=Nt(p,ge.MinusSign);return Ar(v,e,b,s,a)}}function j(n,e,t=fe.Format,s=!1){return function(a,l){return function(n,e,t,s,a,l){switch(t){case Qe.Months:return function(n,e,t){const s=(0,f.cg1)(n),l=In([s[f.wAp.MonthsFormat],s[f.wAp.MonthsStandalone]],e);return In(l,t)}(e,a,s)[n.getMonth()];case Qe.Days:return function(n,e,t){const s=(0,f.cg1)(n),l=In([s[f.wAp.DaysFormat],s[f.wAp.DaysStandalone]],e);return In(l,t)}(e,a,s)[n.getDay()];case Qe.DayPeriods:const p=n.getHours(),v=n.getMinutes();if(l){const S=function(n){const e=(0,f.cg1)(n);return ti(e),(e[f.wAp.ExtraData][2]||[]).map(s=>"string"==typeof s?pr(s):[pr(s[0]),pr(s[1])])}(e),R=function(n,e,t){const s=(0,f.cg1)(n);ti(s);const l=In([s[f.wAp.ExtraData][0],s[f.wAp.ExtraData][1]],e)||[];return In(l,t)||[]}(e,a,s),P=S.findIndex(Y=>{if(Array.isArray(Y)){const[J,xe]=Y,je=p>=J.hours&&v>=J.minutes,Ke=p<xe.hours||p===xe.hours&&v<xe.minutes;if(J.hours<xe.hours){if(je&&Ke)return!0}else if(je||Ke)return!0}else if(Y.hours===p&&Y.minutes===v)return!0;return!1});if(-1!==P)return R[P]}return function(n,e,t){const s=(0,f.cg1)(n),l=In([s[f.wAp.DayPeriodsFormat],s[f.wAp.DayPeriodsStandalone]],e);return In(l,t)}(e,a,s)[p<12?0:1];case Qe.Eras:return function(n,e){return In((0,f.cg1)(n)[f.wAp.Eras],e)}(e,s)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(a,l,n,e,t,s)}}function se(n){return function(e,t,s){const a=-1*s,l=Nt(t,ge.MinusSign),p=a>0?Math.floor(a/60):Math.ceil(a/60);switch(n){case kt.Short:return(a>=0?"+":"")+Ar(p,2,l)+Ar(Math.abs(a%60),2,l);case kt.ShortGMT:return"GMT"+(a>=0?"+":"")+Ar(p,1,l);case kt.Long:return"GMT"+(a>=0?"+":"")+Ar(p,2,l)+":"+Ar(Math.abs(a%60),2,l);case kt.Extended:return 0===s?"Z":(a>=0?"+":"")+Ar(p,2,l)+":"+Ar(Math.abs(a%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function Xt(n){return fs(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Yt(n,e=!1){return function(t,s){let a;if(e){const l=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,p=t.getDate();a=1+Math.floor((p+l)/7)}else{const l=Xt(t),p=function(n){const e=fs(n,0,1).getDay();return fs(n,0,1+(e<=4?4:11)-e)}(l.getFullYear()),v=l.getTime()-p.getTime();a=1+Math.round(v/6048e5)}return Ar(a,n,Nt(s,ge.MinusSign))}}function Br(n,e=!1){return function(t,s){return Ar(Xt(t).getFullYear(),n,Nt(s,ge.MinusSign),e)}}const Dt={};function Jn(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Vu(n){return n instanceof Date&&!isNaN(n.valueOf())}class er{}let Tn=(()=>{class n extends er{constructor(t){super(),this.locale=t}getPluralCategory(t,s){switch(Tr(s||this.locale)(t)){case oe.Zero:return"zero";case oe.One:return"one";case oe.Two:return"two";case oe.Few:return"few";case oe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.soG))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class tl{constructor(e,t,s,a){this.$implicit=e,this.ngForOf=t,this.index=s,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Di=(()=>{class n{constructor(t,s,a){this._viewContainer=t,this._template=s,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const s=[];t.forEachOperation((a,l,p)=>{if(null==a.previousIndex){const v=this._viewContainer.createEmbeddedView(this._template,new tl(null,this._ngForOf,-1,-1),null===p?void 0:p),b=new Hn(a,v);s.push(b)}else if(null==p)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const v=this._viewContainer.get(l);this._viewContainer.move(v,p);const b=new Hn(a,v);s.push(b)}});for(let a=0;a<s.length;a++)this._perViewChange(s[a].view,s[a].record);for(let a=0,l=this._viewContainer.length;a<l;a++){const p=this._viewContainer.get(a);p.context.index=a,p.context.count=l,p.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,s){t.context.$implicit=s.item}static ngTemplateContextGuard(t,s){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Hn{constructor(e,t){this.record=e,this.view=t}}let Mf=(()=>{class n{constructor(t){this.locale=t}transform(t,s="mediumDate",a,l){if(null==t||""===t||t!=t)return null;try{return _n(t,s,l||this.locale,a)}catch(p){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,f.AaK)(n)}'`)}(n,p.message)}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16))},n.\u0275pipe=f.Yjl({name:"date",type:n,pure:!0}),n})(),Wg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[{provide:er,useClass:Tn}]}),n})();function _o(n){return"server"===n}let vo=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Gu((0,f.LFG)(Ee),window)}),n})();class Gu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const s=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=s.currentNode;for(;a;){const l=a.shadowRoot;if(l){const p=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(p)return p}a=s.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),s=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(s-l[0],a-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qa(this.window.history)||qa(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function qa(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class $s extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new $s,ee||(ee=n)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=($i=$i||document.querySelector("base"),$i?$i.getAttribute("href"):null);return null==t?null:function(n){Jo=Jo||document.createElement("a"),Jo.setAttribute("href",n);const e=Jo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$i=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const s=t.indexOf("="),[a,l]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Jo,$i=null;const qu=new f.OlP("TRANSITION_ID"),Wu=[{provide:f.ip1,useFactory:function(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const s=F(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)s.remove(a[l])})}},deps:[qu,Ee,f.zs3],multi:!0}];class bt{static init(){(0,f.VLi)(new bt)}addToWindow(e){f.dqk.getAngularTestability=(s,a=!0)=>{const l=e.findTestabilityInTree(s,a);if(null==l)throw new Error("Could not find testability for element.");return l},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(s=>{const a=f.dqk.getAllAngularTestabilities();let l=a.length,p=!1;const v=function(b){p=p||b,l--,0==l&&s(p)};a.forEach(function(b){b.whenStable(v)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:s?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Wd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ys=new f.OlP("EventManagerPlugins");let na=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,a){return this._findPluginFor(s).addEventListener(t,s,a)}addGlobalEventListener(t,s,a){return this._findPluginFor(s).addGlobalEventListener(t,s,a)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const a=this._plugins;for(let l=0;l<a.length;l++){const p=a[l];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ys),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Io{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const a=F().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,s)}}let al=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),_s=(()=>{class n extends al{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,a){t.forEach(l=>{const p=this._doc.createElement("style");p.textContent=l,a.push(s.appendChild(p))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(zd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(t,a,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(zd))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ee))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function zd(n){F().remove(n)}const Se={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Tt=/%COMP%/g;function Gs(n,e,t){for(let s=0;s<e.length;s++){let a=e[s];Array.isArray(a)?Gs(n,a,t):(a=a.replace(Tt,n),t.push(a))}return t}function Kd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ia=(()=>{class n{constructor(t,s,a){this.eventManager=t,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Gi(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case f.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new qi(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(t),a}case 1:case f.ifc.ShadowDom:return new vs(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const a=Gs(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(na),f.LFG(_s),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Gi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Se[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,a){if(a){t=a+":"+t;const l=Se[a];l?e.setAttributeNS(l,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const a=Se[s];a?e.removeAttributeNS(a,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,a){a&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,s,a&f.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Kd(s)):this.eventManager.addEventListener(e,t,Kd(s))}}class qi extends Gi{constructor(e,t,s,a){super(e),this.component=s;const l=Gs(a+"-"+s.id,s.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(Tt,a+"-"+s.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Tt,n)}(a+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class vs extends Gi{constructor(e,t,s,a){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Gs(a.id,a.styles,[]);for(let p=0;p<l.length;p++){const v=document.createElement("style");v.textContent=l[p],this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ka=(()=>{class n extends Io{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,a){return t.addEventListener(s,a,!1),()=>this.removeEventListener(t,s,a)}removeEventListener(t,s,a){return t.removeEventListener(s,a)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ee))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Do=["alt","control","meta","shift"],Ju={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xd={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Gr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wi=(()=>{class n extends Io{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,a){const l=n.parseEventName(s),p=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,l.domEventName,p))}static parseEventName(t){const s=t.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(s.pop());let p="";if(Do.forEach(b=>{const S=s.indexOf(b);S>-1&&(s.splice(S,1),p+=b+".")}),p+=l,0!=s.length||0===l.length)return null;const v={};return v.domEventName=a,v.fullKey=p,v}static getEventFullKey(t){let s="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Xd.hasOwnProperty(e)&&(e=Xd[e]))}return Ju[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Do.forEach(l=>{l!=a&&Gr[l](t)&&(s+=l+".")}),s+=a,s}static eventCallback(t,s,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>s(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ee))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const gl=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function(){$s.makeCurrent(),bt.init()},multi:!0},{provide:Ee,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),qs=[[],{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:ys,useClass:Ka,multi:!0,deps:[Ee,f.R0b,f.Lbi]},{provide:ys,useClass:Wi,multi:!0,deps:[Ee]},[],{provide:ia,useClass:ia,deps:[na,_s,f.AFp]},{provide:f.FYo,useExisting:ia},{provide:al,useExisting:_s},{provide:_s,useClass:_s,deps:[Ee]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:na,useClass:na,deps:[ys,f.R0b]},{provide:class{},useClass:Wd,deps:[]},[]];let Qa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:qu,useExisting:f.AFp},Wu]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:qs,imports:[Wg,f.hGG]}),n})();"undefined"!=typeof window&&window;var gn=V(4402),Xe=V(5917),zi=V(9765),bs=V(7971);class nr extends zi.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new bs.N;return this._value}next(e){super.next(this._value=e)}}var Ao=V(4869),zs=V(9796),Fn=V(7393);class ml extends Fn.L{notifyNext(e,t,s,a,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Kg extends Fn.L{constructor(e,t,s){super(),this.parent=e,this.outerValue=t,this.outerIndex=s,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var la=V(7444),ii=V(7574);function rh(n,e,t,s,a=new Kg(n,t,s)){if(!a.closed)return e instanceof ii.y?e.subscribe(a):(0,la.s)(e)(a)}var yl=V(6693);const ic={};class ha{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new sc(e,this.resultSelector))}}class sc extends ml{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(ic),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let s=0;s<t;s++)this.add(rh(this,e[s],void 0,s))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,s){const a=this.values,p=this.toRespond?a[s]===ic?--this.toRespond:this.toRespond:0;a[s]=t,0===p&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}const So=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var si=V(3282);function ac(...n){return(0,si.J)(1)((0,Xe.of)(...n))}var Zi=V(9193);function Is(n){return new ii.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,gn.D)(t):(0,Zi.c)()).subscribe(e)})}var Zs=V(2441),mt=V(8002),Cs=V(5345);function zn(n,e){return"function"==typeof e?t=>t.pipe(zn((s,a)=>(0,gn.D)(n(s,a)).pipe((0,mt.U)((l,p)=>e(s,l,a,p))))):t=>t.lift(new fa(n))}class fa{constructor(e){this.project=e}call(e,t){return t.subscribe(new Bf(e,this.project))}}class Bf extends Cs.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const s=this.index++;try{t=this.project(e,s)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const s=new Cs.IY(this),a=this.destination;a.add(s),this.innerSubscription=(0,Cs.ft)(e,s),this.innerSubscription!==s&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const _l=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function ih(n){return e=>0===n?(0,Zi.c)():e.lift(new vl(n))}class vl{constructor(e){if(this.total=e,this.total<0)throw new _l}call(e,t){return t.subscribe(new En(e,this.total))}}class En extends Fn.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,s=++this.count;s<=t&&(this.destination.next(e),s===t&&(this.destination.complete(),this.unsubscribe()))}}function pa(...n){const e=n[n.length-1];return(0,Ao.K)(e)?(n.pop(),t=>ac(n,t,e)):t=>ac(n,t)}function ga(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new sh(n,e,t))}}class sh{constructor(e,t,s=!1){this.accumulator=e,this.seed=t,this.hasSeed=s}call(e,t){return t.subscribe(new Qg(e,this.accumulator,this.seed,this.hasSeed))}}class Qg extends Fn.L{constructor(e,t,s,a){super(e),this.accumulator=t,this._seed=s,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let s;try{s=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=s,this.destination.next(s)}}function xi(n,e){return function(s){return s.lift(new iu(n,e))}}class iu{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new El(e,this.predicate,this.thisArg))}}class El extends Fn.L{constructor(e,t,s){super(e),this.predicate=t,this.thisArg=s,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(s){return void this.destination.error(s)}t&&this.destination.next(e)}}function Ks(n){return function(t){const s=new wl(n),a=t.lift(s);return s.caught=a}}class wl{constructor(e){this.selector=e}call(e,t){return t.subscribe(new ma(e,this.selector,this.caught))}}class ma extends Cs.Ds{constructor(e,t,s){super(e),this.selector=t,this.caught=s}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const s=new Cs.IY(this);this.add(s);const a=(0,Cs.ft)(t,s);a!==s&&this.add(a)}}}var wn=V(9773);function Ki(n,e){return(0,wn.zg)(n,e,1)}function jf(n){return function(t){return 0===n?(0,Zi.c)():t.lift(new Ln(n))}}class Ln{constructor(e){if(this.total=e,this.total<0)throw new _l}call(e,t){return t.subscribe(new uc(e,this.total))}}class uc extends Fn.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,s=this.total,a=this.count++;t.length<s?t.push(e):t[a%s]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const s=this.count>=this.total?this.total:this.count,a=this.ring;for(let l=0;l<s;l++){const p=t++%s;e.next(a[p])}}e.complete()}}function xo(n=oi){return e=>e.lift(new ya(n))}class ya{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new oh(e,this.errorFactory))}}class oh extends Fn.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function oi(){return new So}function qr(n=null){return e=>e.lift(new Yi(n))}class Yi{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Ds(e,this.defaultValue))}}class Ds extends Fn.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var _r=V(4487);function Ys(n,e){const t=arguments.length>=2;return s=>s.pipe(n?xi((a,l)=>n(a,l,s)):_r.y,ih(1),t?qr(e):xo(()=>new So))}var Rr=V(3342),ah=V(1307),$f=V(5319);class I{constructor(e){this.callback=e}call(e,t){return t.subscribe(new D(e,this.callback))}}class D extends Fn.L{constructor(e,t){super(e),this.add(new $f.w(t))}}class x{constructor(e,t){this.id=e,this.url=t}}class U extends x{constructor(e,t,s="imperative",a=null){super(e,t),this.navigationTrigger=s,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class K extends x{constructor(e,t,s){super(e,t),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pe extends x{constructor(e,t,s){super(e,t),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Me extends x{constructor(e,t,s){super(e,t),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class We extends x{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ge extends x{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mt extends x{constructor(e,t,s,a,l){super(e,t),this.urlAfterRedirects=s,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lt extends x{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zn extends x{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Kn{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class su{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ai{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ji{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ts{constructor(e,t,s){this.routerEvent=e,this.position=t,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const It="primary";class Il{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Cl(n){return new Il(n)}const Dl="ngNavigationCancelingError";function _a(n){const e=Error("NavigationCancelingError: "+n);return e[Dl]=!0,e}function z_(n,e,t){const s=t.path.split("/");if(s.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||s.length<n.length))return null;const a={};for(let l=0;l<s.length;l++){const p=s[l],v=n[l];if(p.startsWith(":"))a[p.substring(1)]=v;else if(p!==v.path)return null}return{consumed:n.slice(0,s.length),posParams:a}}function Ni(n,e){const t=n?Object.keys(n):void 0,s=e?Object.keys(e):void 0;if(!t||!s||t.length!=s.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!Z_(n[a],e[a]))return!1;return!0}function Z_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),s=[...e].sort();return t.every((a,l)=>s[l]===a)}return n===e}function va(n){return Array.prototype.concat.apply([],n)}function cc(n){return n.length>0?n[n.length-1]:null}function ir(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function As(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,gn.D)(Promise.resolve(n)):(0,Xe.of)(n)}const lc={exact:function Xg(n,e,t){if(!uu(n.segments,e.segments)||!Sl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const s in e.children)if(!n.children[s]||!Xg(n.children[s],e.children[s],t))return!1;return!0},subset:uh},Ri={exact:function(n,e){return Ni(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Z_(n[t],e[t]))},ignored:()=>!0};function Tl(n,e,t){return lc[t.paths](n.root,e.root,t.matrixParams)&&Ri[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function uh(n,e,t){return Al(n,e,e.segments,t)}function Al(n,e,t,s){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!uu(a,t)||e.hasChildren()||!Sl(a,t,s))}if(n.segments.length===t.length){if(!uu(n.segments,t)||!Sl(n.segments,t,s))return!1;for(const a in e.children)if(!n.children[a]||!uh(n.children[a],e.children[a],s))return!1;return!0}{const a=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(uu(n.segments,a)&&Sl(n.segments,a,s)&&n.children[It])&&Al(n.children[It],e,l,s)}}function Sl(n,e,t){return e.every((s,a)=>Ri[t](n[a].parameters,s.parameters))}class au{constructor(e,t,s){this.root=e,this.queryParams=t,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cl(this.queryParams)),this._queryParamMap}toString(){return jb.serialize(this)}}class At{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ir(t,(s,a)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lh(this)}}class Qs{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Cl(this.parameters)),this._parameterMap}toString(){return Y_(this)}}function uu(n,e){return n.length===e.length&&n.every((t,s)=>t.path===e[s].path)}class ch{}class Gf{parse(e){const t=new lu(e);return new au(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${Nl(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const s=n[t];return Array.isArray(s)?s.map(a=>`${No(t)}=${No(a)}`).join("&"):`${No(t)}=${No(s)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const jb=new Gf;function lh(n){return n.segments.map(e=>Y_(e)).join("/")}function Nl(n,e){if(!n.hasChildren())return lh(n);if(e){const t=n.children[It]?Nl(n.children[It],!1):"",s=[];return ir(n.children,(a,l)=>{l!==It&&s.push(`${l}:${Nl(a,!1)}`)}),s.length>0?`${t}(${s.join("//")})`:t}{const t=function(n,e){let t=[];return ir(n.children,(s,a)=>{a===It&&(t=t.concat(e(s,a)))}),ir(n.children,(s,a)=>{a!==It&&(t=t.concat(e(s,a)))}),t}(n,(s,a)=>a===It?[Nl(n.children[It],!1)]:[`${a}:${Nl(s,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[It]?`${lh(n)}/${t[0]}`:`${lh(n)}/(${t.join("//")})`}}function tm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function No(n){return tm(n).replace(/%3B/gi,";")}function Js(n){return tm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dh(n){return decodeURIComponent(n)}function Wf(n){return dh(n.replace(/\+/g,"%20"))}function Y_(n){return`${Js(n.path)}${function(n){return Object.keys(n).map(e=>`;${Js(e)}=${Js(n[e])}`).join("")}(n.parameters)}`}const Zf=/^[^\/()?;=#]+/;function hc(n){const e=n.match(Zf);return e?e[0]:""}const nm=/^[^=?&#]+/,Q_=/^[^?&#]+/;class lu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new At([],{}):new At([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(s[It]=new At(e,t)),s}parseSegment(){const e=hc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Qs(dh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=hc(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const a=hc(this.remaining);a&&(s=a,this.capture(s))}e[dh(t)]=dh(s)}parseQueryParam(e){const t=function(n){const e=n.match(nm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const p=function(n){const e=n.match(Q_);return e?e[0]:""}(this.remaining);p&&(s=p,this.capture(s))}const a=Wf(t),l=Wf(s);if(e.hasOwnProperty(a)){let p=e[a];Array.isArray(p)||(p=[p],e[a]=p),p.push(l)}else e[a]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=hc(this.remaining),a=this.remaining[s.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let l;s.indexOf(":")>-1?(l=s.substr(0,s.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=It);const p=this.parseChildren();t[l]=1===Object.keys(p).length?p[It]:new At([],p),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class rm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Kf(e,this._root);return t?t.children.map(s=>s.value):[]}firstChild(e){const t=Kf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Mi(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return Mi(e,this._root).map(t=>t.value)}}function Kf(n,e){if(n===e.value)return e;for(const t of e.children){const s=Kf(n,t);if(s)return s}return null}function Mi(n,e){if(n===e.value)return[e];for(const t of e.children){const s=Mi(n,t);if(s.length)return s.unshift(e),s}return[]}class ui{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function wa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class im extends rm{constructor(e,t){super(e),this.snapshot=t,Qf(this,e)}toString(){return this.snapshot.toString()}}function sm(n,e){const t=function(n,e){const p=new fh([],{},{},"",{},It,e,null,n.root,-1,{});return new am("",new ui(p,[]))}(n,e),s=new nr([new Qs("",{})]),a=new nr({}),l=new nr({}),p=new nr({}),v=new nr(""),b=new fc(s,a,p,v,l,It,e,t.root);return b.snapshot=t.root,new im(new ui(b,[]),t)}class fc{constructor(e,t,s,a,l,p,v,b){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=p,this.component=v,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>Cl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>Cl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function om(n,e="emptyOnly"){const t=n.pathFromRoot;let s=0;if("always"!==e)for(s=t.length-1;s>=1;){const a=t[s],l=t[s-1];if(a.routeConfig&&""===a.routeConfig.path)s--;else{if(l.component)break;s--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(s))}class fh{constructor(e,t,s,a,l,p,v,b,S,R,P){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=p,this.component=v,this.routeConfig=b,this._urlSegment=S,this._lastPathIndex=R,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class am extends rm{constructor(e,t){super(t),this.url=e,Qf(this,t)}toString(){return um(this._root)}}function Qf(n,e){e.value._routerState=n,e.children.forEach(t=>Qf(n,t))}function um(n){const e=n.children.length>0?` { ${n.children.map(um).join(", ")} } `:"";return`${n.value}${e}`}function cm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ni(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ni(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ni(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ni(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ph(n,e){return Ni(n.params,e.params)&&function(n,e){return uu(n,e)&&n.every((t,s)=>Ni(t.parameters,e[s].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||ph(n.parent,e.parent))}function Rl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const s=t.value;s._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(s=>{for(const a of t.children)if(n.shouldReuseRoute(s.value,a.value.snapshot))return Rl(n,s,a);return Rl(n,s)})}(n,e,t);return new ui(s,a)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const p=l.route;return Ss(e,p),p}}const s=function(n){return new fc(new nr(n.url),new nr(n.params),new nr(n.queryParams),new nr(n.fragment),new nr(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(l=>Rl(n,l));return new ui(s,a)}}function Ss(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Ss(n.children[t],e.children[t])}function Ml(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fu(n){return"object"==typeof n&&null!=n&&n.outlets}function dm(n,e,t,s,a){let l={};return s&&ir(s,(p,v)=>{l[v]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),new au(t.root===n?e:J_(t.root,n,e),l,a)}function J_(n,e,t){const s={};return ir(n.children,(a,l)=>{s[l]=a===e?t:J_(a,e,t)}),new At(n.segments,s)}class mh{constructor(e,t,s){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=s,e&&s.length>0&&Ml(s[0]))throw new Error("Root segment cannot have matrix parameters");const a=s.find(fu);if(a&&a!==cc(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ol{constructor(e,t,s){this.segmentGroup=e,this.processChildren=t,this.index=s}}function Pl(n,e,t){if(n||(n=new At([],{})),0===n.segments.length&&n.hasChildren())return _h(n,e,t);const s=function(n,e,t){let s=0,a=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(s>=t.length)return l;const p=n.segments[a],v=t[s];if(fu(v))break;const b=`${v}`,S=s<t.length-1?t[s+1]:null;if(a>0&&void 0===b)break;if(b&&S&&"object"==typeof S&&void 0===S.outlets){if(!Xf(b,S,p))return l;s+=2}else{if(!Xf(b,{},p))return l;s++}a++}return{match:!0,pathIndex:a,commandIndex:s}}(n,e,t),a=t.slice(s.commandIndex);if(s.match&&s.pathIndex<n.segments.length){const l=new At(n.segments.slice(0,s.pathIndex),{});return l.children[It]=new At(n.segments.slice(s.pathIndex),n.children),_h(l,0,a)}return s.match&&0===a.length?new At(n.segments,{}):s.match&&!n.hasChildren()?Jf(n,e,t):s.match?_h(n,0,a):Jf(n,e,t)}function _h(n,e,t){if(0===t.length)return new At(n.segments,{});{const s=function(n){return fu(n[0])?n[0].outlets:{[It]:n}}(t),a={};return ir(s,(l,p)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[p]=Pl(n.children[p],e,l))}),ir(n.children,(l,p)=>{void 0===s[p]&&(a[p]=l)}),new At(n.segments,a)}}function Jf(n,e,t){const s=n.segments.slice(0,e);let a=0;for(;a<t.length;){const l=t[a];if(fu(l)){const b=pm(l.outlets);return new At(s,b)}if(0===a&&Ml(t[0])){s.push(new Qs(n.segments[e].path,kl(t[0]))),a++;continue}const p=fu(l)?l.outlets[It]:`${l}`,v=a<t.length-1?t[a+1]:null;p&&v&&Ml(v)?(s.push(new Qs(p,kl(v))),a+=2):(s.push(new Qs(p,{})),a++)}return new At(s,{})}function pm(n){const e={};return ir(n,(t,s)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[s]=Jf(new At([],{}),0,t))}),e}function kl(n){const e={};return ir(n,(t,s)=>e[s]=`${t}`),e}function Xf(n,e,t){return n==t.path&&Ni(e,t.parameters)}class ep{constructor(e,t,s,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=s,this.forwardEvent=a}activate(e){const t=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,s,e),cm(this.futureState.root),this.activateChildRoutes(t,s,e)}deactivateChildRoutes(e,t,s){const a=wa(t);e.children.forEach(l=>{const p=l.value.outlet;this.deactivateRoutes(l,a[p],s),delete a[p]}),ir(a,(l,p)=>{this.deactivateRouteAndItsChildren(l,s)})}deactivateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(a===l)if(a.component){const p=s.getContext(a.outlet);p&&this.deactivateChildRoutes(e,t,p.children)}else this.deactivateChildRoutes(e,t,s);else l&&this.deactivateRouteAndItsChildren(t,s)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const s=t.getContext(e.value.outlet);if(s&&s.outlet){const a=s.outlet.detach(),l=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const s=t.getContext(e.value.outlet),a=s&&e.value.component?s.children:t,l=wa(e);for(const p of Object.keys(l))this.deactivateRouteAndItsChildren(l[p],a);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(e,t,s){const a=wa(t);e.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],s),this.forwardEvent(new Ji(l.value.snapshot))}),e.children.length&&this.forwardEvent(new su(e.value.snapshot))}activateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(cm(a),a===l)if(a.component){const p=s.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,p.children)}else this.activateChildRoutes(e,t,s);else if(a.component){const p=s.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const v=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),p.children.onOutletReAttached(v.contexts),p.attachRef=v.componentRef,p.route=v.route.value,p.outlet&&p.outlet.attach(v.componentRef,v.route.value),mn(v.route)}else{const v=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),b=v?v.module.componentFactoryResolver:null;p.attachRef=null,p.route=a,p.resolver=b,p.outlet&&p.outlet.activateWith(a,b),this.activateChildRoutes(e,null,p.children)}}else this.activateChildRoutes(e,null,s)}}function mn(n){cm(n.value),n.children.forEach(mn)}class tp{constructor(e,t){this.routes=e,this.module=t}}function Xi(n){return"function"==typeof n}function xs(n){return n instanceof au}const Eh=Symbol("INITIAL_VALUE");function Fl(){return zn(n=>function(...n){let e,t;return(0,Ao.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,zs.k)(n[0])&&(n=n[0]),(0,yl.n)(n,t).lift(new ha(e))}(n.map(e=>e.pipe(ih(1),pa(Eh)))).pipe(ga((e,t)=>{let s=!1;return t.reduce((a,l,p)=>a!==Eh?a:(l===Eh&&(s=!0),s||!1!==l&&p!==t.length-1&&!xs(l)?a:l),e)},Eh),xi(e=>e!==Eh),(0,mt.U)(e=>xs(e)?e:!0===e),ih(1)))}let pc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,s){1&t&&f._UZ(0,"router-outlet")},directives:function(){return[Sm]},encapsulation:2}),n})();function Cn(n,e=""){for(let t=0;t<n.length;t++){const s=n[t];wh(s,ym(e,s))}}function wh(n,e){n.children&&Cn(n.children,e)}function ym(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function bh(n){const e=n.children&&n.children.map(bh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==It&&(t.component=pc),t}function nn(n){return n.outlet||It}function pu(n,e){const t=n.filter(s=>nn(s)===e);return t.push(...n.filter(s=>nn(s)!==e)),t}const vr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function gc(n,e,t){var s;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},vr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||z_)(t,n,e);if(!l)return Object.assign({},vr);const p={};ir(l.posParams,(b,S)=>{p[S]=b.path});const v=l.consumed.length>0?Object.assign(Object.assign({},p),l.consumed[l.consumed.length-1].parameters):p;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:v,positionalParamSegments:null!==(s=l.posParams)&&void 0!==s?s:{}}}function mc(n,e,t,s,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(s=>_c(n,e,s)&&nn(s)!==It)}(n,t,s)){const p=new At(e,function(n,e,t,s){const a={};a[It]=s,s._sourceSegment=n,s._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&nn(l)!==It){const p=new At([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,a[nn(l)]=p}return a}(n,e,s,new At(t,n.children)));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(s=>_c(n,e,s))}(n,t,s)){const p=new At(n.segments,function(n,e,t,s,a,l){const p={};for(const v of s)if(_c(n,t,v)&&!a[nn(v)]){const b=new At([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===l?n.segments.length:e.length,p[nn(v)]=b}return Object.assign(Object.assign({},a),p)}(n,e,t,s,n.children,a));return p._sourceSegment=n,p._segmentIndexShift=e.length,{segmentGroup:p,slicedSegments:t}}const l=new At(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function _c(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ih(n,e,t,s){return!!(nn(n)===s||s!==It&&_c(e,t,n))&&("**"===n.path||gc(e,n,t).matched)}function Em(n,e,t){return 0===e.length&&!n.children[t]}class Ll{constructor(e){this.segmentGroup=e||null}}class ip{constructor(e){this.urlTree=e}}function vc(n){return new ii.y(e=>e.error(new Ll(n)))}function _(n){return new ii.y(e=>e.error(new ip(n)))}function h(n){return new ii.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class A{constructor(e,t,s,a,l){this.configLoader=t,this.urlSerializer=s,this.urlTree=a,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=mc(this.urlTree.root,[],[],this.config).segmentGroup,t=new At(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,It).pipe((0,mt.U)(l=>this.createUrlTree(z(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ks(l=>{if(l instanceof ip)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Ll?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,It).pipe((0,mt.U)(a=>this.createUrlTree(z(a),e.queryParams,e.fragment))).pipe(Ks(a=>{throw a instanceof Ll?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,s){const a=e.segments.length>0?new At([],{[It]:e}):e;return new au(a,t,s)}expandSegmentGroup(e,t,s,a){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(e,t,s).pipe((0,mt.U)(l=>new At([],l))):this.expandSegment(e,s,t,s.segments,a,!0)}expandChildren(e,t,s){const a=[];for(const l of Object.keys(s.children))"primary"===l?a.unshift(l):a.push(l);return(0,gn.D)(a).pipe(Ki(l=>{const p=s.children[l],v=pu(t,l);return this.expandSegmentGroup(e,v,p,l).pipe((0,mt.U)(b=>({segment:b,outlet:l})))}),ga((l,p)=>(l[p.outlet]=p.segment,l),{}),function(n,e){const t=arguments.length>=2;return s=>s.pipe(n?xi((a,l)=>n(a,l,s)):_r.y,jf(1),t?qr(e):xo(()=>new So))}())}expandSegment(e,t,s,a,l,p){return(0,gn.D)(s).pipe(Ki(v=>this.expandSegmentAgainstRoute(e,t,s,v,a,l,p).pipe(Ks(S=>{if(S instanceof Ll)return(0,Xe.of)(null);throw S}))),Ys(v=>!!v),Ks((v,b)=>{if(v instanceof So||"EmptyError"===v.name){if(Em(t,a,l))return(0,Xe.of)(new At([],{}));throw new Ll(t)}throw v}))}expandSegmentAgainstRoute(e,t,s,a,l,p,v){return Ih(a,t,l,p)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,l,p):v&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p):vc(t):vc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,s,a,p):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,s,a){const l=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?_(l):this.lineralizeSegments(s,l).pipe((0,wn.zg)(p=>{const v=new At(p,{});return this.expandSegment(e,v,t,p,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,p){const{matched:v,consumedSegments:b,lastChild:S,positionalParamSegments:R}=gc(t,a,l);if(!v)return vc(t);const P=this.applyRedirectCommands(b,a.redirectTo,R);return a.redirectTo.startsWith("/")?_(P):this.lineralizeSegments(a,P).pipe((0,wn.zg)(Y=>this.expandSegment(e,t,s,Y.concat(l.slice(S)),p,!1)))}matchSegmentAgainstRoute(e,t,s,a,l){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,Xe.of)(s._loadedConfig):this.configLoader.load(e.injector,s)).pipe((0,mt.U)(Y=>(s._loadedConfig=Y,new At(a,{})))):(0,Xe.of)(new At(a,{}));const{matched:p,consumedSegments:v,lastChild:b}=gc(t,s,a);if(!p)return vc(t);const S=a.slice(b);return this.getChildConfig(e,s,a).pipe((0,wn.zg)(P=>{const Y=P.module,J=P.routes,{segmentGroup:xe,slicedSegments:je}=mc(t,v,S,J),Ke=new At(xe.segments,xe.children);if(0===je.length&&Ke.hasChildren())return this.expandChildren(Y,J,Ke).pipe((0,mt.U)(Vt=>new At(v,Vt)));if(0===J.length&&0===je.length)return(0,Xe.of)(new At(v,{}));const Pt=nn(s)===l;return this.expandSegment(Y,Ke,J,je,Pt?It:l,!0).pipe((0,mt.U)(Rn=>new At(v.concat(Rn.segments),Rn.children)))}))}getChildConfig(e,t,s){return t.children?(0,Xe.of)(new tp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Xe.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,s).pipe((0,wn.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,mt.U)(l=>(t._loadedConfig=l,l))):(n=t,new ii.y(e=>e.error(_a(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,Xe.of)(new tp([],e))}runCanLoadGuards(e,t,s){const a=t.canLoad;if(!a||0===a.length)return(0,Xe.of)(!0);const l=a.map(p=>{const v=e.get(p);let b;if((n=v)&&Xi(n.canLoad))b=v.canLoad(t,s);else{if(!Xi(v))throw new Error("Invalid CanLoad guard");b=v(t,s)}var n;return As(b)});return(0,Xe.of)(l).pipe(Fl(),(0,Rr.b)(p=>{if(!xs(p))return;const v=_a(`Redirecting to "${this.urlSerializer.serialize(p)}"`);throw v.url=p,v}),(0,mt.U)(p=>!0===p))}lineralizeSegments(e,t){let s=[],a=t.root;for(;;){if(s=s.concat(a.segments),0===a.numberOfChildren)return(0,Xe.of)(s);if(a.numberOfChildren>1||!a.children[It])return h(e.redirectTo);a=a.children[It]}}applyRedirectCommands(e,t,s){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,s)}applyRedirectCreatreUrlTree(e,t,s,a){const l=this.createSegmentGroup(e,t.root,s,a);return new au(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const s={};return ir(e,(a,l)=>{if("string"==typeof a&&a.startsWith(":")){const v=a.substring(1);s[l]=t[v]}else s[l]=a}),s}createSegmentGroup(e,t,s,a){const l=this.createSegments(e,t.segments,s,a);let p={};return ir(t.children,(v,b)=>{p[b]=this.createSegmentGroup(e,v,s,a)}),new At(l,p)}createSegments(e,t,s,a){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,a):this.findOrReturn(l,s))}findPosParam(e,t,s){const a=s[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let s=0;for(const a of t){if(a.path===e.path)return t.splice(s),a;s++}return e}}function z(n){const e={};for(const s of Object.keys(n.children)){const l=z(n.children[s]);(l.segments.length>0||l.hasChildren())&&(e[s]=l)}return function(n){if(1===n.numberOfChildren&&n.children[It]){const e=n.children[It];return new At(n.segments.concat(e.segments),e.children)}return n}(new At(n.segments,e))}class Ue{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ze{constructor(e,t){this.component=e,this.route=t}}function lt(n,e,t){const s=n._root;return Yn(s,e?e._root:null,t,[s.value])}function An(n,e,t){const s=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(s?s.module.injector:t).get(n)}function Yn(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=wa(e);return n.children.forEach(p=>{(function(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,p=e?e.value:null,v=t?t.getContext(n.value.outlet):null;if(p&&l.routeConfig===p.routeConfig){const b=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!uu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!uu(n.url,e.url)||!Ni(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ph(n,e)||!Ni(n.queryParams,e.queryParams);case"paramsChange":default:return!ph(n,e)}}(p,l,l.routeConfig.runGuardsAndResolvers);b?a.canActivateChecks.push(new Ue(s)):(l.data=p.data,l._resolvedData=p._resolvedData),Yn(n,e,l.component?v?v.children:null:t,s,a),b&&v&&v.outlet&&v.outlet.isActivated&&a.canDeactivateChecks.push(new ze(v.outlet.component,p))}else p&&Ec(e,v,a),a.canActivateChecks.push(new Ue(s)),Yn(n,null,l.component?v?v.children:null:t,s,a)})(p,l[p.value.outlet],t,s.concat([p.value]),a),delete l[p.value.outlet]}),ir(l,(p,v)=>Ec(p,t.getContext(v),a)),a}function Ec(n,e,t){const s=wa(n),a=n.value;ir(s,(l,p)=>{Ec(l,a.component?e?e.children.getContext(p):null:e,t)}),t.canDeactivateChecks.push(new ze(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class qb{}function vT(n){return new ii.y(e=>e.error(n))}class fN{constructor(e,t,s,a,l,p){this.rootComponentType=e,this.config=t,this.urlTree=s,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=p}recognize(){const e=mc(this.urlTree.root,[],[],this.config.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,It);if(null===t)return null;const s=new fh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},It,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new ui(s,t),l=new am(this.url,a);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,s=om(t,this.paramsInheritanceStrategy);t.params=Object.freeze(s.params),t.data=Object.freeze(s.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,s){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,s)}processChildren(e,t){const s=[];for(const l of Object.keys(t.children)){const p=t.children[l],v=pu(e,l),b=this.processSegmentGroup(v,p,l);if(null===b)return null;s.push(...b)}const a=zb(s);return a.sort((e,t)=>e.value.outlet===It?-1:t.value.outlet===It?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,s,a){for(const l of e){const p=this.processSegmentAgainstRoute(l,t,s,a);if(null!==p)return p}return Em(t,s,a)?[]:null}processSegmentAgainstRoute(e,t,s,a){if(e.redirectTo||!Ih(e,t,s,a))return null;let l,p=[],v=[];if("**"===e.path){const J=s.length>0?cc(s).parameters:{};l=new fh(s,J,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rv(e),nn(e),e.component,e,Ch(t),nv(t)+s.length,Cm(e))}else{const J=gc(t,e,s);if(!J.matched)return null;p=J.consumedSegments,v=s.slice(J.lastChild),l=new fh(p,J.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rv(e),nn(e),e.component,e,Ch(t),nv(t)+p.length,Cm(e))}const b=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:S,slicedSegments:R}=mc(t,p,v,b.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);var n;if(0===R.length&&S.hasChildren()){const J=this.processChildren(b,S);return null===J?null:[new ui(l,J)]}if(0===b.length&&0===R.length)return[new ui(l,[])];const P=nn(e)===a,Y=this.processSegment(b,S,R,P?It:a);return null===Y?null:[new ui(l,Y)]}}function tv(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function zb(n){const e=[],t=new Set;for(const s of n){if(!tv(s)){e.push(s);continue}const a=e.find(l=>s.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...s.children),t.add(a)):e.push(s)}for(const s of t){const a=zb(s.children);e.push(new ui(s.value,a))}return e.filter(s=>!t.has(s))}function Ch(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function nv(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function rv(n){return n.data||{}}function Cm(n){return n.resolve||{}}function Dm(n){return zn(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,mt.U)(()=>e)):(0,Xe.of)(e)})}class bT extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const av=new f.OlP("ROUTES");class Kb{constructor(e,t,s,a){this.loader=e,this.compiler=t,this.onLoadStartListener=s,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,mt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const p=l.create(e);return new tp(va(p.injector.get(av,void 0,f.XFs.Self|f.XFs.Optional)).map(bh),p)}),Ks(l=>{throw t._loader$=void 0,l}));return t._loader$=new Zs.c(a,()=>new zi.xQ).pipe((0,ah.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,gn.D)(this.loader.load(e)):As(e()).pipe((0,wn.zg)(t=>t instanceof f.YKP?(0,Xe.of)(t):(0,gn.D)(this.compiler.compileModuleAsync(t))))}}class IT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Th,this.attachRef=null}}class Th{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const s=this.getOrCreateContext(e);s.outlet=t,this.contexts.set(e,s)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new IT,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Yb{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function uv(n){throw n}function Qb(n,e,t){return e.parse("/")}function Tm(n,e){return(0,Xe.of)(null)}const DT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mr=(()=>{class n{constructor(t,s,a,l,p,v,b,S){this.rootComponentType=t,this.urlSerializer=s,this.rootContexts=a,this.location=l,this.config=S,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new zi.xQ,this.errorHandler=uv,this.malformedUriErrorHandler=Qb,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Tm,afterPreactivation:Tm},this.urlHandlingStrategy=new Yb,this.routeReuseStrategy=new bT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=p.get(f.h0i),this.console=p.get(f.c2e);const Y=p.get(f.R0b);this.isNgZoneEnabled=Y instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(S),this.currentUrlTree=new au(new At([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Kb(v,b,J=>this.triggerEvent(new rr(J)),J=>this.triggerEvent(new Kn(J))),this.routerState=sm(this.currentUrlTree,this.rootComponentType),this.transitions=new nr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const s=this.events;return t.pipe(xi(a=>0!==a.id),(0,mt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),zn(a=>{let l=!1,p=!1;return(0,Xe.of)(a).pipe((0,Rr.b)(v=>{this.currentNavigation={id:v.id,initialUrl:v.currentRawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),zn(v=>{const b=this.browserUrlTree.toString(),S=!this.navigated||v.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||S)&&this.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return Ia(v.source)&&(this.browserUrlTree=v.extractedUrl),(0,Xe.of)(v).pipe(zn(P=>{const Y=this.transitions.getValue();return s.next(new U(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),Y!==this.transitions.getValue()?Zi.E:Promise.resolve(P)}),function(n,e,t,s){return zn(a=>function(n,e,t,s,a){return new A(n,e,t,s,a).apply()}(n,e,t,a.extractedUrl,s).pipe((0,mt.U)(l=>Object.assign(Object.assign({},a),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Rr.b)(P=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:P.urlAfterRedirects})}),function(n,e,t,s,a){return(0,wn.zg)(l=>function(n,e,t,s,a="emptyOnly",l="legacy"){try{const p=new fN(n,e,t,s,a,l).recognize();return null===p?vT(new qb):(0,Xe.of)(p)}catch(p){return vT(p)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),s,a).pipe((0,mt.U)(p=>Object.assign(Object.assign({},l),{targetSnapshot:p}))))}(this.rootComponentType,this.config,P=>this.serializeUrl(P),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Rr.b)(P=>{"eager"===this.urlUpdateStrategy&&(P.extras.skipLocationChange||this.setBrowserUrl(P.urlAfterRedirects,P),this.browserUrlTree=P.urlAfterRedirects);const Y=new We(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);s.next(Y)}));if(S&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Y,extractedUrl:J,source:xe,restoredState:je,extras:Ke}=v,Pt=new U(Y,this.serializeUrl(J),xe,je);s.next(Pt);const sn=sm(J,this.rootComponentType).snapshot;return(0,Xe.of)(Object.assign(Object.assign({},v),{targetSnapshot:sn,urlAfterRedirects:J,extras:Object.assign(Object.assign({},Ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=v.rawUrl,this.browserUrlTree=v.urlAfterRedirects,v.resolve(null),Zi.E}),Dm(v=>{const{targetSnapshot:b,id:S,extractedUrl:R,rawUrl:P,extras:{skipLocationChange:Y,replaceUrl:J}}=v;return this.hooks.beforePreactivation(b,{navigationId:S,appliedUrlTree:R,rawUrlTree:P,skipLocationChange:!!Y,replaceUrl:!!J})}),(0,Rr.b)(v=>{const b=new Ge(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),(0,mt.U)(v=>Object.assign(Object.assign({},v),{guards:lt(v.targetSnapshot,v.currentSnapshot,this.rootContexts)})),function(n,e){return(0,wn.zg)(t=>{const{targetSnapshot:s,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:p}}=t;return 0===p.length&&0===l.length?(0,Xe.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,s){return(0,gn.D)(n).pipe((0,wn.zg)(a=>function(n,e,t,s,a){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,Xe.of)(!0);const p=l.map(v=>{const b=An(v,e,a);let S;if(function(n){return n&&Xi(n.canDeactivate)}(b))S=As(b.canDeactivate(n,e,t,s));else{if(!Xi(b))throw new Error("Invalid CanDeactivate guard");S=As(b(n,e,t,s))}return S.pipe(Ys())});return(0,Xe.of)(p).pipe(Fl())}(a.component,a.route,t,e,s)),Ys(a=>!0!==a,!0))}(p,s,a,n).pipe((0,wn.zg)(v=>v&&function(n){return"boolean"==typeof n}(v)?function(n,e,t,s){return(0,gn.D)(e).pipe(Ki(a=>ac(function(n,e){return null!==n&&e&&e(new Qi(n)),(0,Xe.of)(!0)}(a.route.parent,s),function(n,e){return null!==n&&e&&e(new ai(n)),(0,Xe.of)(!0)}(a.route,s),function(n,e,t){const s=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(p=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(p)).filter(p=>null!==p).map(p=>Is(()=>{const v=p.guards.map(b=>{const S=An(b,p.node,t);let R;if(function(n){return n&&Xi(n.canActivateChild)}(S))R=As(S.canActivateChild(s,n));else{if(!Xi(S))throw new Error("Invalid CanActivateChild guard");R=As(S(s,n))}return R.pipe(Ys())});return(0,Xe.of)(v).pipe(Fl())}));return(0,Xe.of)(l).pipe(Fl())}(n,a.path,t),function(n,e,t){const s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||0===s.length)return(0,Xe.of)(!0);const a=s.map(l=>Is(()=>{const p=An(l,e,t);let v;if(function(n){return n&&Xi(n.canActivate)}(p))v=As(p.canActivate(e,n));else{if(!Xi(p))throw new Error("Invalid CanActivate guard");v=As(p(e,n))}return v.pipe(Ys())}));return(0,Xe.of)(a).pipe(Fl())}(n,a.route,t))),Ys(a=>!0!==a,!0))}(s,l,n,e):(0,Xe.of)(v)),(0,mt.U)(v=>Object.assign(Object.assign({},t),{guardsResult:v})))})}(this.ngModule.injector,v=>this.triggerEvent(v)),(0,Rr.b)(v=>{if(xs(v.guardsResult)){const S=_a(`Redirecting to "${this.serializeUrl(v.guardsResult)}"`);throw S.url=v.guardsResult,S}const b=new Mt(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.triggerEvent(b)}),xi(v=>!!v.guardsResult||(this.restoreHistory(v),this.cancelNavigationTransition(v,""),!1)),Dm(v=>{if(v.guards.canActivateChecks.length)return(0,Xe.of)(v).pipe((0,Rr.b)(b=>{const S=new Lt(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(S)}),zn(b=>{let S=!1;return(0,Xe.of)(b).pipe(function(n,e){return(0,wn.zg)(t=>{const{targetSnapshot:s,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,Xe.of)(t);let l=0;return(0,gn.D)(a).pipe(Ki(p=>function(n,e,t,s){return function(n,e,t,s){const a=Object.keys(n);if(0===a.length)return(0,Xe.of)({});const l={};return(0,gn.D)(a).pipe((0,wn.zg)(p=>function(n,e,t,s){const a=An(n,e,s);return As(a.resolve?a.resolve(e,t):a(e,t))}(n[p],e,t,s).pipe((0,Rr.b)(v=>{l[p]=v}))),jf(1),(0,wn.zg)(()=>Object.keys(l).length===a.length?(0,Xe.of)(l):Zi.E))}(n._resolve,n,e,s).pipe((0,mt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),om(n,t).resolve),null)))}(p.route,s,n,e)),(0,Rr.b)(()=>l++),jf(1),(0,wn.zg)(p=>l===a.length?(0,Xe.of)(t):Zi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Rr.b)({next:()=>S=!0,complete:()=>{S||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,Rr.b)(b=>{const S=new Zn(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(S)}))}),Dm(v=>{const{targetSnapshot:b,id:S,extractedUrl:R,rawUrl:P,extras:{skipLocationChange:Y,replaceUrl:J}}=v;return this.hooks.afterPreactivation(b,{navigationId:S,appliedUrlTree:R,rawUrlTree:P,skipLocationChange:!!Y,replaceUrl:!!J})}),(0,mt.U)(v=>{const b=function(n,e,t){const s=Rl(n,e._root,t?t._root:void 0);return new im(s,e)}(this.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return Object.assign(Object.assign({},v),{targetRouterState:b})}),(0,Rr.b)(v=>{this.currentUrlTree=v.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl),this.routerState=v.targetRouterState,"deferred"===this.urlUpdateStrategy&&(v.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,v),this.browserUrlTree=v.urlAfterRedirects)}),((n,e,t)=>(0,mt.U)(s=>(new ep(e,s.targetRouterState,s.currentRouterState,t).activate(n),s)))(this.rootContexts,this.routeReuseStrategy,v=>this.triggerEvent(v)),(0,Rr.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new I(n))}(()=>{var v;if(!l&&!p){const b=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,b)):this.cancelNavigationTransition(a,b)}(null===(v=this.currentNavigation)||void 0===v?void 0:v.id)===a.id&&(this.currentNavigation=null)}),Ks(v=>{if(p=!0,function(n){return n&&n[Dl]}(v)){const b=xs(v.url);b||(this.navigated=!0,this.restoreHistory(a,!0));const S=new pe(a.id,this.serializeUrl(a.extractedUrl),v.message);s.next(S),b?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(v.url,this.rawUrlTree),P={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ia(a.source)};this.scheduleNavigation(R,"imperative",null,P,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const b=new Me(a.id,this.serializeUrl(a.extractedUrl),v);s.next(b);try{a.resolve(this.errorHandler(v))}catch(S){a.reject(S)}}return Zi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const s=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:a,state:l,urlTree:p}=s,v={replaceUrl:!0};if(l){const b=Object.assign({},l);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(v.state=b)}this.scheduleNavigation(p,a,l,v)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(t){var s;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,s){if(!t)return!0;const a=s.urlTree.toString()===t.urlTree.toString();return s.transitionId!==t.transitionId||!a||!("hashchange"===s.source&&"popstate"===t.source||"popstate"===s.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Cn(t),this.config=t.map(bh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,s={}){const{relativeTo:a,queryParams:l,fragment:p,queryParamsHandling:v,preserveFragment:b}=s,S=a||this.routerState.root,R=b?this.currentUrlTree.fragment:p;let P=null;switch(v){case"merge":P=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=l||null}return null!==P&&(P=this.removeEmptyProps(P)),function(n,e,t,s,a){if(0===t.length)return dm(e.root,e.root,e,s,a);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mh(!0,0,n);let e=0,t=!1;const s=n.reduce((a,l,p)=>{if("object"==typeof l&&null!=l){if(l.outlets){const v={};return ir(l.outlets,(b,S)=>{v[S]="string"==typeof b?b.split("/"):b}),[...a,{outlets:v}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===p?(l.split("/").forEach((v,b)=>{0==b&&"."===v||(0==b&&""===v?t=!0:".."===v?e++:""!=v&&a.push(v))}),a):[...a,l]},[]);return new mh(t,e,s)}(t);if(l.toRoot())return dm(e.root,new At([],{}),e,s,a);const p=function(n,e,t){if(n.isAbsolute)return new Ol(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new Ol(l,l===e.root,0)}const s=Ml(n.commands[0])?0:1;return function(n,e,t){let s=n,a=e,l=t;for(;l>a;){if(l-=a,s=s.parent,!s)throw new Error("Invalid number of '../'");a=s.segments.length}return new Ol(s,!1,a-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+s,n.numberOfDoubleDots)}(l,e,n),v=p.processChildren?_h(p.segmentGroup,p.index,l.commands):Pl(p.segmentGroup,p.index,l.commands);return dm(p.segmentGroup,v,e,s,a)}(S,this.currentUrlTree,t,P,null!=R?R:null)}navigateByUrl(t,s={skipLocationChange:!1}){const a=xs(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,s)}navigate(t,s={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let s;try{s=this.urlSerializer.parse(t)}catch(a){s=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return s}isActive(t,s){let a;if(a=!0===s?Object.assign({},DT):!1===s?Object.assign({},TT):s,xs(t))return Tl(this.currentUrlTree,t,a);const l=this.parseUrl(t);return Tl(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.keys(t).reduce((s,a)=>{const l=t[a];return null!=l&&(s[a]=l),s},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new K(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,s,a,l,p){var v,b;if(this.disposed)return Promise.resolve(!1);const S=this.getTransition(),R=Ia(s)&&S&&!Ia(S.source),J=(this.lastSuccessfulId===S.id||this.currentNavigation?S.rawUrl:S.urlAfterRedirects).toString()===t.toString();if(R&&J)return Promise.resolve(!0);let xe,je,Ke;p?(xe=p.resolve,je=p.reject,Ke=p.promise):Ke=new Promise((Rn,Vt)=>{xe=Rn,je=Vt});const Pt=++this.navigationId;let sn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),sn=a&&a.\u0275routerPageId?a.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(v=this.browserPageId)&&void 0!==v?v:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):sn=0,this.setTransition({id:Pt,targetPageId:sn,source:s,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:xe,reject:je,promise:Ke,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ke.catch(Rn=>Promise.reject(Rn))}setBrowserUrl(t,s){const a=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(a)||s.extras.replaceUrl?this.location.replaceState(a,"",l):this.location.go(a,"",l)}restoreHistory(t,s=!1){var a,l;if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===p?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===p&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(p)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,s){const a=new pe(t.id,this.serializeUrl(t.extractedUrl),s);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,s){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.DyG),f.LFG(ch),f.LFG(Th),f.LFG(Fe),f.LFG(f.zs3),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Ia(n){return"imperative"!==n}let lp=(()=>{class n{constructor(t,s,a,l,p){this.router=t,this.route=s,this.commands=[],this.onChanges=new zi.xQ,null==a&&l.setAttribute(p.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Ah(this.skipLocationChange),replaceUrl:Ah(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ah(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mr),f.Y36(fc),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,s){1&t&&f.NdJ("click",function(){return s.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})(),dp=(()=>{class n{constructor(t,s,a){this.router=t,this.route=s,this.locationStrategy=a,this.commands=[],this.onChanges=new zi.xQ,this.subscription=t.events.subscribe(l=>{l instanceof K&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,s,a,l,p){if(0!==t||s||a||l||p||"string"==typeof this.target&&"_self"!=this.target)return!0;const v={skipLocationChange:Ah(this.skipLocationChange),replaceUrl:Ah(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,v),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ah(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mr),f.Y36(fc),f.Y36(G))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,s){1&t&&f.NdJ("click",function(l){return s.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&(f.Ikx("href",s.href,f.LSH),f.uIk("target",s.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),n})();function Ah(n){return""===n||!!n}let Sm=(()=>{class n{constructor(t,s,a,l,p){this.parentContexts=t,this.location=s,this.resolver=a,this.changeDetector=p,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.name=l||It,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const p=(s=s||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),v=this.parentContexts.getOrCreateContext(this.name).children,b=new Xb(t,v,this.location.injector);this.activated=this.location.createComponent(p,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Th),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Xb{constructor(e,t,s){this.route=e,this.childContexts=t,this.parent=s}get(e,t){return e===fc?this.route:e===Th?this.childContexts:this.parent.get(e,t)}}class cv{}class dv{preload(e,t){return(0,Xe.of)(null)}}let hp=(()=>{class n{constructor(t,s,a,l,p){this.router=t,this.injector=l,this.preloadingStrategy=p,this.loader=new Kb(s,a,S=>t.triggerEvent(new rr(S)),S=>t.triggerEvent(new Kn(S)))}setUpPreloading(){this.subscription=this.router.events.pipe(xi(t=>t instanceof K),Ki(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){const a=[];for(const l of s)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const p=l._loadedConfig;a.push(this.processRoutes(p.module,p.routes))}else l.loadChildren&&!l.canLoad?a.push(this.preloadConfig(t,l)):l.children&&a.push(this.processRoutes(t,l.children));return(0,gn.D)(a).pipe((0,si.J)(),(0,mt.U)(l=>{}))}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,Xe.of)(s._loadedConfig):this.loader.load(t.injector,s)).pipe((0,wn.zg)(l=>(s._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Mr),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(cv))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Sh=(()=>{class n{constructor(t,s,a={}){this.router=t,this.viewportScroller=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof U?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof K&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ts&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.router.triggerEvent(new Ts(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Mr),f.LFG(vo),f.LFG(void 0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const gu=new f.OlP("ROUTER_CONFIGURATION"),hv=new f.OlP("ROUTER_FORROOT_GUARD"),fp=[Fe,{provide:ch,useClass:Gf},{provide:Mr,useFactory:function(n,e,t,s,a,l,p,v={},b,S){const R=new Mr(null,n,e,t,s,a,l,va(p));return b&&(R.urlHandlingStrategy=b),S&&(R.routeReuseStrategy=S),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(v,R),v.enableTracing&&R.events.subscribe(P=>{var Y,J;null===(Y=console.group)||void 0===Y||Y.call(console,`Router Event: ${P.constructor.name}`),console.log(P.toString()),console.log(P),null===(J=console.groupEnd)||void 0===J||J.call(console)}),R},deps:[ch,Th,Fe,f.zs3,f.v3s,f.Sil,av,gu,[class{},new f.FiY],[class{},new f.FiY]]},Th,{provide:fc,useFactory:function(n){return n.routerState.root},deps:[Mr]},{provide:f.v3s,useClass:f.EAV},hp,dv,class{preload(e,t){return t().pipe(Ks(()=>(0,Xe.of)(null)))}},{provide:gu,useValue:{enableTracing:!1}}];function xT(){return new f.PXZ("Router",Mr)}let pv=(()=>{class n{constructor(t,s){}static forRoot(t,s){return{ngModule:n,providers:[fp,xm(t),{provide:hv,useFactory:e0,deps:[[Mr,new f.FiY,new f.tp0]]},{provide:gu,useValue:s||{}},{provide:G,useFactory:RT,deps:[le,[new f.tBr(ve),new f.FiY],gu]},{provide:Sh,useFactory:NT,deps:[Mr,vo,gu]},{provide:cv,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:dv},{provide:f.PXZ,multi:!0,useFactory:xT},[gv,{provide:f.ip1,multi:!0,useFactory:r0,deps:[gv]},{provide:s0,useFactory:MT,deps:[gv]},{provide:f.tb,multi:!0,useExisting:s0}]]}}static forChild(t){return{ngModule:n,providers:[xm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hv,8),f.LFG(Mr,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function NT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Sh(n,e,t)}function RT(n,e,t={}){return t.useHash?new Ce(n,e):new he(n,e)}function e0(n){return"guarded"}function xm(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:av,multi:!0,useValue:n}]}let gv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new zi.xQ}appInitializer(){return this.injector.get(k,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const a=new Promise(v=>s=v),l=this.injector.get(Mr),p=this.injector.get(gu);return"disabled"===p.initialNavigation?(l.setUpLocationChangeListener(),s(!0)):"enabled"===p.initialNavigation||"enabledBlocking"===p.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,Xe.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),l.initialNavigation()):s(!0),a})}bootstrapListener(t){const s=this.injector.get(gu),a=this.injector.get(hp),l=this.injector.get(Sh),p=this.injector.get(Mr),v=this.injector.get(f.z2F);t===v.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&p.initialNavigation(),a.setUpPreloading(),l.init(),p.resetRootComponentType(v.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function r0(n){return n.appInitializer.bind(n)}function MT(n){return n.bootstrapListener.bind(n)}const s0=new f.OlP("Router Initializer");var mv=V(7841),OT=V(6682),pp=V(309),PT=V(7771),kT=V(8858);class o0 extends zi.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new FT(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,s=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,l=s.length;let p;if(this.closed)throw new bs.N;if(this.isStopped||this.hasError?p=$f.w.EMPTY:(this.observers.push(e),p=new kT.W(this,e)),a&&e.add(e=new pp.ht(e,a)),t)for(let v=0;v<l&&!e.closed;v++)e.next(s[v]);else for(let v=0;v<l&&!e.closed;v++)e.next(s[v].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),p}_getNow(){return(this.scheduler||PT.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,s=this._windowTime,a=this._events,l=a.length;let p=0;for(;p<l&&!(e-a[p].time<s);)p++;return l>t&&(p=Math.max(p,l-t)),p>0&&a.splice(0,p),a}}class FT{constructor(e,t){this.time=e,this.value=t}}function a0(n,e,t){let s;return s=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:s}){let a,p,l=0,v=!1,b=!1;return function(R){let P;l++,!a||v?(v=!1,a=new o0(n,e,s),P=a.subscribe(this),p=R.subscribe({next(Y){a.next(Y)},error(Y){v=!0,a.error(Y)},complete(){b=!0,p=void 0,a.complete()}}),b&&(p=void 0)):P=a.subscribe(this),this.add(()=>{l--,P.unsubscribe(),P=void 0,p&&!b&&t&&0===l&&(p.unsubscribe(),p=void 0,a=void 0)})}}(s))}function vt(n,e){return e?zn(()=>n,e):zn(()=>n)}var Nm=V(3101),Wr=V(6643),ts=V(8939);V(2329);var be=V(8239),Vl=V(5452),vv=V(6034),xt=V(3854),yu=V(5601);const h0=new Map,Ev={activated:!1,tokenObservers:[]},vN={initialized:!1,enabled:!1};function ns(n){return h0.get(n)||Ev}function _u(n,e){h0.set(n,e)}function wv(){return vN}class bN{constructor(e,t,s,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new xt.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const sr=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function f0(n){if(!ns(n).activated)throw sr.create("use-before-activation",{appName:n.name})}function Mm(n,e){return Om.apply(this,arguments)}function Om(){return(Om=(0,be.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});a&&(s["X-Firebase-Client"]=a.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:s};let p,v;try{p=yield fetch(n,l)}catch(P){throw sr.create("fetch-network-error",{originalErrorMessage:P.message})}if(200!==p.status)throw sr.create("fetch-status-error",{httpStatus:p.status});try{v=yield p.json()}catch(P){throw sr.create("fetch-parse-error",{originalErrorMessage:P.message})}const b=v.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw sr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(b[1]),R=Date.now();return{token:v.attestationToken,expireTimeMillis:R+S,issuedAtTimeMillis:R}})).apply(this,arguments)}function HT(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const yp="firebase-app-check-store";let xh=null;function m0(){return xh||(xh=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var a;e(sr.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=s=>{const a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(yp,{keyPath:"compositeKey"})}}}catch(t){e(sr.create("storage-open",{originalErrorMessage:t.message}))}}),xh)}function vp(){return(vp=(0,be.Z)(function*(n,e){const s=(yield m0()).transaction(yp,"readwrite"),l=s.objectStore(yp).put({compositeKey:n,value:e});return new Promise((p,v)=>{l.onsuccess=b=>{p()},s.onerror=b=>{var S;v(sr.create("storage-set",{originalErrorMessage:null===(S=b.target.error)||void 0===S?void 0:S.message}))}})})).apply(this,arguments)}const Pm=new yu.Yd("@firebase/app-check");function Fm(n,e){return(0,xt.hl)()?function(n,e){return function(n,e){return vp.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Pm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ep(){return wv().enabled}function v0(){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,be.Z)(function*(){const n=wv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const E0={error:"UNKNOWN_ERROR"};function w0(n){return xt.US.encodeString(JSON.stringify(n),!1)}function Um(n){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,be.Z)(function*(n,e=!1){const t=n.app;f0(t);const s=ns(t);let l,p,a=s.token;if(!a){const v=yield s.cachedTokenPromise;v&&wp(v)&&(a=v,_u(t,Object.assign(Object.assign({},s),{token:a})),I0(t,{token:a.token}))}if(!e&&a&&wp(a))return{token:a.token};if(Ep()){const v=yield Mm(HT(t,yield v0()),n.platformLoggerProvider);return yield Fm(t,v),_u(t,Object.assign(Object.assign({},s),{token:v})),{token:v.token}}try{a=yield s.provider.getToken()}catch(v){Pm.error(v),l=v}return a?(p={token:a.token},_u(t,Object.assign(Object.assign({},s),{token:a})),yield Fm(t,a)):p=TN(l),I0(t,p),p})).apply(this,arguments)}function Cv(n,e){const t=ns(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),_u(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function I0(n,e){const t=ns(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(a){}}function wp(n){return n.expireTimeMillis-Date.now()>0}function TN(n){return{token:w0(E0),error:n}}class AN{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=ns(this.app);for(const t of e)Cv(this.app,t.next);return Promise.resolve()}}const x0="app-check-internal";(0,Vl._registerComponent)(new vv.wA("app-check",n=>function(n,e){return new AN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(x0).initialize()})),(0,Vl._registerComponent)(new vv.wA(x0,n=>function(n){return{getToken:e=>Um(n,e),addTokenListener:e=>function(n,e,t,s){const{app:a}=n,l=ns(a),p={next:t,error:s,type:e},v=Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,p]});if(!v.tokenRefresher){const b=function(n){const{app:e}=n;return new bN((0,be.Z)(function*(){let s;if(s=ns(e).token?yield Um(n,!0):yield Um(n),s.error)throw s.error}),()=>!0,()=>{const t=ns(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n);v.tokenRefresher=b}if(!v.tokenRefresher.isRunning()&&l.isTokenAutoRefreshEnabled&&v.tokenRefresher.start(),l.token&&wp(l.token)){const b=l.token;Promise.resolve().then(()=>t({token:b.token})).catch(()=>{})}else null==l.token&&l.cachedTokenPromise.then(b=>{b&&wp(b)&&t({token:b.token})}).catch(()=>{});_u(a,v)}(n,"INTERNAL",e),removeTokenListener:e=>Cv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vl.registerVersion)("@firebase/app-check","0.4.2");class Rv{constructor(){return(0,Wr.vb)("app-check")}}"undefined"!=typeof window&&window;const Pv=new f.OlP("angularfire2.auth.use-emulator"),kv=new f.OlP("angularfire2.auth.settings"),Fv=new f.OlP("angularfire2.auth.tenant-id"),Lv=new f.OlP("angularfire2.auth.langugage-code"),Ca=new f.OlP("angularfire2.auth.use-device-language"),Ip=new f.OlP("angularfire.auth.persistence"),k0=(n,e,t,s,a,l,p,v)=>(0,ts.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=e.runOutsideAngular(()=>n.auth());if(t&&b.useEmulator(...t),s&&(b.tenantId=s),b.languageCode=a,l&&b.useDeviceLanguage(),p)for(const[S,R]of Object.entries(p))b.settings[S]=R;return v&&b.setPersistence(v),b},[t,s,a,l,p,v]);let Vv=(()=>{class n{constructor(t,s,a,l,p,v,b,S,R,P,Y,J){const xe=new zi.xQ,je=(0,Xe.of)(void 0).pipe((0,pp.QV)(p.outsideAngular),zn(()=>l.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,4671)))),(0,mt.U)(()=>(0,ts.on)(t,l,s)),(0,mt.U)(Ke=>k0(Ke,l,v,S,R,P,b,Y)),a0({bufferSize:1,refCount:!1}));if(_o(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Xe.of)(null);else{je.pipe(Ys()).subscribe();const Pt=je.pipe(zn(Vt=>Vt.getRedirectResult().then(hr=>hr,()=>null)),Wr.iC,a0({bufferSize:1,refCount:!1})),sn=je.pipe(zn(Vt=>new ii.y(hr=>({unsubscribe:l.runOutsideAngular(()=>Vt.onAuthStateChanged(Va=>hr.next(Va),Va=>hr.error(Va),()=>hr.complete()))})))),Rn=je.pipe(zn(Vt=>new ii.y(hr=>({unsubscribe:l.runOutsideAngular(()=>Vt.onIdTokenChanged(Va=>hr.next(Va),Va=>hr.error(Va),()=>hr.complete()))}))));this.authState=Pt.pipe(vt(sn),(0,Nm.R)(p.outsideAngular),(0,pp.QV)(p.insideAngular)),this.user=Pt.pipe(vt(Rn),(0,Nm.R)(p.outsideAngular),(0,pp.QV)(p.insideAngular)),this.idToken=this.user.pipe(zn(Vt=>Vt?(0,gn.D)(Vt.getIdToken()):(0,Xe.of)(null))),this.idTokenResult=this.user.pipe(zn(Vt=>Vt?(0,gn.D)(Vt.getIdTokenResult()):(0,Xe.of)(null))),this.credential=(0,OT.T)(Pt,xe,this.authState.pipe(xi(Vt=>!Vt))).pipe((0,mt.U)(Vt=>(null==Vt?void 0:Vt.user)?Vt:null),(0,Nm.R)(p.outsideAngular),(0,pp.QV)(p.insideAngular))}return(0,ts.pX)(this,je,l,{spy:{apply:(Ke,Pt,sn)=>{(Ke.startsWith("signIn")||Ke.startsWith("createUser"))&&sn.then(Rn=>xe.next(Rn))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ts.Dh),f.LFG(ts.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Wr.HU),f.LFG(Pv,8),f.LFG(kv,8),f.LFG(Fv,8),f.LFG(Lv,8),f.LFG(Ca,8),f.LFG(Ip,8),f.LFG(Rv,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Cc=(()=>{class n{constructor(t,s){this.afAuth=t,this.router=s,this.localuid=""}login(t,s){return this.afAuth.signInWithEmailAndPassword(t,s).then(a=>{var l,p;console.log(null===(l=a.user)||void 0===l?void 0:l.uid),this.localuid=null===(p=a.user)||void 0===p?void 0:p.uid,localStorage.setItem("localUid",this.localuid),this.router.navigate(["/home"])}).catch(a=>{window.alert(a.message),this.router.navigate(["/login"])})}loginWithGoogle(){return this.afAuth.signInWithPopup(new mv.Z.auth.GoogleAuthProvider)}register(t,s){return this.afAuth.createUserWithEmailAndPassword(t,s)}getUserActive(){var t;return null===(t=mv.Z.auth().currentUser)||void 0===t?void 0:t.uid}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}userlogged(){return this.afAuth.onAuthStateChanged(t=>{t&&this.router.navigate(["/home"])})}userNotLogged(){return this.afAuth.onAuthStateChanged(t=>{t||this.router.navigate(["/login"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Vv),f.LFG(Mr))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var F0=V(3637);function Hl(){return n=>n.lift(new Cp)}class Cp{call(e,t){return t.subscribe(new tA(e))}}class tA extends Fn.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class L0{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new nA(e,this.compare,this.keySelector))}}class nA extends Fn.L{constructor(e,t,s){super(e),this.keySelector=s,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let s=!1;if(this.hasKey)try{const{compare:a}=this;s=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=t,this.destination.next(e))}}V(4671);var Ze,iA=V(4486),Bv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vu={},jm=jm||{},dt=Bv||self;function Dp(){}function jv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Tp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var $v="closure_uid_"+(1e9*Math.random()>>>0),sA=0;function oA(n,e,t){return n.call.apply(n.bind,arguments)}function aA(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function di(n,e,t){return(di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oA:aA).apply(null,arguments)}function $m(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function Or(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,a,l){for(var p=Array(arguments.length-2),v=2;v<arguments.length;v++)p[v-2]=arguments[v];return e.prototype[a].apply(s,p)}}function zt(){this.s=this.s,this.o=this.o}var LN={};zt.prototype.s=!1,zt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,$v)&&n[$v]||(n[$v]=++sA)}(this);delete LN[n]}},zt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Da=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Hm=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<s;l++)l in a&&e.call(t,a[l],l,n)};function uA(n){return Array.prototype.concat.apply([],arguments)}function qv(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function Gm(n){return/^[\s\xa0]*$/.test(n)}var fi,Wv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function hi(n,e){return-1!=n.indexOf(e)}function qm(n,e){return n<e?-1:n>e?1:0}e:{var V0=dt.navigator;if(V0){var U0=V0.userAgent;if(U0){fi=U0;break e}}fi=""}function Gl(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function Wm(n){const e={};for(const t in n)e[t]=n[t];return e}var zv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zv(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let l=0;l<zv.length;l++)t=zv[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function zm(n){return zm[" "](n),n}zm[" "]=Dp;var Zm,n,cA=hi(fi,"Opera"),Rh=hi(fi,"Trident")||hi(fi,"MSIE"),j0=hi(fi,"Edge"),Kv=j0||Rh,Yv=hi(fi,"Gecko")&&!(hi(fi.toLowerCase(),"webkit")&&!hi(fi,"Edge"))&&!(hi(fi,"Trident")||hi(fi,"MSIE"))&&!hi(fi,"Edge"),VN=hi(fi.toLowerCase(),"webkit")&&!hi(fi,"Edge");function Qv(){var n=dt.document;return n?n.documentMode:void 0}e:{var Jv="",$0=(n=fi,Yv?/rv:([^\);]+)(\)|;)/.exec(n):j0?/Edge\/([\d\.]+)/.exec(n):Rh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):VN?/WebKit\/(\S+)/.exec(n):cA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($0&&(Jv=$0?$0[1]:""),Rh){var H0=Qv();if(null!=H0&&H0>parseFloat(Jv)){Zm=String(H0);break e}}Zm=Jv}var Xv={};function lA(){return e=Xv,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Wv(String(Zm)).split("."),t=Wv("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==n&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=qm(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||qm(0==a[2].length,0==l[2].length)||qm(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n}();var e}var UN=dt.document&&Rh&&(Qv()||parseInt(Zm,10))||void 0,Oo=function(){if(!dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{dt.addEventListener("test",Dp,e),dt.removeEventListener("test",Dp,e)}catch(t){}return n}();function Oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ym(n,e){if(Oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Yv){e:{try{zm(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:BN[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ym.Z.h.call(this)}}Oi.prototype.h=function(){this.defaultPrevented=!0},Or(Ym,Oi);var BN={2:"touch",3:"pen",4:"mouse"};Ym.prototype.h=function(){Ym.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Mh="closure_listenable_"+(1e6*Math.random()|0),G0=0;function q0(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=a,this.key=++G0,this.ca=this.fa=!1}function Qm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function tE(n){this.src=n,this.g={},this.h=0}function Jm(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],a=Da(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(Qm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ap(n,e,t,s){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==s)return a}return-1}tE.prototype.add=function(n,e,t,s,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=Ap(n,e,s,a);return-1<p?(e=n[p],t||(e.fa=!1)):((e=new q0(e,this.src,l,!!s,a)).fa=t,n.push(e)),e};var nE="closure_lm_"+(1e6*Math.random()|0),Sp={};function W0(n,e,t,s,a){if(s&&s.once)return Z0(n,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)W0(n,e[l],t,s,a);return null}return t=ql(t),n&&n[Mh]?n.N(e,t,Tp(s)?!!s.capture:!!s,a):z0(n,e,t,!1,s,a)}function z0(n,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=Tp(a)?!!a.capture:!!a,v=Xm(n);if(v||(n[nE]=v=new tE(n)),(t=v.add(e,t,s,p,l)).proxy)return t;if(s=function(){var e=Oh;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)Oo||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(xp(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function Z0(n,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Z0(n,e[l],t,s,a);return null}return t=ql(t),n&&n[Mh]?n.O(e,t,Tp(s)?!!s.capture:!!s,a):z0(n,e,t,!0,s,a)}function K0(n,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)K0(n,e[l],t,s,a);else s=Tp(s)?!!s.capture:!!s,t=ql(t),n&&n[Mh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ap(l=n.g[e],t,s,a))&&(Qm(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Xm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ap(e,t,s,a)),(t=-1<n?e[n]:null)&&rE(t))}function rE(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Mh])Jm(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(xp(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Xm(e))?(Jm(t,n),0==t.h&&(t.src=null,e[nE]=null)):Qm(n)}}}function xp(n){return n in Sp?Sp[n]:Sp[n]="on"+n}function Oh(n,e){if(n.ca)n=!0;else{e=new Ym(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&rE(n),n=t.call(s,e)}return n}function Xm(n){return(n=n[nE])instanceof tE?n:null}var Rs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ql(n){return"function"==typeof n?n:(n[Rs]||(n[Rs]=function(e){return n.handleEvent(e)}),n[Rs])}function Pr(){zt.call(this),this.i=new tE(this),this.P=this,this.I=null}function zr(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new Oi(e,n);else if(e instanceof Oi)e.target=e.target||n;else{var a=e;Zv(e=new Oi(s,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=Ph(p,s,!0,e)&&a}if(a=Ph(p=e.g=n,s,!0,e)&&a,a=Ph(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Ph(p=e.g=t[l],s,!1,e)&&a}function Ph(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ca&&p.capture==t){var v=p.listener,b=p.ia||p.src;p.fa&&Jm(n.i,p),a=!1!==v.call(b,s)&&a}}return a&&!s.defaultPrevented}Or(Pr,zt),Pr.prototype[Mh]=!0,Pr.prototype.removeEventListener=function(n,e,t,s){K0(this,n,e,t,s)},Pr.prototype.M=function(){if(Pr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)Qm(t[s]);delete n.g[e],n.h--}}this.I=null},Pr.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},Pr.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var to=dt.JSON.stringify;function Np(){var n=Wl;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Tc,Dc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ey,n=>n.reset());class ey{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function no(n){dt.setTimeout(()=>{throw n},0)}function Rp(n,e){Tc||function(){var n=dt.Promise.resolve(void 0);Tc=function(){n.then(Fh)}}(),Ac||(Tc(),Ac=!0),Wl.add(n,e)}var Ac=!1,Wl=new class{constructor(){this.h=this.g=null}add(e,t){const s=Dc.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Fh(){for(var n;n=Np();){try{n.h.call(n.g)}catch(t){no(t)}var e=Dc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ac=!1}function Eu(n,e){Pr.call(this),this.h=n||1,this.g=e||dt,this.j=di(this.kb,this),this.l=Date.now()}function Sc(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function xc(n,e,t){if("function"==typeof n)t&&(n=di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=di(n.handleEvent,n)}return 2147483647<Number(e)?-1:dt.setTimeout(n,e||0)}function zl(n){n.g=xc(()=>{n.g=null,n.i&&(n.i=!1,zl(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Or(Eu,Pr),(Ze=Eu.prototype).da=!1,Ze.S=null,Ze.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),zr(this,"tick"),this.da&&(Sc(this),this.start()))}},Ze.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.M=function(){Eu.Z.M.call(this),Sc(this),delete this.g};class Y0 extends zt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zl(this)}M(){super.M(),this.g&&(dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lh(n){zt.call(this),this.h=n,this.g={}}Or(Lh,zt);var iE=[];function sE(n,e,t,s){Array.isArray(t)||(t&&(iE[0]=t.toString()),t=iE);for(var a=0;a<t.length;a++){var l=W0(e,t[a],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function oE(n){Gl(n.g,function(e,t){this.g.hasOwnProperty(t)&&rE(e)},n),n.g={}}function Mp(){this.g=!0}function Zl(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return to(t)}catch(v){return e}}(n,t)+(s?" "+s:"")})}Lh.prototype.M=function(){Lh.Z.M.call(this),oE(this)},Lh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mp.prototype.Aa=function(){this.g=!1},Mp.prototype.info=function(){};var Kl={},eI=null;function Op(){return eI=eI||new Pr}function tI(n){Oi.call(this,Kl.Ma,n)}function ty(n){const e=Op();zr(e,new tI(e,n))}function nI(n,e){Oi.call(this,Kl.STAT_EVENT,n),this.stat=e}function gi(n){const e=Op();zr(e,new nI(e,n))}function rI(n,e){Oi.call(this,Kl.Na,n),this.size=e}function Vh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return dt.setTimeout(function(){n()},e)}Kl.Ma="serverreachability",Or(tI,Oi),Kl.STAT_EVENT="statevent",Or(nI,Oi),Kl.Na="timingevent",Or(rI,Oi);var ny={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},iI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sI(){}function aE(){}sI.prototype.h=null;var uE,ry={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function aI(){Oi.call(this,"d")}function uI(){Oi.call(this,"c")}function cE(){}function Pp(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new Lh(this),this.P=lE,this.W=new Eu(n=Kv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cI}function cI(){this.i=null,this.g="",this.h=!1}Or(aI,Oi),Or(uI,Oi),Or(cE,sI),cE.prototype.g=function(){return new XMLHttpRequest},cE.prototype.i=function(){return{}},uE=new cE;var lE=45e3,kp={},iy={};function lI(n,e,t){n.K=1,n.v=fE(bu(e)),n.s=t,n.U=!0,fA(n,null)}function fA(n,e){n.F=Date.now(),sy(n),n.A=bu(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),vE(t.h,"t",s),n.C=0,t=n.l.H,n.h=new cI,n.g=vy(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Y0(di(n.Ia,n,n.g),n.O)),sE(n.V,n.g,"readystatechange",n.gb),e=n.H?Wm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),ty(1),function(n,e,t,s,a,l){n.info(function(){if(n.g)if(l)for(var p="",v=l.split("&"),b=0;b<v.length;b++){var S=v[b].split("=");if(1<S.length){var R=S[0];S=S[1];var P=R.split("_");p=2<=P.length&&"type"==P[1]?p+(R+"=")+S+"&":p+(R+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.X,n.s)}function pA(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function dI(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=hI(n,t),a==iy){4==e&&(n.o=4,gi(14),s=!1),Zl(n.j,n.m,null,"[Incomplete Response]");break}if(a==kp){n.o=4,gi(15),Zl(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}Zl(n.j,n.m,a,null),dE(n,a)}pA(n)&&a!=iy&&a!=kp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,gi(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ms(e),e.L=!0,gi(11))):(Zl(n.j,n.m,t,"[Invalid Chunked Response]"),Nc(n),Fp(n))}function hI(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?iy:(t=Number(e.substring(t,s)),isNaN(t)?kp:(s+=1)+t>e.length?iy:(e=e.substr(s,t),n.C=s+t,e))}function sy(n){n.Y=Date.now()+n.P,fI(n,n.P)}function fI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Vh(di(n.eb,n),e)}function wu(n){n.B&&(dt.clearTimeout(n.B),n.B=null)}function Fp(n){0==n.l.G||n.I||RE(n.l,n)}function Nc(n){wu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Sc(n.W),oE(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function dE(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||CE(t.i,n)))if(t.I=n.N,!n.J&&CE(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(S){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=Vh(di(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;$p(t),jp(t)}ro(t),gi(18)}if(1>=IE(t.i)&&t.ka){try{t.ka()}catch(S){}t.ka=void 0}}else ed(t,11)}else if((n.J||t.g==n)&&$p(t),!Gm(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let S=a[e];if(t.U=S[0],S=S[1],2==t.G)if("c"==S[0]){t.J=S[1],t.la=S[2];const R=S[3];null!=R&&(t.ma=R,t.h.info("VER="+t.ma));const P=S[4];null!=P&&(t.za=P,t.h.info("SVER="+t.za));const Y=S[5];null!=Y&&"number"==typeof Y&&0<Y&&(t.K=s=1.5*Y,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const J=n.g;if(J){const xe=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xe){var l=s.i;!l.g&&(hi(xe,"spdy")||hi(xe,"quic")||hi(xe,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(dy(l,l.h),l.h=null))}if(s.D){const je=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;je&&(s.sa=je,bn(s.F,s.D,je))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var p=n;if((s=t).oa=RI(s,s.H?s.la:null,s.W),p.J){DE(s.i,p);var v=p,b=s.K;b&&v.setTimeout(b),v.B&&(wu(v),sy(v)),s.g=p}else SI(s);0<t.l.length&&NE(t)}else"stop"!=S[0]&&"close"!=S[0]||ed(t,7);else 3==t.G&&("stop"==S[0]||"close"==S[0]?"stop"==S[0]?ed(t,7):xE(t):"noop"!=S[0]&&t.j&&t.j.wa(S),t.A=0)}ty(4)}catch(S){}}function Uh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(jv(n)||"string"==typeof n)Hm(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(jv(n)||"string"==typeof n){t=[];for(var s=n.length,a=0;a<s;a++)t.push(a)}else for(a in t=[],s=0,n)t[s++]=a;a=(s=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(jv(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n)).length;for(var l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],n)}}function Bh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof Bh)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function oy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];Yl(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)Yl(a,s=n.g[e])||(n.g[t++]=s,a[s]=1),e++;n.g.length=t}}function Yl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ze=Pp.prototype).setTimeout=function(n){this.P=n},Ze.gb=function(n){n=n.target;const e=this.L;e&&3==Ta(n)?e.l():this.Ia(n)},Ze.Ia=function(n){try{if(n==this.g)e:{const R=Ta(this.g);var e=this.g.Da();const P=this.g.ba();if(!(3>R)&&(3!=R||Kv||this.g&&(this.h.h||this.g.ga()||bI(this.g)))){this.I||4!=R||7==e||ty(8==e||0>=P?3:2),wu(this);var t=this.g.ba();this.N=t;t:if(pA(this)){var s=bI(this.g);n="";var a=s.length,l=4==Ta(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nc(this),Fp(this);var p="";break t}this.h.i=new dt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.ga();if(this.i=200==t,function(n,e,t,s,a,l,p){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.X,R,t),this.i){if(this.$&&!this.J){t:{if(this.g){var v,b=this.g;if((v=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gm(v)){var S=v;break t}}S=null}if(!(t=S)){this.i=!1,this.o=3,gi(12),Nc(this),Fp(this);break e}Zl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,dE(this,t)}this.U?(dI(this,R,p),Kv&&this.i&&3==R&&(sE(this.V,this.W,"tick",this.fb),this.W.start())):(Zl(this.j,this.m,p,null),dE(this,p)),4==R&&Nc(this),this.i&&!this.I&&(4==R?RE(this.l,this):(this.i=!1,sy(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,gi(12)):(this.o=0,gi(13)),Nc(this),Fp(this)}}}catch(R){}},Ze.fb=function(){if(this.g){var n=Ta(this.g),e=this.g.ga();this.C<e.length&&(wu(this),dI(this,n,e),this.i&&4!=n&&sy(this))}},Ze.cancel=function(){this.I=!0,Nc(this)},Ze.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ty(3),gi(17)),Nc(this),this.o=2,Fp(this)):fI(this,this.Y-n)},(Ze=Bh.prototype).R=function(){oy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ze.T=function(){return oy(this),this.g.concat()},Ze.get=function(n,e){return Yl(this.h,n)?this.h[n]:e},Ze.set=function(n,e){Yl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ze.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var a=t[s],l=this.get(a);n.call(e,l,a,this)}};var gI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ql(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ql){this.g=void 0!==e?e:n.g,Lp(this,n.j),this.s=n.s,ay(this,n.i),Vp(this,n.m),this.l=n.l,e=n.h;var t=new jh;t.i=e.i,e.g&&(t.g=new Bh(e.g),t.h=e.h),hE(this,t),this.o=n.o}else n&&(t=String(n).match(gI))?(this.g=!!e,Lp(this,t[1]||"",!0),this.s=uy(t[2]||""),ay(this,t[3]||"",!0),Vp(this,t[4]),this.l=uy(t[5]||"",!0),hE(this,t[6]||"",!0),this.o=uy(t[7]||"")):(this.g=!!e,this.h=new jh(null,this.g))}function bu(n){return new Ql(n)}function Lp(n,e,t){n.j=t?uy(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ay(n,e,t){n.i=t?uy(e,!0):e}function Vp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function hE(n,e,t){e instanceof jh?(n.h=e,function(n,e){e&&!n.j&&(Jl(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(mI(this,s),vE(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Iu(e,mE)),n.h=new jh(e,n.g))}function bn(n,e,t){n.h.set(e,t)}function fE(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function uy(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Iu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,yA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function yA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ql.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Iu(e,cy,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Iu(e,cy,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Iu(t,"/"==t.charAt(0)?_A:gE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Iu(t,yE)),n.join("")};var cy=/[#\/\?@]/g,gE=/[#\?:]/g,_A=/[#\?]/g,mE=/[#\?@]/g,yE=/#/g;function jh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Jl(n){n.g||(n.g=new Bh,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var l=n[t].substring(0,s);a=n[t].substring(s+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function mI(n,e){Jl(n),e=$h(n,e),Yl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Yl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&oy(n)))}function _E(n,e){return Jl(n),e=$h(n,e),Yl(n.g.h,e)}function vE(n,e,t){mI(n,e),0<t.length&&(n.i=null,n.g.set($h(n,e),qv(t)),n.h+=t.length)}function $h(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function wE(n){this.l=n||bE,n=dt.PerformanceNavigationTiming?0<(n=dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(dt.g&&dt.g.Ea&&dt.g.Ea()&&dt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=jh.prototype).add=function(n,e){Jl(this),this.i=null,n=$h(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){Jl(this),this.g.forEach(function(t,s){Hm(t,function(a){n.call(e,a,s,this)},this)},this)},Ze.T=function(){Jl(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var a=n[s],l=0;l<a.length;l++)t.push(e[s]);return t},Ze.R=function(n){Jl(this);var e=[];if("string"==typeof n)_E(this,n)&&(e=uA(e,this.g.get($h(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=uA(e,n[t])}return e},Ze.set=function(n,e){return Jl(this),this.i=null,_E(this,n=$h(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],a=encodeURIComponent(String(s));s=this.R(s);for(var l=0;l<s.length;l++){var p=a;""!==s[l]&&(p+="="+encodeURIComponent(String(s[l]))),n.push(p)}}return this.i=n.join("&")};var bE=10;function ly(n){return!!n.h||!!n.g&&n.g.size>=n.j}function IE(n){return n.h?1:n.g?n.g.size:0}function CE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function dy(n,e){n.g?n.g.add(e):n.h=e}function DE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function hy(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return qv(n.i)}function fy(){}function vA(){this.g=new fy}function EA(n,e,t){const s=t||"";try{Uh(n,function(a,l){let p=a;Tp(a)&&(p=to(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function Up(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(l){}}function Xl(n){this.l=n.$b||null,this.j=n.ib||!1}function Bp(n,e){Pr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=py,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wE.prototype.cancel=function(){if(this.i=hy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},fy.prototype.stringify=function(n){return dt.JSON.stringify(n,void 0)},fy.prototype.parse=function(n){return dt.JSON.parse(n,void 0)},Or(Xl,sI),Xl.prototype.g=function(){return new Bp(this.l,this.j)},Xl.prototype.i=function(n){return function(){return n}}({}),Or(Bp,Pr);var py=0;function TE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Hh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Gh(n)}function Gh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=Bp.prototype).open=function(n,e){if(this.readyState!=py)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Gh(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hh(this)),this.readyState=py},Ze.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Gh(this)),this.g&&(this.readyState=3,Gh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==dt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;TE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ze.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Hh(this):Gh(this),3==this.readyState&&TE(this)}},Ze.Ua=function(n){this.g&&(this.response=this.responseText=n,Hh(this))},Ze.Ta=function(n){this.g&&(this.response=n,Hh(this))},Ze.ha=function(){this.g&&Hh(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Bp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var _I=dt.JSON.parse;function Qn(n){Pr.call(this),this.headers=new Bh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=AE,this.K=this.L=!1}Or(Qn,Pr);var AE="",jN=/^https?$/i,bA=["POST","PUT"];function vI(n){return"content-type"==n.toLowerCase()}function EI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,or(n),gy(n)}function or(n){n.D||(n.D=!0,zr(n,"complete"),zr(n,"error"))}function SE(n){if(n.h&&void 0!==jm&&(!n.C[1]||4!=Ta(n)||2!=n.ba()))if(n.v&&4==Ta(n))xc(n.Fa,0,n);else if(zr(n,"readystatechange"),4==Ta(n)){n.h=!1;try{const v=n.ba();e:switch(v){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===v){var a=String(n.H).match(gI)[1]||null;if(!a&&dt.self&&dt.self.location){var l=dt.self.location.protocol;a=l.substr(0,l.length-1)}s=!jN.test(a?a.toLowerCase():"")}t=s}if(t)zr(n,"complete"),zr(n,"success");else{n.m=6;try{var p=2<Ta(n)?n.g.statusText:""}catch(b){p=""}n.j=p+" ["+n.ba()+"]",or(n)}}finally{gy(n)}}}function gy(n,e){if(n.g){wI(n);const t=n.g,s=n.C[0]?Dp:null;n.g=null,n.C=null,e||zr(n,"ready");try{t.onreadystatechange=s}catch(a){}}}function wI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(dt.clearTimeout(n.A),n.A=null)}function Ta(n){return n.g?n.g.readyState:0}function bI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case AE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function my(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function(n){let e="";return Gl(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function Aa(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function CI(n){this.za=0,this.l=[],this.h=new Mp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Aa("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Aa("baseRetryDelayMs",5e3,n),this.$a=Aa("retryDelaySeedMs",1e4,n),this.Ya=Aa("forwardChannelMaxRetries",2,n),this.ra=Aa("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new wE(n&&n.concurrentRequestLimit),this.Ca=new vA,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function xE(n){if(DI(n),3==n.G){var e=n.V++,t=bu(n.F);bn(t,"SID",n.J),bn(t,"RID",e),bn(t,"TYPE","terminate"),rs(n,t),(e=new Pp(n,n.h,e,void 0)).K=2,e.v=fE(bu(t)),t=!1,dt.navigator&&dt.navigator.sendBeacon&&(t=dt.navigator.sendBeacon(e.v.toString(),"")),!t&&dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vy(e.l,null),e.g.ea(e.v)),e.F=Date.now(),sy(e)}NI(n)}function jp(n){n.g&&(Ms(n),n.g.cancel(),n.g=null)}function DI(n){jp(n),n.u&&(dt.clearTimeout(n.u),n.u=null),$p(n),n.i.cancel(),n.m&&("number"==typeof n.m&&dt.clearTimeout(n.m),n.m=null)}function yy(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&NE(n)}function NE(n){ly(n.i)||n.m||(n.m=!0,Rp(n.Ha,n),n.C=0)}function _y(n,e){var t;t=e?e.m:n.V++;const s=bu(n.F);bn(s,"SID",n.J),bn(s,"RID",t),bn(s,"AID",n.U),rs(n,s),n.o&&n.s&&my(s,n.o,n.s),t=new Pp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=AI(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),dy(n.i,t),lI(t,s,e)}function rs(n,e){n.j&&Uh({},function(t,s){bn(e,s,t)})}function AI(n,e,t){t=Math.min(n.l.length,t);var s=n.j?di(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let v=!0;for(let b=0;b<t;b++){let S=a[b].h;const R=a[b].g;if(S-=l,0>S)l=Math.max(0,a[b].h-100),v=!1;else try{EA(R,p,"req"+S+"_")}catch(P){s&&s(R)}}if(v){s=p.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function SI(n){n.g||n.u||(n.Y=1,Rp(n.Ga,n),n.A=0)}function ro(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Vh(di(n.Ga,n),xI(n,n.A)),n.A++,0))}function Ms(n){null!=n.B&&(dt.clearTimeout(n.B),n.B=null)}function io(n){n.g=new Pp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=bu(n.oa);bn(e,"RID","rpc"),bn(e,"SID",n.J),bn(e,"CI",n.N?"0":"1"),bn(e,"AID",n.U),rs(n,e),bn(e,"TYPE","xmlhttp"),n.o&&n.s&&my(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=fE(bu(e)),t.s=null,t.U=!0,fA(t,n)}function $p(n){null!=n.v&&(dt.clearTimeout(n.v),n.v=null)}function RE(n,e){var t=null;if(n.g==e){$p(n),Ms(n),n.g=null;var s=2}else{if(!CE(n.i,e))return;t=e.D,DE(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;zr(s=Op(),new rI(s,t,e,a)),NE(n)}else SI(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==s&&function(n,e){return!(IE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Vh(di(n.Ha,n,e),xI(n,n.C)),n.C++,0)))}(n,e)||2==s&&ro(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:ed(n,5);break;case 4:ed(n,10);break;case 3:ed(n,6);break;default:ed(n,2)}}function xI(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ed(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=di(n.jb,n);t||(t=new Ql("//www.google.com/images/cleardot.gif"),dt.location&&"http"==dt.location.protocol||Lp(t,"https"),fE(t)),function(n,e){const t=new Mp;if(dt.Image){const s=new Image;s.onload=$m(Up,t,s,"TestLoadImage: loaded",!0,e),s.onerror=$m(Up,t,s,"TestLoadImage: error",!1,e),s.onabort=$m(Up,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=$m(Up,t,s,"TestLoadImage: timeout",!1,e),dt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else gi(2);n.G=0,n.j&&n.j.va(e),NI(n),DI(n)}function NI(n){n.G=0,n.I=-1,n.j&&((0!=hy(n.i).length||0!=n.l.length)&&(n.i.i.length=0,qv(n.l),n.l.length=0),n.j.ua())}function RI(n,e,t){let s=function(n){return n instanceof Ql?bu(n):new Ql(n,void 0)}(t);if(""!=s.i)e&&ay(s,e+"."+s.i),Vp(s,s.m);else{const a=dt.location;s=function(n,e,t,s){var a=new Ql(null,void 0);return n&&Lp(a,n),e&&ay(a,e),t&&Vp(a,t),s&&(a.l=s),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&Gl(n.aa,function(a,l){bn(s,l,a)}),t=n.sa,(e=n.D)&&t&&bn(s,e,t),bn(s,"VER",n.ma),rs(n,s),s}function vy(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(t&&n.Ba&&!n.qa?new Xl({ib:!0}):n.qa)).L=n.H,e}function qh(){}function Ey(){if(Rh&&!(10<=Number(UN)))throw Error("Environmental error: no available transport.")}function is(n,e){Pr.call(this),this.g=new CI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Gm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new td(this)}function MI(n){aI.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ME(){uI.call(this),this.status=1}function td(n){this.g=n}(Ze=Qn.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():uE.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:uE),this.g.onreadystatechange=di(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void EI(this,l)}n=t||"";const a=new Bh(this.headers);s&&Uh(s,function(l,p){a.set(p,l)}),s=function(n){e:{var e=vI;const t=n.length,s="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in s&&e.call(void 0,s[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=dt.FormData&&n instanceof dt.FormData,!(0<=Da(bA,e))||s||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,p){this.g.setRequestHeader(p,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wI(this),0<this.B&&((this.K=function(n){return Rh&&lA()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=di(this.pa,this)):this.A=xc(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){EI(this,l)}},Ze.pa=function(){void 0!==jm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zr(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,zr(this,"complete"),zr(this,"abort"),gy(this))},Ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gy(this,!0)),Qn.Z.M.call(this)},Ze.Fa=function(){this.s||(this.F||this.v||this.l?SE(this):this.cb())},Ze.cb=function(){SE(this)},Ze.ba=function(){try{return 2<Ta(this)?this.g.status:-1}catch(n){return-1}},Ze.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ze.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),_I(e)}},Ze.Da=function(){return this.m},Ze.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=CI.prototype).ma=8,Ze.G=1,Ze.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ze.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new Pp(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Wm(l),Zv(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=AI(this,a,e),bn(t=bu(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),rs(this,t),this.o&&l&&my(t,this.o,l),dy(this.i,a),this.Ra&&bn(t,"TYPE","init"),this.ja?(bn(t,"$req",e),bn(t,"SID","null"),a.$=!0,lI(a,t,null)):lI(a,t,e),this.G=2}}else 3==this.G&&(n?_y(this,n):0==this.l.length||ly(this.i)||_y(this))},Ze.Ga=function(){if(this.u=null,io(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Vh(di(this.bb,this),n)}},Ze.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,gi(10),jp(this),io(this))},Ze.ab=function(){null!=this.v&&(this.v=null,jp(this),ro(this),gi(19))},Ze.jb=function(n){n?(this.h.info("Successfully pinged google.com"),gi(2)):(this.h.info("Failed to ping google.com"),gi(1))},(Ze=qh.prototype).xa=function(){},Ze.wa=function(){},Ze.va=function(){},Ze.ua=function(){},Ze.Oa=function(){},Ey.prototype.g=function(n,e){return new is(n,e)},Or(is,Pr),is.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Rp(di(n.hb,n,e))),gi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=RI(n,null,n.W),NE(n)},is.prototype.close=function(){xE(this.g)},is.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,yy(this.g,e)}else this.v?((e={}).__data__=to(n),yy(this.g,e)):yy(this.g,n)},is.prototype.M=function(){this.g.j=null,delete this.j,xE(this.g),delete this.g,is.Z.M.call(this)},Or(MI,aI),Or(ME,uI),Or(td,qh),td.prototype.xa=function(){zr(this.g,"a")},td.prototype.wa=function(n){zr(this.g,new MI(n))},td.prototype.va=function(n){zr(this.g,new ME(n))},td.prototype.ua=function(){zr(this.g,"b")},Ey.prototype.createWebChannel=Ey.prototype.g,is.prototype.send=is.prototype.u,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,ny.NO_ERROR=0,ny.TIMEOUT=8,ny.HTTP_ERROR=6,iI.COMPLETE="complete",aE.EventType=ry,ry.OPEN="a",ry.CLOSE="b",ry.ERROR="c",ry.MESSAGE="d",Pr.prototype.listen=Pr.prototype.N,Qn.prototype.listenOnce=Qn.prototype.O,Qn.prototype.getLastError=Qn.prototype.La,Qn.prototype.getLastErrorCode=Qn.prototype.Da,Qn.prototype.getStatus=Qn.prototype.ba,Qn.prototype.getResponseJson=Qn.prototype.Qa,Qn.prototype.getResponseText=Qn.prototype.ga,Qn.prototype.send=Qn.prototype.ea;var wy=vu.createWebChannelTransport=function(){return new Ey},CA=vu.getStatEventTarget=function(){return Op()},by=vu.ErrorCode=ny,OI=vu.EventType=iI,OE=vu.Event=Kl,Hp=vu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},PI=vu.FetchXmlHttpFactory=Xl,Gp=vu.WebChannel=aE,kI=vu.XhrIo=Qn;const PE="@firebase/firestore";class kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");let nd="9.1.3";const Cu=new yu.Yd("@firebase/firestore");function Iy(){return Cu.logLevel}function Ve(n,...e){if(Cu.logLevel<=yu.in.DEBUG){const t=e.map(kE);Cu.debug(`Firestore (${nd}): ${n}`,...t)}}function ar(n,...e){if(Cu.logLevel<=yu.in.ERROR){const t=e.map(kE);Cu.error(`Firestore (${nd}): ${n}`,...t)}}function qp(n,...e){if(Cu.logLevel<=yu.in.WARN){const t=e.map(kE);Cu.warn(`Firestore (${nd}): ${n}`,...t)}}function kE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${nd}) INTERNAL ASSERTION FAILED: `+n;throw ar(e),new Error(e)}function pt(n,e){n||nt()}function He(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class FI{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class AA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kr.UNAUTHENTICATED))}shutdown(){}}class SA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xA{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=S=>this.i!==a?(a=this.i,t(S)):Promise.resolve();let p=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Fr,e.enqueueRetryable(()=>l(this.currentUser))};const v=()=>{const S=p;e.enqueueRetryable((0,be.Z)(function*(){yield S.promise,yield l(s.currentUser)}))},b=S=>{Ve("FirebaseCredentialsProvider","Auth detected"),this.auth=S,this.auth.addAuthTokenListener(this.o),v()};this.t.onInit(S=>b(S)),setTimeout(()=>{if(!this.auth){const S=this.t.getImmediate({optional:!0});S?b(S):(Ve("FirebaseCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Fr)}},0),v()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Ve("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(pt("string"==typeof s.accessToken),new FI(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pt(null===e||"string"==typeof e),new kr(e)}}class NA{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=kr.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class RA{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new NA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ss{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.g(s),this.p=s=>t.writeSequenceNumber(s))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function LI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}ss.T=-1;class FE{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=LI(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Rt(n,e){return n<e?-1:n>e?1:0}function rd(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function LE(n){return n+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Er(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Er(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function VE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Du(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Po{constructor(e,t,s){void 0===t?t=0:t>e.length&&nt(),void 0===s?s=e.length-t:s>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Po.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Po?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Po{construct(e,t,s){return new Zt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const MA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Po{construct(e,t,s){return new Vn(e,t,s)}static isValidIdentifier(e){return MA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vn(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new Oe(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const v=e[a];if("\\"===v){if(a+1===e.length)throw new Oe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[a+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new Oe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,a+=2}else"`"===v?(p=!p,a++):"."!==v||p?(s+=v,a++):(l(),a++)}if(l(),p)throw new Oe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(t)}static emptyPath(){return new Vn([])}}class Wp{constructor(e){this.fields=e,e.sort(Vn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rd(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Zr(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Zr(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const VI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tu(n){if(pt(!!n),"string"==typeof n){let e=0;const t=VI.exec(n);if(pt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wr(n.seconds),nanos:wr(n.nanos)}}function wr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function it(n){return"string"==typeof n?Zr.fromBase64String(n):Zr.fromUint8Array(n)}function jE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function UI(n){const e=n.mapValue.fields.__previous_value__;return jE(e)?UI(e):e}function zp(n){const e=Tu(n.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}function Sa(n){return null==n}function Cy(n){return 0===n&&1/n==-1/0}function Zp(n){return"number"==typeof n&&Number.isInteger(n)&&!Cy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(Zt.fromString(e))}static fromName(e){return new Je(Zt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new Zt(e.slice()))}}function ln(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jE(n)?4:10:nt()}function Au(n,e){const t=ln(n);if(t!==ln(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zp(n).isEqual(zp(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Tu(s.timestampValue),p=Tu(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,it(n.bytesValue).isEqual(it(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return wr(s.geoPointValue.latitude)===wr(a.geoPointValue.latitude)&&wr(s.geoPointValue.longitude)===wr(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return wr(s.integerValue)===wr(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=wr(s.doubleValue),p=wr(a.doubleValue);return l===p?Cy(l)===Cy(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return rd(n.arrayValue.values||[],e.arrayValue.values||[],Au);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(VE(l)!==VE(p))return!1;for(const v in l)if(l.hasOwnProperty(v)&&(void 0===p[v]||!Au(l[v],p[v])))return!1;return!0}(n,e);default:return nt()}var a}function Wh(n,e){return void 0!==(n.values||[]).find(t=>Au(t,e))}function Rc(n,e){const t=ln(n),s=ln(e);if(t!==s)return Rt(t,s);switch(t){case 0:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=wr(a.integerValue||a.doubleValue),v=wr(l.integerValue||l.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1}(n,e);case 3:return BI(n.timestampValue,e.timestampValue);case 4:return BI(zp(n),zp(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(a,l){const p=it(a),v=it(l);return p.compareTo(v)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),v=l.split("/");for(let b=0;b<p.length&&b<v.length;b++){const S=Rt(p[b],v[b]);if(0!==S)return S}return Rt(p.length,v.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=Rt(wr(a.latitude),wr(l.latitude));return 0!==p?p:Rt(wr(a.longitude),wr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],v=l.values||[];for(let b=0;b<p.length&&b<v.length;++b){const S=Rc(p[b],v[b]);if(S)return S}return Rt(p.length,v.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){const p=a.fields||{},v=Object.keys(p),b=l.fields||{},S=Object.keys(b);v.sort(),S.sort();for(let R=0;R<v.length&&R<S.length;++R){const P=Rt(v[R],S[R]);if(0!==P)return P;const Y=Rc(p[v[R]],b[S[R]]);if(0!==Y)return Y}return Rt(v.length,S.length)}(n.mapValue,e.mapValue);default:throw nt()}}function BI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=Tu(n),s=Tu(e),a=Rt(t.seconds,s.seconds);return 0!==a?a:Rt(t.nanos,s.nanos)}function Dy(n){return Ty(n)}function Ty(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=Tu(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?it(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=Ty(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const v of a)p?p=!1:l+=",",l+=`${v}:${Ty(s.fields[v])}`;return l+"}"}(n.mapValue):nt();var e}function Kp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ay(n){return!!n&&"integerValue"in n}function $E(n){return!!n&&"arrayValue"in n}function jI(n){return!!n&&"nullValue"in n}function $I(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mc(n){return!!n&&"mapValue"in n}function Yp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Du(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Yp(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yp(n.arrayValue.values[t]);return e}return Object.assign({},n)}class mi{constructor(e){this.value=e}static empty(){return new mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Mc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yp(t)}setAll(e){let t=Vn.emptyPath(),s={},a=[];e.forEach((p,v)=>{if(!t.isImmediateParentOf(v)){const b=this.getFieldsMap(t);this.applyChanges(b,s,a),s={},a=[],t=v.popLast()}p?s[v.lastSegment()]=Yp(p):a.push(v.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Mc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Au(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Mc(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Du(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new mi(Yp(this.value))}}function HI(n){const e=[];return Du(n.fields,(t,s)=>{const a=new Vn([t]);if(Mc(s)){const l=HI(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new Wp(e)}class yn{constructor(e,t,s,a,l){this.key=e,this.documentType=t,this.version=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new yn(e,0,Ct.min(),mi.empty(),0)}static newFoundDocument(e,t,s){return new yn(e,1,t,s,0)}static newNoDocument(e,t){return new yn(e,2,t,mi.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,mi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new yn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class GI{constructor(e,t=null,s=[],a=[],l=null,p=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=v,this.A=null}}function HE(n,e=null,t=[],s=[],a=null,l=null,p=null){return new GI(n,e,t,s,a,l,p)}function zh(n){const e=He(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>function(n){return n.field.canonicalString()+n.op.toString()+Dy(n.value)}(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Sa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=qE(e.startAt)),e.endAt&&(t+="|ub:",t+=qE(e.endAt)),e.A=t}return e.A}function Oc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!$N(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(s=e.filters[a]).op||!t.field.isEqual(s.field)||!Au(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Jp(n.startAt,e.startAt)&&Jp(n.endAt,e.endAt)}function Pc(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Pi extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,s):new kA(e,t,s):"array-contains"===t?new FA(e,s):"in"===t?new zI(e,s):"not-in"===t?new LA(e,s):"array-contains-any"===t?new VA(e,s):new Pi(e,t,s)}static R(e,t,s){return"in"===t?new qI(e,s):new WI(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Rc(t,this.value)):null!==t&&ln(this.value)===ln(t)&&this.P(Rc(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class kA extends Pi{constructor(e,t,s){super(e,t,s),this.key=Je.fromName(s.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.P(t)}}class qI extends Pi{constructor(e,t){super(e,"in",t),this.keys=GE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class WI extends Pi{constructor(e,t){super(e,"not-in",t),this.keys=GE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Je.fromName(s.referenceValue))}class FA extends Pi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $E(t)&&Wh(t.arrayValue,this.value)}}class zI extends Pi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wh(this.value.arrayValue,t)}}class LA extends Pi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wh(this.value.arrayValue,t)}}class VA extends Pi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$E(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Wh(this.value.arrayValue,s))}}class Sy{constructor(e,t){this.position=e,this.before=t}}function qE(n){return`${n.before?"b":"a"}:${n.position.map(e=>Dy(e)).join(",")}`}class Qp{constructor(e,t="asc"){this.field=e,this.dir=t}}function $N(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function WE(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(s=l.field.isKeyField()?Je.comparator(Je.fromName(p.referenceValue),t.key):Rc(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return n.before?s<=0:s<0}function Jp(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Au(n.position[t],e.position[t]))return!1;return!0}class Su{constructor(e,t=null,s=[],a=[],l=null,p="F",v=null,b=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=v,this.endAt=b,this.V=null,this.S=null}}function ZI(n,e,t,s,a,l,p,v){return new Su(n,e,t,s,a,l,p,v)}function id(n){return new Su(n)}function kc(n){return!Sa(n.limit)&&"F"===n.limitType}function xy(n){return!Sa(n.limit)&&"L"===n.limitType}function zE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ZE(n){for(const e of n.filters)if(e.v())return e.field;return null}function KE(n){return null!==n.collectionGroup}function Zh(n){const e=He(n);if(null===e.V){e.V=[];const t=ZE(e),s=zE(e);if(null!==t&&null===s)t.isKeyField()||e.V.push(new Qp(t)),e.V.push(new Qp(Vn.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.V.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new Qp(Vn.keyField(),l))}}}return e.V}function Os(n){const e=He(n);if(!e.S)if("F"===e.limitType)e.S=HE(e.path,e.collectionGroup,Zh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Zh(e))t.push(new Qp(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new Sy(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Sy(e.startAt.position,!e.startAt.before):null;e.S=HE(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.S}function KI(n,e,t){return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xp(n,e){return Oc(Os(n),Os(e))&&n.limitType===e.limitType}function sd(n){return`${zh(Os(n))}|lt:${n.limitType}`}function YE(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${Dy(s.value)}`;var s}).join(", ")}]`),Sa(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: "+qE(n.startAt)),n.endAt&&(e+=", endAt: "+qE(n.endAt)),`Target(${e})`}(Os(n))}; limitType=${n.limitType})`}function Kh(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Je.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!WE(t.startAt,Zh(t),s)||t.endAt&&WE(t.endAt,Zh(t),s)));var t,s}function YI(n){return(e,t)=>{let s=!1;for(const a of Zh(n)){const l=QI(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function QI(n,e,t){const s=n.field.isKeyField()?Je.comparator(e.key,t.key):function(a,l,p){const v=l.data.field(a),b=p.data.field(a);return null!==v&&null!==b?Rc(v,b):nt()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return nt()}}function JI(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cy(e)?"-0":e}}function QE(n){return{integerValue:""+n}}function XI(n,e){return Zp(e)?QE(e):JI(n,e)}class Yh{constructor(){this._=void 0}}function UA(n,e,t){return n instanceof Qh?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof od?tC(n,e):n instanceof xu?nC(n,e):function(s,a){const l=JE(s,a),p=rC(l)+rC(s.C);return Ay(l)&&Ay(s.C)?QE(p):JI(s.N,p)}(n,e)}function eC(n,e,t){return n instanceof od?tC(n,e):n instanceof xu?nC(n,e):t}function JE(n,e){return n instanceof ad?Ay(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Qh extends Yh{}class od extends Yh{constructor(e){super(),this.elements=e}}function tC(n,e){const t=iC(e);for(const s of n.elements)t.some(a=>Au(a,s))||t.push(s);return{arrayValue:{values:t}}}class xu extends Yh{constructor(e){super(),this.elements=e}}function nC(n,e){let t=iC(e);for(const s of n.elements)t=t.filter(a=>!Au(a,s));return{arrayValue:{values:t}}}class ad extends Yh{constructor(e,t){super(),this.N=e,this.C=t}}function rC(n){return wr(n.integerValue||n.doubleValue)}function iC(n){return $E(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class eg{constructor(e,t){this.field=e,this.transform=t}}class jA{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ny(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ry{}function sC(n,e,t){n instanceof tg?function(s,a,l){const p=s.value.clone(),v=Oy(s.fieldTransforms,a,l.transformResults);p.setAll(v),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof Fc?function(s,a,l){if(!Ny(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=Oy(s.fieldTransforms,a,l.transformResults),v=a.data;v.setAll(aC(s)),v.setAll(p),a.convertToFoundDocument(l.version,v).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function My(n,e,t){var a;n instanceof tg?function(s,a,l){if(!Ny(s.precondition,a))return;const p=s.value.clone(),v=Py(s.fieldTransforms,l,a);p.setAll(v),a.convertToFoundDocument(XE(a),p).setHasLocalMutations()}(n,e,t):n instanceof Fc?function(s,a,l){if(!Ny(s.precondition,a))return;const p=Py(s.fieldTransforms,l,a),v=a.data;v.setAll(aC(s)),v.setAll(p),a.convertToFoundDocument(XE(a),v).setHasLocalMutations()}(n,e,t):Ny(n.precondition,a=e)&&a.convertToNoDocument(Ct.min())}function $A(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=JE(s.transform,a||null);null!=l&&(null==t&&(t=mi.empty()),t.set(s.field,l))}return t||null}function oC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&rd(t,s,(a,l)=>function(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof od&&s instanceof od||t instanceof xu&&s instanceof xu?rd(t.elements,s.elements,Au):t instanceof ad&&s instanceof ad?Au(t.C,s.C):t instanceof Qh&&s instanceof Qh);var t,s}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}function XE(n){return n.isFoundDocument()?n.version:Ct.min()}class tg extends Ry{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}}class Fc extends Ry{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}}function aC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function Oy(n,e,t){const s=new Map;pt(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,v=e.data.field(l.field);s.set(l.field,eC(p,v,t[a]))}return s}function Py(n,e,t){const s=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);s.set(a.field,UA(l,p,e))}return s}class Jh extends Ry{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ng extends Ry{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class HA{constructor(e){this.count=e}}var cr,Ot;function uC(n){switch(n){default:return nt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function ew(n){if(void 0===n)return ar("GRPC error has no .code"),ye.UNKNOWN;switch(n){case cr.OK:return ye.OK;case cr.CANCELLED:return ye.CANCELLED;case cr.UNKNOWN:return ye.UNKNOWN;case cr.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case cr.INTERNAL:return ye.INTERNAL;case cr.UNAVAILABLE:return ye.UNAVAILABLE;case cr.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case cr.NOT_FOUND:return ye.NOT_FOUND;case cr.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case cr.ABORTED:return ye.ABORTED;case cr.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case cr.DATA_LOSS:return ye.DATA_LOSS;default:return nt()}}(Ot=cr||(cr={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";class br{constructor(e,t){this.comparator=e,this.root=t||Lr.EMPTY}insert(e,t){return new br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rg(this.root,e,this.comparator,!1)}getReverseIterator(){return new rg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rg(this.root,e,this.comparator,!0)}}class rg{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lr{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=null!=s?s:Lr.RED,this.left=null!=a?a:Lr.EMPTY,this.right=null!=l?l:Lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Lr(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Lr.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1,Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,s,a){return this}insert(n,e,t){return new Lr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kn{constructor(e){this.comparator=e,this.data=new br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new GA(this.data.getIterator())}getIteratorFrom(e){return new GA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kn(this.comparator);return t.data=e,t}}class GA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const qA=new br(Je.comparator);function Kr(){return qA}const HN=new br(Je.comparator);function ig(){return HN}const ky=new br(Je.comparator);function cC(){return ky}const Xh=new kn(Je.comparator);function rn(...n){let e=Xh;for(const t of n)e=e.add(t);return e}const GN=new kn(Rt);function Fy(){return GN}class os{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,ef.createSynthesizedTargetChangeForCurrentChange(e,t)),new os(Ct.min(),s,Fy(),Kr(),rn())}}class ef{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ef(Zr.EMPTY_BYTE_STRING,t,rn(),rn(),rn())}}class tw{constructor(e,t,s,a){this.k=e,this.removedTargetIds=t,this.key=s,this.$=a}}class sg{constructor(e,t){this.targetId=e,this.O=t}}class lC{constructor(e,t,s=Zr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class dC{constructor(){this.F=0,this.M=fC(),this.L=Zr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=rn(),t=rn(),s=rn();return this.M.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:nt()}}),new ef(this.L,this.B,e,t,s)}G(){this.U=!1,this.M=fC()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class qN{constructor(e){this.tt=e,this.et=new Map,this.nt=Kr(),this.st=hC(),this.it=new kn(Rt)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const s=this.ut(t);switch(e.state){case 0:this.ht(t)&&s.j(e.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(e.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(t);break;case 3:this.ht(t)&&(s.Z(),s.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),s.j(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((s,a)=>{this.ht(a)&&t(a)})}ft(e){const t=e.targetId,s=e.O.count,a=this.dt(t);if(a){const l=a.target;if(Pc(l))if(0===s){const p=new Je(l.path);this.at(t,p,yn.newNoDocument(p,Ct.min()))}else pt(1===s);else this.wt(t)!==s&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((l,p)=>{const v=this.dt(p);if(v){if(l.current&&Pc(v.target)){const b=new Je(v.target.path);null!==this.nt.get(b)||this.gt(p,b)||this.at(p,b,yn.newNoDocument(b,e))}l.K&&(t.set(p,l.W()),l.G())}});let s=rn();this.st.forEach((l,p)=>{let v=!0;p.forEachWhile(b=>{const S=this.dt(b);return!S||2===S.purpose||(v=!1,!1)}),v&&(s=s.add(l))});const a=new os(e,t,this.it,this.nt,s);return this.nt=Kr(),this.st=hC(),this.it=new kn(Rt),a}ot(e,t){if(!this.ht(e))return;const s=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,s),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,s){if(!this.ht(e))return;const a=this.ut(e);this.gt(e,t)?a.H(t,1):a.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),s&&(this.nt=this.nt.insert(t,s))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new dC,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new kn(Rt),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new dC),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function hC(){return new br(Je.comparator)}function fC(){return new br(Je.comparator)}const WA={asc:"ASCENDING",desc:"DESCENDING"},nw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pC{constructor(e,t){this.databaseId=e,this.D=t}}function ud(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rw(n,e){return n.D?e.toBase64():e.toUint8Array()}function zA(n,e){return ud(n,e.toTimestamp())}function Yr(n){return pt(!!n),Ct.fromTimestamp(function(e){const t=Tu(e);return new Er(t.seconds,t.nanos)}(n))}function iw(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gC(n){const e=Zt.fromString(n);return pt(rf(e)),e}function og(n,e){return iw(n.databaseId,e.path)}function ko(n,e){const t=gC(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(mC(t))}function Ly(n,e){return iw(n.databaseId,e)}function sw(n){const e=gC(n);return 4===e.length?Zt.emptyPath():mC(e)}function ag(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mC(n){return pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ow(n,e,t){return{name:og(n,e),fields:t.value.mapValue.fields}}function ug(n,e,t){const s=ko(n,e.name),a=Yr(e.updateTime),l=new mi({mapValue:{fields:e.fields}}),p=yn.newFoundDocument(s,a,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function cd(n,e){let t;if(e instanceof tg)t={update:ow(n,e.key,e.value)};else if(e instanceof Jh)t={delete:og(n,e.key)};else if(e instanceof Fc)t={update:ow(n,e.key,e.data),updateMask:eS(e.fieldMask)};else{if(!(e instanceof ng))return nt();t={verify:og(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof Qh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof od)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof xu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ad)return{fieldPath:l.field.canonicalString(),increment:p.C};throw nt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:zA(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:nt()),t;var a}function cg(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?ur.updateTime(Yr(a.updateTime)):void 0!==a.exists?ur.exists(a.exists):ur.none():ur.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let v=null;"setToServerValue"in p?(pt("REQUEST_TIME"===p.setToServerValue),v=new Qh):"appendMissingElements"in p?v=new od(p.appendMissingElements.values||[]):"removeAllFromArray"in p?v=new xu(p.removeAllFromArray.values||[]):"increment"in p?v=new ad(l,p.increment):nt();const b=Vn.fromServerFormat(p.fieldPath);return new eg(b,v)}(n,a)):[];var a;if(e.update){const a=ko(n,e.update.name),l=new mi({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new Wp((e.updateMask.fieldPaths||[]).map(S=>Vn.fromServerFormat(S)));return new Fc(a,l,p,t,s)}return new tg(a,l,t,s)}if(e.delete){const a=ko(n,e.delete);return new Jh(a,t)}if(e.verify){const a=ko(n,e.verify);return new ng(a,t)}return nt()}function _C(n,e){return{documents:[Ly(n,e.path)]}}function vC(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Ly(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ly(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(v){if(0===v.length)return;const b=v.map(S=>function(R){if("=="===R.op){if($I(R.value))return{unaryFilter:{field:tf(R.field),op:"IS_NAN"}};if(jI(R.value))return{unaryFilter:{field:tf(R.field),op:"IS_NULL"}}}else if("!="===R.op){if($I(R.value))return{unaryFilter:{field:tf(R.field),op:"IS_NOT_NAN"}};if(jI(R.value))return{unaryFilter:{field:tf(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tf(R.field),op:JA(R.op),value:R.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(v){if(0!==v.length)return v.map(b=>{return{field:tf((S=b).field),direction:QA(S.dir)};var S})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(b=e.limit,n.D||Sa(b)?b:{value:b});var b;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=wC(e.startAt)),e.endAt&&(t.structuredQuery.endAt=wC(e.endAt)),t}function KA(n){let e=sw(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){pt(1===s);const R=t.from[0];R.allDescendants?a=R.collectionId:e=e.child(R.collectionId)}let l=[];t.where&&(l=EC(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(R=>{return new Qp(nf((P=R).field),function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let v=null;t.limit&&(v=function(R){let P;return P="object"==typeof R?R.value:R,Sa(P)?null:P}(t.limit));let b=null;t.startAt&&(b=bC(t.startAt));let S=null;return t.endAt&&(S=bC(t.endAt)),ZI(e,a,p,l,v,"F",b,S)}function EC(n){return n?void 0!==n.unaryFilter?[WN(n)]:void 0!==n.fieldFilter?[XA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>EC(e)).reduce((e,t)=>e.concat(t)):nt():[]}function wC(n){return{before:n.before,values:n.position}}function bC(n){return new Sy(n.values||[],!!n.before)}function QA(n){return WA[n]}function JA(n){return nw[n]}function tf(n){return{fieldPath:n.canonicalString()}}function nf(n){return Vn.fromServerFormat(n.fieldPath)}function XA(n){return Pi.create(nf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function WN(n){switch(n.unaryFilter.op){case"IS_NAN":const e=nf(n.unaryFilter.field);return Pi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=nf(n.unaryFilter.field);return Pi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=nf(n.unaryFilter.field);return Pi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=nf(n.unaryFilter.field);return Pi.create(a,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function eS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rf(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Fo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IC(e)),e=tS(n.get(t),e);return IC(e)}function tS(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function IC(n){return n+"\x01\x01"}function so(n){const e=n.length;if(pt(e>=2),2===e)return pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&nt(),n.charAt(p+1)){case"\x01":const v=n.substring(l,p);let b;0===a.length?b=v:(a+=v,b=a,a=""),s.push(b);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:nt()}l=p+2}return new Zt(s)}class ld{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class as{constructor(e,t,s){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=s}}as.store="owner",as.key="owner";class Lc{constructor(e,t,s){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s}}Lc.store="mutationQueues",Lc.keyPath="userId";class Sn{constructor(e,t,s,a,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=a,this.mutations=l}}Sn.store="mutations",Sn.keyPath="batchId",Sn.userMutationsIndex="userMutationsIndex",Sn.userMutationsKeyPath=["userId","batchId"];class yi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Fo(t)]}static key(e,t,s){return[e,Fo(t),s]}}yi.store="documentMutations",yi.PLACEHOLDER=new yi;class Vy{constructor(e,t){this.path=e,this.readTime=t}}class nS{constructor(e,t){this.path=e,this.version=t}}class Un{constructor(e,t,s,a,l,p){this.unknownDocument=e,this.noDocument=t,this.document=s,this.hasCommittedMutations=a,this.readTime=l,this.parentPath=p}}Un.store="remoteDocuments",Un.readTimeIndex="readTimeIndex",Un.readTimeIndexPath="readTime",Un.collectionReadTimeIndex="collectionReadTimeIndex",Un.collectionReadTimeIndexPath=["parentPath","readTime"];class Lo{constructor(e){this.byteSize=e}}Lo.store="remoteDocumentGlobal",Lo.key="remoteDocumentGlobalKey";class ki{constructor(e,t,s,a,l,p,v){this.targetId=e,this.canonicalId=t,this.readTime=s,this.resumeToken=a,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=p,this.query=v}}ki.store="targets",ki.keyPath="targetId",ki.queryTargetsIndexName="queryTargetsIndex",ki.queryTargetsKeyPath=["canonicalId","targetId"];class Ir{constructor(e,t,s){this.targetId=e,this.path=t,this.sequenceNumber=s}}Ir.store="targetDocuments",Ir.keyPath=["targetId","path"],Ir.documentTargetsIndex="documentTargetsIndex",Ir.documentTargetsKeyPath=["path","targetId"];class us{constructor(e,t,s,a){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=a}}us.key="targetGlobalKey",us.store="targetGlobal";class Vc{constructor(e,t){this.collectionId=e,this.parent=t}}Vc.store="collectionParents",Vc.keyPath=["collectionId","parent"];class Nu{constructor(e,t,s,a){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=a}}Nu.store="clientMetadata",Nu.keyPath="clientId";class sf{constructor(e,t,s){this.bundleId=e,this.createTime=t,this.version=s}}sf.store="bundles",sf.keyPath="bundleId";class dd{constructor(e,t,s){this.name=e,this.readTime=t,this.bundledQuery=s}}dd.store="namedQueries",dd.keyPath="name";const rS=[Lc.store,Sn.store,yi.store,Un.store,ki.store,as.store,us.store,Ir.store,Nu.store,Lo.store,Vc.store,sf.store,dd.store],aw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Re((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Re?t:Re.resolve(t)}catch(t){return Re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.reject(t)}static resolve(e){return new Re((t,s)=>{t(e)})}static reject(e){return new Re((t,s)=>{s(e)})}static waitFor(e){return new Re((t,s)=>{let a=0,l=0,p=!1;e.forEach(v=>{++a,v.next(()=>{++l,p&&l===a&&t()},b=>s(b))}),p=!0,l===a&&t()})}static or(e){let t=Re.resolve(!1);for(const s of e)t=t.next(a=>a?Re.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}}class uw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Fr,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new oo(e,t.error)):this.Et.resolve()},this.transaction.onerror=s=>{const a=cs(s.target.error);this.Et.reject(new oo(e,a))}}static open(e,t,s,a){try{return new uw(t,e.transaction(a,s))}catch(l){throw new oo(t,l)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new hg(t)}}class Fi{constructor(e,t,s){this.name=e,this.version=t,this.At=s,12.2===Fi.Rt((0,xt.z$)())&&ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),of(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,xt.hl)())return!1;if(Fi.Pt())return!0;const e=(0,xt.z$)(),t=Fi.Rt(e),s=0<t&&t<10,a=Fi.vt(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(e){var t=this;return(0,be.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new oo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const v=p.target.error;a("VersionError"===v.name?new Oe(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===v.name?new Oe(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+v):new oo(e,v))},l.onupgradeneeded=p=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.At.Ct(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=s=>t.Nt(s)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,be.Z)(function*(){const p="readonly"===t;let v=0;for(;;){++v;try{l.db=yield l.Dt(e);const b=uw.open(l.db,e,p?"readonly":"readwrite",s),S=a(b).catch(R=>(b.abort(R),Re.reject(R))).toPromise();return S.catch(()=>{}),yield b.It,S}catch(b){const S="FirebaseError"!==b.name&&v<3;if(Ve("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),l.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qt{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return of(this.kt.delete())}}class oo extends Oe{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ao(n){return"IndexedDbTransactionError"===n.name}class hg{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),of(s)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),of(this.store.add(e))}get(e){return of(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),of(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),of(this.store.count())}Lt(e,t){const s=this.cursor(this.options(e,t)),a=[];return this.Bt(s,(l,p)=>{a.push(p)}).next(()=>a)}Ut(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.qt=!1;const a=this.cursor(s);return this.Bt(a,(l,p,v)=>v.delete())}Kt(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.Bt(a,t)}jt(e){const t=this.cursor({});return new Re((s,a)=>{t.onerror=l=>{const p=cs(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(v=>{v?p.continue():s()}):s()}})}Bt(e,t){const s=[];return new Re((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const v=p.target.result;if(!v)return void a();const b=new Qt(v),S=t(v.primaryKey,v.value,b);if(S instanceof Re){const R=S.catch(P=>(b.done(),Re.reject(P)));s.push(R)}b.isDone?a():null===b.Ft?v.continue():v.continue(b.Ft)}}).next(()=>Re.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.qt?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function of(n){return new Re((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=cs(s.target.error);t(a)}})}let Et=!1;function cs(n){const e=Fi.Rt((0,xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Et||(Et=!0,setTimeout(()=>{throw s},0)),s}}return n}class Uy extends dg{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function lr(n,e){const t=He(n);return Fi.St(t.Qt,e)}class CC{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&sC(l,e,s[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&My(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&My(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const s=e.get(t.key),a=s;this.applyToLocalView(a),s.isValidDocument()||a.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&rd(this.mutations,e.mutations,(t,s)=>oC(t,s))&&rd(this.baseMutations,e.baseMutations,(t,s)=>oC(t,s))}}class By{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){pt(e.mutations.length===s.length);let a=cC();const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new By(e,t,s,a)}}class Ru{constructor(e,t,s,a,l=Ct.min(),p=Ct.min(),v=Zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=v}withSequenceNumber(e){return new Ru(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class iS{constructor(e){this.Wt=e}}function cw(n,e){if(e.document)return ug(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Je.fromSegments(e.noDocument.path),s=hd(e.noDocument.readTime),a=yn.newNoDocument(t,s);return e.hasCommittedMutations?a.setHasCommittedMutations():a}if(e.unknownDocument){const t=Je.fromSegments(e.unknownDocument.path),s=hd(e.unknownDocument.version);return yn.newUnknownDocument(t,s)}return nt()}function DC(n,e,t){const s=ls(t),a=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:og(v=n.Wt,(b=e).key),fields:b.data.value.mapValue.fields,updateTime:ud(v,b.version.toTimestamp())};return new Un(null,null,l,e.hasCommittedMutations,s,a)}var v,b;if(e.isNoDocument()){const l=e.key.path.toArray(),p=_i(e.version),v=e.hasCommittedMutations;return new Un(null,new Vy(l,p),null,v,s,a)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),p=_i(e.version);return new Un(new nS(l,p),null,null,!0,s,a)}return nt()}function ls(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xn(n){const e=new Er(n[0],n[1]);return Ct.fromTimestamp(e)}function _i(n){const e=n.toTimestamp();return new ld(e.seconds,e.nanoseconds)}function hd(n){const e=new Er(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function af(n,e){const t=(e.baseMutations||[]).map(l=>cg(n.Wt,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>cg(n.Wt,l)),a=Er.fromMillis(e.localWriteTimeMs);return new CC(e.batchId,a,t,s)}function uf(n){const e=hd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hd(n.lastLimboFreeSnapshotVersion):Ct.min();let s;var a;return void 0!==n.query.documents?(pt(1===(a=n.query).documents.length),s=Os(id(sw(a.documents[0])))):s=Os(KA(n.query)),new Ru(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Zr.fromBase64String(n.resumeToken))}function jy(n,e){const t=_i(e.snapshotVersion),s=_i(e.lastLimboFreeSnapshotVersion);let a;a=Pc(e.target)?_C(n.Wt,e.target):vC(n.Wt,e.target);const l=e.resumeToken.toBase64();return new ki(e.targetId,zh(e.target),t,l,e.sequenceNumber,s,a)}function Uc(n){const e=KA({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?KI(e,e.limit,"L"):e}class fg{getBundleMetadata(e,t){return TC(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:hd(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return TC(e).put({bundleId:(s=t).id,createTime:_i(Yr(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Bc(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Uc(a.bundledQuery),readTime:hd(a.readTime)};var a})}saveNamedQuery(e,t){return Bc(e).put({name:(s=t).name,readTime:_i(Yr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function TC(n){return lr(n,sf.store)}function Bc(n){return lr(n,dd.store)}class sS{constructor(){this.Gt=new $y}addToCollectionParentIndex(e,t){return this.Gt.add(t),Re.resolve()}getCollectionParents(e,t){return Re.resolve(this.Gt.getEntries(t))}}class $y{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new kn(Zt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new kn(Zt.comparator)).toArray()}}class lw{constructor(){this.zt=new $y}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const l={collectionId:s,parent:Fo(a)};return cf(e).put(l)}return Re.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[LE(t),""],!1,!0);return cf(e).Lt(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(so(p.parent))}return s})}}function cf(n){return lr(n,Vc.store)}const Hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Li{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fd(n,e,t){const s=n.store(Sn.store),a=n.store(yi.store),l=[],p=IDBKeyRange.only(t.batchId);let v=0;const b=s.Kt({range:p},(R,P,Y)=>(v++,Y.delete()));l.push(b.next(()=>{pt(1===v)}));const S=[];for(const R of t.mutations){const P=yi.key(e,R.key.path,t.batchId);l.push(a.delete(P)),S.push(R.key)}return Re.waitFor(l).next(()=>S)}function Gy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(41943040,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);class lf{constructor(e,t,s,a){this.userId=e,this.N=t,this.Ht=s,this.referenceDelegate=a,this.Jt={}}static Yt(e,t,s,a){pt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new lf(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mu(e).Kt({index:Sn.userMutationsIndex,range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=pd(e),p=Mu(e);return p.add({}).next(v=>{pt("number"==typeof v);const b=new CC(v,t,s,a),S=function(Y,J,xe){const je=xe.baseMutations.map(Pt=>cd(Y.Wt,Pt)),Ke=xe.mutations.map(Pt=>cd(Y.Wt,Pt));return new Sn(J,xe.batchId,xe.localWriteTime.toMillis(),je,Ke)}(this.N,this.userId,b),R=[];let P=new kn((Y,J)=>Rt(Y.canonicalString(),J.canonicalString()));for(const Y of a){const J=yi.key(this.userId,Y.key.path,v);P=P.add(Y.key.path.popLast()),R.push(p.put(S)),R.push(l.put(J,yi.PLACEHOLDER))}return P.forEach(Y=>{R.push(this.Ht.addToCollectionParentIndex(e,Y))}),e.addOnCommittedListener(()=>{this.Jt[v]=b.keys()}),Re.waitFor(R).next(()=>b)})}lookupMutationBatch(e,t){return Mu(e).get(t).next(s=>s?(pt(s.userId===this.userId),af(this.N,s)):null)}Xt(e,t){return this.Jt[t]?Re.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Jt[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Mu(e).Kt({index:Sn.userMutationsIndex,range:a},(p,v,b)=>{v.userId===this.userId&&(pt(v.batchId>=s),l=af(this.N,v)),b.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Mu(e).Kt({index:Sn.userMutationsIndex,range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mu(e).Lt(Sn.userMutationsIndex,t).next(s=>s.map(a=>af(this.N,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=yi.prefixForPath(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return pd(e).Kt({range:a},(p,v,b)=>{const[S,R,P]=p,Y=so(R);if(S===this.userId&&t.path.isEqual(Y))return Mu(e).get(P).next(J=>{if(!J)throw nt();pt(J.userId===this.userId),l.push(af(this.N,J))});b.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kn(Rt);const a=[];return t.forEach(l=>{const p=yi.prefixForPath(this.userId,l.path),v=IDBKeyRange.lowerBound(p),b=pd(e).Kt({range:v},(S,R,P)=>{const[Y,J,xe]=S,je=so(J);Y===this.userId&&l.path.isEqual(je)?s=s.add(xe):P.done()});a.push(b)}),Re.waitFor(a).next(()=>this.Zt(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=yi.prefixForPath(this.userId,s),p=IDBKeyRange.lowerBound(l);let v=new kn(Rt);return pd(e).Kt({range:p},(b,S,R)=>{const[P,Y,J]=b,xe=so(Y);P===this.userId&&s.isPrefixOf(xe)?xe.length===a&&(v=v.add(J)):R.done()}).next(()=>this.Zt(e,v))}Zt(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Mu(e).get(l).next(p=>{if(null===p)throw nt();pt(p.userId===this.userId),s.push(af(this.N,p))}))}),Re.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return fd(e.Qt,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Re.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Re.resolve();const s=IDBKeyRange.lowerBound(yi.prefixForUser(this.userId)),a=[];return pd(e).Kt({range:s},(l,p,v)=>{if(l[0]===this.userId){const b=so(l[1]);a.push(b)}else v.done()}).next(()=>{pt(0===a.length)})})}containsKey(e,t){return dw(e,this.userId,t)}ee(e){return pg(e).get(this.userId).next(t=>t||new Lc(this.userId,-1,""))}}function dw(n,e,t){const s=yi.prefixForPath(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return pd(n).Kt({range:l,qt:!0},(v,b,S)=>{const[R,P,Y]=v;R===e&&P===a&&(p=!0),S.done()}).next(()=>p)}function Mu(n){return lr(n,Sn.store)}function pd(n){return lr(n,yi.store)}function pg(n){return lr(n,Lc.store)}class gd{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new gd(0)}static ie(){return new gd(-1)}}class hw{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const s=new gd(t.highestTargetId);return t.highestTargetId=s.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>Ct.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.re(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.oe(e,a)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(s=>(s.targetCount+=1,this.ce(t,s),this.oe(e,s))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jc(e).delete(t.targetId)).next(()=>this.re(e)).next(s=>(pt(s.targetCount>0),s.targetCount-=1,this.oe(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return jc(e).Kt((p,v)=>{const b=uf(v);b.sequenceNumber<=t&&null===s.get(b.targetId)&&(a++,l.push(this.removeTargetData(e,b)))}).next(()=>Re.waitFor(l)).next(()=>a)}forEachTarget(e,t){return jc(e).Kt((s,a)=>{const l=uf(a);t(l)})}re(e){return oS(e).get(us.key).next(t=>(pt(null!==t),t))}oe(e,t){return oS(e).put(us.key,t)}ae(e,t){return jc(e).put(jy(this.N,t))}ce(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const s=zh(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return jc(e).Kt({range:a,index:ki.queryTargetsIndexName},(p,v,b)=>{const S=uf(v);Oc(t,S.target)&&(l=S,b.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=md(e);return t.forEach(p=>{const v=Fo(p.path);a.push(l.put(new Ir(s,v))),a.push(this.referenceDelegate.addReference(e,s,p))}),Re.waitFor(a)}removeMatchingKeys(e,t,s){const a=md(e);return Re.forEach(t,l=>{const p=Fo(l.path);return Re.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=md(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=md(e);let l=rn();return a.Kt({range:s,qt:!0},(p,v,b)=>{const S=so(p[1]),R=new Je(S);l=l.add(R)}).next(()=>l)}containsKey(e,t){const s=Fo(t.path),a=IDBKeyRange.bound([s],[LE(s)],!1,!0);let l=0;return md(e).Kt({index:Ir.documentTargetsIndex,qt:!0,range:a},([p,v],b,S)=>{0!==p&&(l++,S.done())}).next(()=>l>0)}Tt(e,t){return jc(e).get(t).next(s=>s?uf(s):null)}}function jc(n){return lr(n,ki.store)}function oS(n){return lr(n,us.store)}function md(n){return lr(n,Ir.store)}function ct(n){return AC.apply(this,arguments)}function AC(){return(AC=(0,be.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==aw)throw n;Ve("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function df([n,e],[t,s]){const a=Rt(n,t);return 0===a?Rt(e,s):a}class aS{constructor(e){this.ue=e,this.buffer=new kn(df),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();df(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uS{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const s=this.de?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,be.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){ao(a)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ct(a)}yield t._e(e)}))}}class cS{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Re.resolve(ss.T);const s=new aS(t);return this.me.forEachTarget(e,a=>s.fe(a.sequenceNumber)).next(()=>this.me.ye(e,a=>s.fe(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.me.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(Hy)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hy):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let s,a,l,p,v,b,S;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),a=this.params.maximumSequenceNumbersToCollect):a=P,p=Date.now(),this.nthSequenceNumber(e,a))).next(P=>(s=P,v=Date.now(),this.removeTargets(e,s,t))).next(P=>(l=P,b=Date.now(),this.removeOrphanedDocuments(e,s))).next(P=>(S=Date.now(),Iy()<=yu.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-R}ms\n\tDetermined least recently used ${a} in `+(v-p)+`ms\n\tRemoved ${l} targets in `+(b-v)+`ms\n\tRemoved ${P} documents in `+(S-b)+`ms\nTotal Duration: ${S-R}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:P})))}}class zN{constructor(e,t){this.db=e,this.garbageCollector=new cS(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Te(e){let t=0;return this.ye(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(s,a)=>t(a))}addReference(e,t,s){return fw(e,s)}removeReference(e,t,s){return fw(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return fw(e,t)}Ie(e,t){return function(s,a){let l=!1;return pg(s).jt(p=>dw(s,p,a).next(v=>(v&&(l=!0),Re.resolve(!v)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Ee(e,(p,v)=>{if(v<=t){const b=this.Ie(e,p).next(S=>{if(!S)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p),md(e).delete([0,Fo(p.path)])))});a.push(b)}}).next(()=>Re.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return fw(e,t)}Ee(e,t){const s=md(e);let a,l=ss.T;return s.Kt({index:Ir.documentTargetsIndex},([p,v],{path:b,sequenceNumber:S})=>{0===p?(l!==ss.T&&t(new Je(so(a)),l),l=S,a=b):l=ss.T}).next(()=>{l!==ss.T&&t(new Je(so(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fw(n,e){return md(n).put((s=n.currentSequenceNumber,new Ir(0,Fo(e.path),s)));var s}class hf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0!==a){for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t])}else this.inner[s]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),!0;return!1}forEach(e){Du(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return UE(this.inner)}}class Qr{constructor(){this.changes=new hf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Ct.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:yn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Re.resolve(s.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lS{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,s){return $c(e).put(Wy(t),s)}removeEntry(e,t){const s=$c(e),a=Wy(t);return s.delete(a)}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Ae(e,s)))}getEntry(e,t){return $c(e).get(Wy(t)).next(s=>this.Re(t,s))}be(e,t){return $c(e).get(Wy(t)).next(s=>({document:this.Re(t,s),size:Gy(s)}))}getEntries(e,t){let s=Kr();return this.Pe(e,t,(a,l)=>{const p=this.Re(a,l);s=s.insert(a,p)}).next(()=>s)}ve(e,t){let s=Kr(),a=new br(Je.comparator);return this.Pe(e,t,(l,p)=>{const v=this.Re(l,p);s=s.insert(l,v),a=a.insert(l,Gy(p))}).next(()=>({documents:s,Ve:a}))}Pe(e,t,s){if(t.isEmpty())return Re.resolve();const a=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let p=l.getNext();return $c(e).Kt({range:a},(v,b,S)=>{const R=Je.fromSegments(v);for(;p&&Je.comparator(p,R)<0;)s(p,null),p=l.getNext();p&&p.isEqual(R)&&(s(p,b),p=l.hasNext()?l.getNext():null),p?S.Mt(p.path.toArray()):S.done()}).next(()=>{for(;p;)s(p,null),p=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,s){let a=Kr();const l=t.path.length+1,p={};if(s.isEqual(Ct.min())){const v=t.path.toArray();p.range=IDBKeyRange.lowerBound(v)}else{const v=t.path.toArray(),b=ls(s);p.range=IDBKeyRange.lowerBound([v,b],!0),p.index=Un.collectionReadTimeIndex}return $c(e).Kt(p,(v,b,S)=>{if(v.length!==l)return;const R=cw(this.N,b);t.path.isPrefixOf(R.key.path)?Kh(t,R)&&(a=a.insert(R.key,R)):S.done()}).next(()=>a)}newChangeBuffer(e){return new dS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qy(e).get(Lo.key).next(t=>(pt(!!t),t))}Ae(e,t){return qy(e).put(Lo.key,t)}Re(e,t){if(t){const s=cw(this.N,t);if(!s.isNoDocument()||!s.version.isEqual(Ct.min()))return s}return yn.newInvalidDocument(e)}}class dS extends Qr{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new hf(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new kn((l,p)=>Rt(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const v=this.De.get(l);if(p.document.isValidDocument()){const b=DC(this.Se.N,p.document,this.getReadTime(l));a=a.add(l.path.popLast()),s+=Gy(b)-v,t.push(this.Se.addEntry(e,l,b))}else if(s-=v,this.trackRemovals){const b=DC(this.Se.N,yn.newNoDocument(l,Ct.min()),this.getReadTime(l));t.push(this.Se.addEntry(e,l,b))}else t.push(this.Se.removeEntry(e,l))}),a.forEach(l=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,l))}),t.push(this.Se.updateMetadata(e,s)),Re.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(s=>(this.De.set(t,s.size),s.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:s,Ve:a})=>(a.forEach((l,p)=>{this.De.set(l,p)}),s))}}function qy(n){return lr(n,Lo.store)}function $c(n){return lr(n,Un.store)}function Wy(n){return n.path.toArray()}class hS{constructor(e){this.N=e}Ct(e,t,s,a){pt(s<a&&s>=0&&a<=11);const l=new uw("createOrUpgrade",t);var v;s<1&&a>=1&&(e.createObjectStore(as.store),(v=e).createObjectStore(Lc.store,{keyPath:Lc.keyPath}),v.createObjectStore(Sn.store,{keyPath:Sn.keyPath,autoIncrement:!0}).createIndex(Sn.userMutationsIndex,Sn.userMutationsKeyPath,{unique:!0}),v.createObjectStore(yi.store),SC(e),function(v){v.createObjectStore(Un.store)}(e));let p=Re.resolve();return s<3&&a>=3&&(0!==s&&(function(v){v.deleteObjectStore(Ir.store),v.deleteObjectStore(ki.store),v.deleteObjectStore(us.store)}(e),SC(e)),p=p.next(()=>function(v){const b=v.store(us.store),S=new us(0,0,Ct.min().toTimestamp(),0);return b.put(us.key,S)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(v,b){return b.store(Sn.store).Lt().next(S=>{v.deleteObjectStore(Sn.store),v.createObjectStore(Sn.store,{keyPath:Sn.keyPath,autoIncrement:!0}).createIndex(Sn.userMutationsIndex,Sn.userMutationsKeyPath,{unique:!0});const R=b.store(Sn.store),P=S.map(Y=>R.put(Y));return Re.waitFor(P)})}(e,l))),p=p.next(()=>{!function(v){v.createObjectStore(Nu.store,{keyPath:Nu.keyPath})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Ce(l))),s<6&&a>=6&&(p=p.next(()=>(function(v){v.createObjectStore(Lo.store)}(e),this.Ne(l)))),s<7&&a>=7&&(p=p.next(()=>this.xe(l))),s<8&&a>=8&&(p=p.next(()=>this.ke(e,l))),s<9&&a>=9&&(p=p.next(()=>{(function(v){v.objectStoreNames.contains("remoteDocumentChanges")&&v.deleteObjectStore("remoteDocumentChanges")})(e),function(v){const b=v.objectStore(Un.store);b.createIndex(Un.readTimeIndex,Un.readTimeIndexPath,{unique:!1}),b.createIndex(Un.collectionReadTimeIndex,Un.collectionReadTimeIndexPath,{unique:!1})}(t)})),s<10&&a>=10&&(p=p.next(()=>this.$e(l))),s<11&&a>=11&&(p=p.next(()=>{(function(v){v.createObjectStore(sf.store,{keyPath:sf.keyPath})})(e),function(v){v.createObjectStore(dd.store,{keyPath:dd.keyPath})}(e)})),p}Ne(e){let t=0;return e.store(Un.store).Kt((s,a)=>{t+=Gy(a)}).next(()=>{const s=new Lo(t);return e.store(Lo.store).put(Lo.key,s)})}Ce(e){const t=e.store(Lc.store),s=e.store(Sn.store);return t.Lt().next(a=>Re.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.Lt(Sn.userMutationsIndex,p).next(v=>Re.forEach(v,b=>{pt(b.userId===l.userId);const S=af(this.N,b);return fd(e,l.userId,S).next(()=>{})}))}))}xe(e){const t=e.store(Ir.store),s=e.store(Un.store);return e.store(us.store).get(us.key).next(a=>{const l=[];return s.Kt((p,v)=>{const b=new Zt(p),S=[0,Fo(b)];l.push(t.get(S).next(R=>R?Re.resolve():t.put(new Ir(0,Fo(b),a.highestListenSequenceNumber))))}).next(()=>Re.waitFor(l))})}ke(e,t){e.createObjectStore(Vc.store,{keyPath:Vc.keyPath});const s=t.store(Vc.store),a=new $y,l=p=>{if(a.add(p)){const v=p.lastSegment(),b=p.popLast();return s.put({collectionId:v,parent:Fo(b)})}};return t.store(Un.store).Kt({qt:!0},(p,v)=>{const b=new Zt(p);return l(b.popLast())}).next(()=>t.store(yi.store).Kt({qt:!0},([p,v,b],S)=>{const R=so(v);return l(R.popLast())}))}$e(e){const t=e.store(ki.store);return t.Kt((s,a)=>{const l=uf(a),p=jy(this.N,l);return t.put(p)})}}function SC(n){n.createObjectStore(Ir.store,{keyPath:Ir.keyPath}).createIndex(Ir.documentTargetsIndex,Ir.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(ki.store,{keyPath:ki.keyPath}).createIndex(ki.queryTargetsIndexName,ki.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(us.store)}const pw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gw{constructor(e,t,s,a,l,p,v,b,S,R){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Oe=l,this.window=p,this.document=v,this.Fe=S,this.Me=R,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=P=>Promise.resolve(),!gw.bt())throw new Oe(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zN(this,a),this.We=t+"main",this.N=new iS(b),this.Ge=new Fi(this.We,11,new hS(this.N)),this.ze=new hw(this.referenceDelegate,this.N),this.Ht=new lw,this.He=new lS(this.N,this.Ht),this.Je=new fg,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===R&&ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(ye.FAILED_PRECONDITION,pw);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new ss(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var s=(0,be.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,be.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zy(e).put(new Nu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(ao(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return yd(e).get(as.key).next(t=>Re.resolve(this.cn(t)))}un(e){return zy(e).delete(this.clientId)}hn(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=lr(s,Nu.store);return a.Lt().next(l=>{const p=e.fn(l,18e5),v=l.filter(b=>-1===p.indexOf(b));return Re.forEach(v,b=>a.delete(b.clientId)).next(()=>v)})}).catch(()=>[]);if(e.Ye)for(const s of t)e.Ye.removeItem(e.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Re.resolve(!0):yd(e).get(as.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Oe(ye.FAILED_PRECONDITION,pw);return!1}}return!(!this.networkEnabled||!this.inForeground)||zy(e).Lt().next(s=>void 0===this.fn(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,v=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&v)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[as.store,Nu.store],t=>{const s=new Uy(t,ss.T);return e.on(s).next(()=>e.un(s))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(s=>this.ln(s.updateTimeMs,t)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>zy(e).Lt().next(t=>this.fn(t,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(e){return lf.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,s){let l;return Ve("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",rS,p=>(l=new Uy(p,this.Le?this.Le.next():ss.T),"readwrite-primary"===t?this.sn(l).next(v=>!!v||this.rn(l)).next(v=>{if(!v)throw ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Oe(ye.FAILED_PRECONDITION,aw);return s(l)}).next(v=>this.an(l).next(()=>v)):this.Tn(l).next(()=>s(l)))).then(p=>(l.raiseOnCommittedEvent(),p))}Tn(e){return yd(e).get(as.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.cn(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(ye.FAILED_PRECONDITION,pw)})}an(e){const t=new as(this.clientId,this.allowTabSynchronization,Date.now());return yd(e).put(as.key,t)}static bt(){return Fi.bt()}on(e){const t=yd(e);return t.get(as.key).next(s=>this.cn(s)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete(as.key)):Re.resolve())}ln(e,t){const s=Date.now();return!(e<s-t||e>s&&(ar(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,xt.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const s=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return ar("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){ar("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yd(n){return lr(n,as.store)}function zy(n){return lr(n,Nu.store)}function mw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class xC{constructor(e,t){this.progress=e,this.En=t}}class Zy{constructor(e,t,s){this.He=e,this.In=t,this.Ht=s}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(s=>this.Rn(e,t,s))}Rn(e,t,s){return this.He.getEntry(e,t).next(a=>{for(const l of s)l.applyToLocalView(a);return a})}bn(e,t){e.forEach((s,a)=>{for(const l of t)l.applyToLocalView(a)})}Pn(e,t){return this.He.getEntries(e,t).next(s=>this.vn(e,s).next(()=>s))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>this.bn(t,s))}getDocumentsMatchingQuery(e,t,s){return Je.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.Vn(e,t.path):KE(t)?this.Sn(e,t,s):this.Dn(e,t,s);var a}Vn(e,t){return this.An(e,new Je(t)).next(s=>{let a=ig();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}Sn(e,t,s){const a=t.collectionGroup;let l=ig();return this.Ht.getCollectionParents(e,a).next(p=>Re.forEach(p,v=>{const b=(S=t,R=v.child(a),new Su(R,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt));var S,R;return this.Dn(e,b,s).next(S=>{S.forEach((R,P)=>{l=l.insert(R,P)})})}).next(()=>l))}Dn(e,t,s){let a,l;return this.He.getDocumentsMatchingQuery(e,t,s).next(p=>(a=p,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(p=>(l=p,this.Cn(e,l,a).next(v=>{a=v;for(const b of l)for(const S of b.mutations){const R=S.key;let P=a.get(R);null==P&&(P=yn.newInvalidDocument(R),a=a.insert(R,P)),My(S,P,b.localWriteTime),P.isFoundDocument()||(a=a.remove(R))}}))).next(()=>(a.forEach((p,v)=>{Kh(t,v)||(a=a.remove(p))}),a))}Cn(e,t,s){let a=rn();for(const p of t)for(const v of p.mutations)v instanceof Fc&&null===s.get(v.key)&&(a=a.add(v.key));let l=s;return this.He.getEntries(e,a).next(p=>(p.forEach((v,b)=>{b.isFoundDocument()&&(l=l.insert(v,b))}),l))}}class yw{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Nn=s,this.xn=a}static kn(e,t){let s=rn(),a=rn();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new yw(e,t.fromCache,s,a)}}class fS{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,s,a){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||s.isEqual(Ct.min())?this.Fn(e,t):this.On.Pn(e,a).next(l=>{const p=this.Mn(t,l);return(kc(t)||xy(t))&&this.Ln(t.limitType,p,a,s)?this.Fn(e,t):(Iy()<=yu.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),YE(t)),this.On.getDocumentsMatchingQuery(e,t,s).next(v=>(p.forEach(b=>{v=v.insert(b.key,b)}),v)))});var l}Mn(e,t){let s=new kn(YI(e));return t.forEach((a,l)=>{Kh(e,l)&&(s=s.add(l))}),s}Ln(e,t,s,a){if(s.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Fn(e,t){return Iy()<=yu.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",YE(t)),this.On.getDocumentsMatchingQuery(e,t,Ct.min())}}class pS{constructor(e,t,s,a){this.persistence=e,this.Bn=t,this.N=a,this.Un=new br(Rt),this.qn=new hf(l=>zh(l),Oc),this.Kn=Ct.min(),this.In=e.getMutationQueue(s),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new Zy(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function NC(n,e,t,s){return new pS(n,e,t,s)}function RC(n,e){return _w.apply(this,arguments)}function _w(){return(_w=(0,be.Z)(function*(n,e){const t=He(n);let s=t.In,a=t.Qn;const l=yield t.persistence.runTransaction("Handle user change","readonly",p=>{let v;return t.In.getAllMutationBatches(p).next(b=>(v=b,s=t.persistence.getMutationQueue(e),a=new Zy(t.jn,s,t.persistence.getIndexManager()),s.getAllMutationBatches(p))).next(b=>{const S=[],R=[];let P=rn();for(const Y of v){S.push(Y.batchId);for(const J of Y.mutations)P=P.add(J.key)}for(const Y of b){R.push(Y.batchId);for(const J of Y.mutations)P=P.add(J.key)}return a.Pn(p,P).next(Y=>({Wn:Y,removedBatchIds:S,addedBatchIds:R}))})});return t.In=s,t.Qn=a,t.Bn.$n(t.Qn),l})).apply(this,arguments)}function gS(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.jn.newChangeBuffer({trackRemovals:!0});return function(p,v,b,S){const R=b.batch,P=R.keys();let Y=Re.resolve();return P.forEach(J=>{Y=Y.next(()=>S.getEntry(v,J)).next(xe=>{const je=b.docVersions.get(J);pt(null!==je),xe.version.compareTo(je)<0&&(R.applyToRemoteDocument(xe,b),xe.isValidDocument()&&S.addEntry(xe,b.commitVersion))})}),Y.next(()=>p.In.removeMutationBatch(v,R))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.In.performConsistencyCheck(s)).next(()=>t.Qn.Pn(s,a))})}function MC(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function gg(n,e){const t=He(n),s=e.snapshotVersion;let a=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.jn.newChangeBuffer({trackRemovals:!0});a=t.Un;const v=[];e.targetChanges.forEach((S,R)=>{const P=a.get(R);if(!P)return;v.push(t.ze.removeMatchingKeys(l,S.removedDocuments,R).next(()=>t.ze.addMatchingKeys(l,S.addedDocuments,R)));const Y=S.resumeToken;if(Y.approximateByteSize()>0){const J=P.withResumeToken(Y,s).withSequenceNumber(l.currentSequenceNumber);a=a.insert(R,J),xe=P,Ke=S,pt((je=J).resumeToken.approximateByteSize()>0),(0===xe.resumeToken.approximateByteSize()||je.snapshotVersion.toMicroseconds()-xe.snapshotVersion.toMicroseconds()>=3e8||Ke.addedDocuments.size+Ke.modifiedDocuments.size+Ke.removedDocuments.size>0)&&v.push(t.ze.updateTargetData(l,J))}var xe,je,Ke});let b=Kr();if(e.documentUpdates.forEach((S,R)=>{e.resolvedLimboDocuments.has(S)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(l,S))}),v.push(OC(l,p,e.documentUpdates,s,void 0).next(S=>{b=S})),!s.isEqual(Ct.min())){const S=t.ze.getLastRemoteSnapshotVersion(l).next(R=>t.ze.setTargetsMetadata(l,l.currentSequenceNumber,s));v.push(S)}return Re.waitFor(v).next(()=>p.apply(l)).next(()=>t.Qn.vn(l,b)).next(()=>b)}).then(l=>(t.Un=a,l))}function OC(n,e,t,s,a){let l=rn();return t.forEach(p=>l=l.add(p)),e.getEntries(n,l).next(p=>{let v=Kr();return t.forEach((b,S)=>{const R=p.get(b),P=(null==a?void 0:a.get(b))||s;S.isNoDocument()&&S.version.isEqual(Ct.min())?(e.removeEntry(b,P),v=v.insert(b,S)):!R.isValidDocument()||S.version.compareTo(R.version)>0||0===S.version.compareTo(R.version)&&R.hasPendingWrites?(e.addEntry(S,P),v=v.insert(b,S)):Ve("LocalStore","Ignoring outdated watch update for ",b,". Current version:",R.version," Watch version:",S.version)}),v})}function mS(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(s,e)))}function _d(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.ze.getTargetData(s,e).next(l=>l?(a=l,Re.resolve(a)):t.ze.allocateTargetId(s).next(p=>(a=new Ru(e,p,0,s.currentSequenceNumber),t.ze.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Un.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Un=t.Un.insert(s.targetId,s),t.qn.set(e,s.targetId)),s})}function xa(n,e,t){return PC.apply(this,arguments)}function PC(){return(PC=(0,be.Z)(function*(n,e,t){const s=He(n),a=s.Un.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!ao(p))throw p;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.Un=s.Un.remove(e),s.qn.delete(a.target)})).apply(this,arguments)}function mg(n,e,t){const s=He(n);let a=Ct.min(),l=rn();return s.persistence.runTransaction("Execute query","readonly",p=>function(v,b,S){const R=He(v),P=R.qn.get(S);return void 0!==P?Re.resolve(R.Un.get(P)):R.ze.getTargetData(b,S)}(s,p,Os(e)).next(v=>{if(v)return a=v.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(p,v.targetId).next(b=>{l=b})}).next(()=>s.Bn.getDocumentsMatchingQuery(p,e,t?a:Ct.min(),t?l:rn())).next(v=>({documents:v,Gn:l})))}function kC(n,e){const t=He(n),s=He(t.ze),a=t.Un.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.Tt(l,e).next(p=>p?p.target:null))}function FC(n){const e=He(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(s,a,l){const p=He(s);let v=Kr(),b=ls(l);const S=$c(a),R=IDBKeyRange.lowerBound(b,!0);return S.Kt({index:Un.readTimeIndex,range:R},(P,Y)=>{const J=cw(p.N,Y);v=v.insert(J.key,J),b=Y.readTime}).next(()=>({En:v,readTime:xn(b)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:s})=>(e.Kn=s,t))}function vw(){return(vw=(0,be.Z)(function*(n){const e=He(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(s){const a=$c(s);let l=Ct.min();return a.Kt({index:Un.readTimeIndex,reverse:!0},(p,v,b)=>{v.readTime&&(l=xn(v.readTime)),b.done()}).next(()=>l)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function Ky(){return(Ky=(0,be.Z)(function*(n,e,t,s){const a=He(n);let l=rn(),p=Kr(),v=cC();for(const R of t){const P=e.zn(R.metadata.name);R.document&&(l=l.add(P)),p=p.insert(P,e.Hn(R)),v=v.insert(P,e.Jn(R.metadata.readTime))}const b=a.jn.newChangeBuffer({trackRemovals:!0}),S=yield _d(a,(R=s,Os(id(Zt.fromString(`__bundle__/docs/${R}`)))));var R;return a.persistence.runTransaction("Apply bundle documents","readwrite",R=>OC(R,b,p,Ct.min(),v).next(P=>(b.apply(R),P)).next(P=>a.ze.removeMatchingKeysForTargetId(R,S.targetId).next(()=>a.ze.addMatchingKeys(R,l,S.targetId)).next(()=>a.Qn.vn(R,P)).next(()=>P)))})).apply(this,arguments)}function vS(n,e){return Ew.apply(this,arguments)}function Ew(){return(Ew=(0,be.Z)(function*(n,e,t=rn()){const s=yield _d(n,Os(Uc(e.bundledQuery))),a=He(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=Yr(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.Je.saveNamedQuery(l,e);const v=s.withResumeToken(Zr.EMPTY_BYTE_STRING,p);return a.Un=a.Un.insert(v.targetId,v),a.ze.updateTargetData(l,v).next(()=>a.ze.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.ze.addMatchingKeys(l,t,s.targetId)).next(()=>a.Je.saveNamedQuery(l,e))})})).apply(this,arguments)}class ZN{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Re.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var s;return this.Yn.set(t.id,{id:(s=t).id,version:s.version,createTime:Yr(s.createTime)}),Re.resolve()}getNamedQuery(e,t){return Re.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(s=t).name,query:Uc(s.bundledQuery),readTime:Yr(s.readTime)}),Re.resolve();var s}}class LC{constructor(){this.Zn=new kn(Jr.ts),this.es=new kn(Jr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new Jr(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new Jr(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}cs(e){const t=new Je(new Zt([])),s=new Jr(t,e),a=new Jr(t,e+1),l=[];return this.es.forEachInRange([s,a],p=>{this.rs(p),l.push(p.key)}),l}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Je(new Zt([])),s=new Jr(t,e),a=new Jr(t,e+1);let l=rn();return this.es.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Jr(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Jr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Je.comparator(e.key,t.key)||Rt(e.ls,t.ls)}static ns(e,t){return Rt(e.ls,t.ls)||Je.comparator(e.key,t.key)}}class ww{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new kn(Jr.ts)}checkEmpty(e){return Re.resolve(0===this.In.length)}addMutationBatch(e,t,s,a){const l=this.fs;this.fs++;const p=new CC(l,t,s,a);this.In.push(p);for(const v of a)this.ds=this.ds.add(new Jr(v.key,l)),this.Ht.addToCollectionParentIndex(e,v.key.path.popLast());return Re.resolve(p)}lookupMutationBatch(e,t){return Re.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const a=this._s(t+1),l=a<0?0:a;return Re.resolve(this.In.length>l?this.In[l]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Re.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Jr(t,0),a=new Jr(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([s,a],p=>{const v=this.ws(p.ls);l.push(v)}),Re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kn(Rt);return t.forEach(a=>{const l=new Jr(a,0),p=new Jr(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,p],v=>{s=s.add(v.ls)})}),Re.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Je.isDocumentKey(l)||(l=l.child(""));const p=new Jr(new Je(l),0);let v=new kn(Rt);return this.ds.forEachWhile(b=>{const S=b.key.path;return!!s.isPrefixOf(S)&&(S.length===a&&(v=v.add(b.ls)),!0)},p),Re.resolve(this.gs(v))}gs(e){const t=[];return e.forEach(s=>{const a=this.ws(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){pt(0===this.ys(t.batchId,"removed")),this.In.shift();let s=this.ds;return Re.forEach(t.mutations,a=>{const l=new Jr(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ds=s})}te(e){}containsKey(e,t){const s=new Jr(t,0),a=this.ds.firstAfterOrEqual(s);return Re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Re.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class ES{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new br(Je.comparator),this.size=0}addEntry(e,t,s){const a=t.key,l=this.docs.get(a),p=l?l.size:0,v=this.ps(t);return this.docs=this.docs.insert(a,{document:t.clone(),size:v,readTime:s}),this.size+=v-p,this.Ht.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Re.resolve(s?s.document.clone():yn.newInvalidDocument(t))}getEntries(e,t){let s=Kr();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.clone():yn.newInvalidDocument(a))}),Re.resolve(s)}getDocumentsMatchingQuery(e,t,s){let a=Kr();const l=new Je(t.path.child("")),p=this.docs.getIteratorFrom(l);for(;p.hasNext();){const{key:v,value:{document:b,readTime:S}}=p.getNext();if(!t.path.isPrefixOf(v.path))break;S.compareTo(s)<=0||Kh(t,b)&&(a=a.insert(b.key,b.clone()))}return Re.resolve(a)}Ts(e,t){return Re.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new wS(this)}getSize(e){return Re.resolve(this.size)}}class wS extends Qr{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.document.isValidDocument()?t.push(this.Se.addEntry(e,a.document,this.getReadTime(s))):this.Se.removeEntry(s)}),Re.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class bS{constructor(e){this.persistence=e,this.Es=new hf(t=>zh(t),Oc),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Is=0,this.As=new LC,this.targetCount=0,this.Rs=gd.se()}forEachTarget(e,t){return this.Es.forEach((s,a)=>t(a)),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Is&&(this.Is=t),Re.resolve()}ae(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new gd(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Re.resolve()}updateTargetData(e,t){return this.ae(t),Re.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.Es.forEach((p,v)=>{v.sequenceNumber<=t&&null===s.get(v.targetId)&&(this.Es.delete(p),l.push(this.removeMatchingKeysForTargetId(e,v.targetId)),a++)}),Re.waitFor(l).next(()=>a)}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,t){const s=this.Es.get(t)||null;return Re.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),Re.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),Re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Re.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return Re.resolve(s)}containsKey(e,t){return Re.resolve(this.As.containsKey(t))}}class IS{constructor(e,t){this.bs={},this.Le=new ss(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new bS(this),this.Ht=new sS,this.He=new ES(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new iS(t),this.Je=new ZN(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new ww(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,s){Ve("MemoryPersistence","Starting transaction:",e);const a=new CS(this.Le.next());return this.referenceDelegate.vs(),s(a).next(l=>this.referenceDelegate.Vs(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ss(e,t){return Re.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class CS extends dg{constructor(e){super(),this.currentSequenceNumber=e}}class bw{constructor(e){this.persistence=e,this.Ds=new LC,this.Cs=null}static Ns(e){return new bw(e)}get xs(){if(this.Cs)return this.Cs;throw nt()}addReference(e,t,s){return this.Ds.addReference(s,t),this.xs.delete(s.toString()),Re.resolve()}removeReference(e,t,s){return this.Ds.removeReference(s,t),this.xs.add(s.toString()),Re.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Re.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(a=>this.xs.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.xs.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.xs,s=>{const a=Je.fromPath(s);return this.ks(e,a).next(l=>{l||t.removeEntry(a)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(s=>{s?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Re.or([()=>Re.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function Iw(n,e){return`firestore_clients_${n}_${e}`}function Yy(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Cw(n,e){return`firestore_targets_${n}_${e}`}class Ou{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static $s(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new Oe(a.error.code,a.error.message))),p?new Ou(e,t,a.state,l):(ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dr{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static $s(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new Oe(s.error.code,s.error.message))),l?new dr(e,s.state,a):(ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=Fy();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=Zp(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new yg(e,l):(ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ps{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ps(t.clientId,t.onlineState):(ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _g{constructor(){this.activeTargetIds=Fy()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dw{constructor(e,t,s,a,l){this.window=e,this.Oe=t,this.persistenceKey=s,this.Ls=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new br(Rt),this.started=!1,this.Ks=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.js=Iw(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new _g),this.Ws=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(v){return`firestore_bundle_loaded_${v}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.pn();for(const a of t){if(a===e.Ls)continue;const l=e.getItem(Iw(e.persistenceKey,a));if(l){const p=yg.$s(a,l);p&&(e.qs=e.qs.insert(p.clientId,p))}}e.Ys();const s=e.storage.getItem(e.Hs);if(s){const a=e.Xs(s);a&&e.Zs(a)}for(const a of e.Ks)e.Us(a);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,s){this.ei(e,t,s),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Cw(this.persistenceKey,e));if(s){const a=dr.$s(e,s);a&&(t=a.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cw(this.persistenceKey,e))}updateQueryState(e,t,s){this.ii(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.ni(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Ve("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ws.test(s.key)){if(null==s.newValue){const a=t.ai(s.key);return t.ci(a,null)}{const a=t.ui(s.key,s.newValue);if(a)return t.ci(a.clientId,a)}}else if(t.Gs.test(s.key)){if(null!==s.newValue){const a=t.hi(s.key,s.newValue);if(a)return t.li(a)}}else if(t.zs.test(s.key)){if(null!==s.newValue){const a=t.fi(s.key,s.newValue);if(a)return t.di(a)}}else if(s.key===t.Hs){if(null!==s.newValue){const a=t.Xs(s.newValue);if(a)return t.Zs(a)}}else if(s.key===t.Qs){const a=function(l){let p=ss.T;if(null!=l)try{const v=JSON.parse(l);pt("number"==typeof v),p=v}catch(v){ar("SharedClientState","Failed to read sequence number from WebStorage",v)}return p}(s.newValue);a!==ss.T&&t.sequenceNumberHandler(a)}else if(s.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,s){const a=new Ou(this.currentUser,e,t,s),l=Yy(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Os())}ni(e){const t=Yy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,s){const a=Cw(this.persistenceKey,e),l=new dr(e,t,s);this.setItem(a,l.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const s=this.ai(e);return yg.$s(s,t)}hi(e,t){const s=this.Gs.exec(e),a=Number(s[1]);return Ou.$s(new kr(void 0!==s[2]?s[2]:null),a,t)}fi(e,t){const s=this.zs.exec(e),a=Number(s[1]);return dr.$s(a,t)}Xs(e){return Ps.$s(e)}li(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const s=t?this.qs.insert(e,t):this.qs.remove(e),a=this.ti(this.qs),l=this.ti(s),p=[],v=[];return l.forEach(b=>{a.has(b)||p.push(b)}),a.forEach(b=>{l.has(b)||v.push(b)}),this.syncEngine.gi(p,v).then(()=>{this.qs=s})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=Fy();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Tw{constructor(){this.yi=new _g,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,s){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new _g,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class VC{Ti(e){}shutdown(){}}class Aw{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const DS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class TS{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class AS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,s,a){const l=this.Bi(e,t);Ve("RestConnection","Sending: ",l,s);const p={};return this.Ui(p,a),this.qi(e,l,p,s).then(v=>(Ve("RestConnection","Received: ",v),v),v=>{throw qp("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",s),v})}Ki(e,t,s,a){return this.Li(e,t,s,a)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+nd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const s in t.authHeaders)t.authHeaders.hasOwnProperty(s)&&(e[s]=t.authHeaders[s])}Bi(e,t){return`${this.Fi}/v1/${t}:${DS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,s,a){return new Promise((l,p)=>{const v=new kI;v.listenOnce(OI.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case by.NO_ERROR:const S=v.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(S)),l(S);break;case by.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),p(new Oe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case by.HTTP_ERROR:const R=v.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',R,"response text:",v.getResponseText()),R>0){const P=v.getResponseJson().error;if(P&&P.status&&P.message){const Y=function(J){const xe=J.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(xe)>=0?xe:ye.UNKNOWN}(P.status);p(new Oe(Y,P.message))}else p(new Oe(ye.UNKNOWN,"Server responded with status "+v.getStatus()))}else p(new Oe(ye.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const b=JSON.stringify(a);v.send(t,"POST",b,s,15)})}ji(e,t){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=wy(),l=CA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new PI({})),this.Ui(p.initMessageHeaders,t),(0,xt.uI)()||(0,xt.b$)()||(0,xt.d)()||(0,xt.w1)()||(0,xt.Mn)()||(0,xt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const v=s.join("");Ve("Connection","Creating WebChannel: "+v,p);const b=a.createWebChannel(v,p);let S=!1,R=!1;const P=new TS({vi:J=>{R?Ve("Connection","Not sending because WebChannel is closed:",J):(S||(Ve("Connection","Opening WebChannel transport."),b.open(),S=!0),Ve("Connection","WebChannel sending:",J),b.send(J))},Vi:()=>b.close()}),Y=(J,xe,je)=>{J.listen(xe,Ke=>{try{je(Ke)}catch(Pt){setTimeout(()=>{throw Pt},0)}})};return Y(b,Gp.EventType.OPEN,()=>{R||Ve("Connection","WebChannel transport opened.")}),Y(b,Gp.EventType.CLOSE,()=>{R||(R=!0,Ve("Connection","WebChannel transport closed"),P.$i())}),Y(b,Gp.EventType.ERROR,J=>{R||(R=!0,qp("Connection","WebChannel transport errored:",J),P.$i(new Oe(ye.UNAVAILABLE,"The operation could not be completed")))}),Y(b,Gp.EventType.MESSAGE,J=>{var xe;if(!R){const je=J.data[0];pt(!!je);const Ke=je,Pt=Ke.error||(null===(xe=Ke[0])||void 0===xe?void 0:xe.error);if(Pt){Ve("Connection","WebChannel received error:",Pt);const sn=Pt.status;let Rn=function(hr){const Va=cr[hr];if(void 0!==Va)return ew(Va)}(sn),Vt=Pt.message;void 0===Rn&&(Rn=ye.INTERNAL,Vt="Unknown error status: "+sn+" with message "+Pt.message),R=!0,P.$i(new Oe(Rn,Vt)),b.close()}else Ve("Connection","WebChannel received:",je),P.Oi(je)}}),Y(l,OE.STAT_EVENT,J=>{J.stat===Hp.PROXY?Ve("Connection","Detected buffering proxy"):J.stat===Hp.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.ki()},0),P}}function Sw(){return"undefined"!=typeof window?window:null}function Qy(){return"undefined"!=typeof document?document:null}function Jy(n){return new pC(n,!0)}class xw{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Qi=s,this.Wi=a,this.Gi=l,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),a=Math.max(0,t-s);a>0&&Ve("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,a,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class UC{constructor(e,t,s,a,l,p){this.Oe=e,this.er=s,this.nr=a,this.credentialsProvider=l,this.listener=p,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new xw(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,be.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,be.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var s=this;return(0,be.Z)(function*(){s._r(),s.rr.cancel(),s.sr++,3!==e?s.rr.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(ar(t.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),s.rr.Yi()):t&&t.code===ye.UNAUTHENTICATED&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.mr(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(s=>{this.sr===t&&this.yr(s)},s=>{e(()=>{const a=new Oe(ye.UNKNOWN,"Fetching auth token failed: "+s.message);return this.pr(a)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(s=>{t(()=>this.pr(s))}),this.stream.onMessage(s=>{t(()=>this.onMessage(s))})}ur(){var e=this;this.state=4,this.rr.Xi((0,be.Z)(function*(){e.state=0,e.start()}))}pr(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ff extends UC{constructor(e,t,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,s,l),this.N=a}Tr(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(b=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===b?1:"REMOVE"===b?2:"CURRENT"===b?3:"RESET"===b?4:nt(),a=e.targetChange.targetIds||[],l=function(b,S){return b.D?(pt(void 0===S||"string"==typeof S),Zr.fromBase64String(S||"")):(pt(void 0===S||S instanceof Uint8Array),Zr.fromUint8Array(S||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,v=p&&function(b){const S=void 0===b.code?ye.UNKNOWN:ew(b.code);return new Oe(S,b.message||"")}(p);t=new lC(s,a,l,v||null)}else if("documentChange"in e){const s=e.documentChange,a=ko(n,s.document.name),l=Yr(s.document.updateTime),p=new mi({mapValue:{fields:s.document.fields}}),v=yn.newFoundDocument(a,l,p);t=new tw(s.targetIds||[],s.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const s=e.documentDelete,a=ko(n,s.document),l=s.readTime?Yr(s.readTime):Ct.min(),p=yn.newNoDocument(a,l);t=new tw([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=ko(n,s.document);t=new tw([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return nt();{const s=e.filter,l=new HA(s.count||0);t=new sg(s.targetId,l)}}var b;return t}(this.N,e),s=function(a){if(!("targetChange"in a))return Ct.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ct.min():l.readTime?Yr(l.readTime):Ct.min()}(e);return this.listener.Er(t,s)}Ir(e){const t={};t.database=ag(this.N),t.addTarget=function(a,l){let p;const v=l.target;return p=Pc(v)?{documents:_C(a,v)}:{query:vC(a,v)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=rw(a,l.resumeToken):l.snapshotVersion.compareTo(Ct.min())>0&&(p.readTime=ud(a,l.snapshotVersion.toTimestamp())),p}(this.N,e);const s=function(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.wr(t)}Ar(e){const t={};t.database=ag(this.N),t.removeTarget=e,this.wr(t)}}class KN extends UC{constructor(e,t,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle",t,s,l),this.N=a,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Tr(e){return this.nr.ji("Write",e)}onMessage(e){if(pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(n,e){return n&&n.length>0?(pt(void 0!==e),n.map(t=>function(s,a){let l=Yr(s.updateTime?s.updateTime:a);return l.isEqual(Ct.min())&&(l=Yr(a)),new jA(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Yr(e.commitTime);return this.listener.vr(s,t)}return pt(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=ag(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>cd(this.N,s))};this.wr(t)}}class BC extends class{}{constructor(e,t,s){super(),this.credentials=e,this.nr=t,this.N=s,this.Dr=!1}Cr(){if(this.Dr)throw new Oe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,s){return this.Cr(),this.credentials.getToken().then(a=>this.nr.Li(e,t,s,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ye.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new Oe(ye.UNKNOWN,a.toString())})}Ki(e,t,s){return this.Cr(),this.credentials.getToken().then(a=>this.nr.Ki(e,t,s,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ye.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new Oe(ye.UNKNOWN,a.toString())})}terminate(){this.Dr=!0}}class SS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(ar(t),this.$r=!1):Ve("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class YN{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=l,this.Qr.Ti(v=>{s.enqueueAndForget((0,be.Z)(function*(){var b;Gc(p)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,be.Z)(function*(S){const R=He(S);R.Kr.add(4),yield Hc(R),R.Wr.set("Unknown"),R.Kr.delete(4),yield pf(R)}),function(S){return b.apply(this,arguments)})(p))}))}),this.Wr=new SS(s,a)}}function pf(n){return Nw.apply(this,arguments)}function Nw(){return(Nw=(0,be.Z)(function*(n){if(Gc(n))for(const e of n.jr)yield e(!0)})).apply(this,arguments)}function Hc(n){return Rw.apply(this,arguments)}function Rw(){return(Rw=(0,be.Z)(function*(n){for(const e of n.jr)yield e(!1)})).apply(this,arguments)}function Xy(n,e){const t=He(n);t.qr.has(e.targetId)||(t.qr.set(e.targetId,e),Pw(t)?Ow(t):qc(t).cr()&&Mw(t,e))}function vg(n,e){const t=He(n),s=qc(t);t.qr.delete(e),s.cr()&&jC(t,e),0===t.qr.size&&(s.cr()?s.lr():Gc(t)&&t.Wr.set("Unknown"))}function Mw(n,e){n.Gr.Y(e.targetId),qc(n).Ir(e)}function jC(n,e){n.Gr.Y(e),qc(n).Ar(e)}function Ow(n){n.Gr=new qN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qr.get(e)||null}),qc(n).start(),n.Wr.Or()}function Pw(n){return Gc(n)&&!qc(n).ar()&&n.qr.size>0}function Gc(n){return 0===He(n).Kr.size}function $C(n){n.Gr=void 0}function xS(n){return vd.apply(this,arguments)}function vd(){return(vd=(0,be.Z)(function*(n){n.qr.forEach((e,t)=>{Mw(n,e)})})).apply(this,arguments)}function HC(n,e){return e_.apply(this,arguments)}function e_(){return(e_=(0,be.Z)(function*(n,e){$C(n),Pw(n)?(n.Wr.Lr(e),Ow(n)):n.Wr.set("Unknown")})).apply(this,arguments)}function GC(n,e,t){return t_.apply(this,arguments)}function t_(){return(t_=(0,be.Z)(function*(n,e,t){if(n.Wr.set("Online"),e instanceof lC&&2===e.state&&e.cause)try{yield(s=(0,be.Z)(function*(a,l){const p=l.cause;for(const v of l.targetIds)a.qr.has(v)&&(yield a.remoteSyncer.rejectListen(v,p),a.qr.delete(v),a.Gr.removeTarget(v))}),function(a,l){return s.apply(this,arguments)})(n,e)}catch(s){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Eg(n,s)}else if(e instanceof tw?n.Gr.rt(e):e instanceof sg?n.Gr.ft(e):n.Gr.ct(e),!t.isEqual(Ct.min()))try{const s=yield MC(n.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.Gr._t(l);return p.targetChanges.forEach((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const S=a.qr.get(b);S&&a.qr.set(b,S.withResumeToken(v.resumeToken,l))}}),p.targetMismatches.forEach(v=>{const b=a.qr.get(v);if(!b)return;a.qr.set(v,b.withResumeToken(Zr.EMPTY_BYTE_STRING,b.snapshotVersion)),jC(a,v);const S=new Ru(b.target,v,1,b.sequenceNumber);Mw(a,S)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(s){Ve("RemoteStore","Failed to raise snapshot:",s),yield Eg(n,s)}var s})).apply(this,arguments)}function Eg(n,e,t){return n_.apply(this,arguments)}function n_(){return(n_=(0,be.Z)(function*(n,e,t){if(!ao(e))throw e;n.Kr.add(1),yield Hc(n),n.Wr.set("Offline"),t||(t=()=>MC(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.Kr.delete(1),yield pf(n)}))})).apply(this,arguments)}function qC(n,e){return e().catch(t=>Eg(n,t,e))}function gf(n){return r_.apply(this,arguments)}function r_(){return(r_=(0,be.Z)(function*(n){const e=He(n),t=Pu(e);let s=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;NS(e);)try{const a=yield mS(e.localStore,s);if(null===a){0===e.Ur.length&&t.lr();break}s=a.batchId,RS(e,a)}catch(a){yield Eg(e,a)}WC(e)&&mf(e)})).apply(this,arguments)}function NS(n){return Gc(n)&&n.Ur.length<10}function RS(n,e){n.Ur.push(e);const t=Pu(n);t.cr()&&t.br&&t.Pr(e.mutations)}function WC(n){return Gc(n)&&!Pu(n).ar()&&n.Ur.length>0}function mf(n){Pu(n).start()}function wg(n){return kw.apply(this,arguments)}function kw(){return(kw=(0,be.Z)(function*(n){Pu(n).Sr()})).apply(this,arguments)}function Fw(n){return uo.apply(this,arguments)}function uo(){return(uo=(0,be.Z)(function*(n){const e=Pu(n);for(const t of n.Ur)e.Pr(t.mutations)})).apply(this,arguments)}function MS(n,e,t){return yf.apply(this,arguments)}function yf(){return(yf=(0,be.Z)(function*(n,e,t){const s=n.Ur.shift(),a=By.from(s,e,t);yield qC(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield gf(n)})).apply(this,arguments)}function OS(n,e){return Lw.apply(this,arguments)}function Lw(){return(Lw=(0,be.Z)(function*(n,e){var t;e&&Pu(n).br&&(yield(t=(0,be.Z)(function*(s,a){if(uC(l=a.code)&&l!==ye.ABORTED){const p=s.Ur.shift();Pu(s).hr(),yield qC(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield gf(s)}var l}),function(s,a){return t.apply(this,arguments)})(n,e)),WC(n)&&mf(n)})).apply(this,arguments)}function zC(n,e){return bg.apply(this,arguments)}function bg(){return(bg=(0,be.Z)(function*(n,e){const t=He(n);e?(t.Kr.delete(2),yield pf(t)):e||(t.Kr.add(2),yield Hc(t),t.Wr.set("Unknown"))})).apply(this,arguments)}function qc(n){return n.zr||(n.zr=function(e,t,s){const a=He(e);return a.Cr(),new ff(t,a.nr,a.credentials,a.N,s)}(n.datastore,n.asyncQueue,{Si:xS.bind(null,n),Ci:HC.bind(null,n),Er:GC.bind(null,n)}),n.jr.push(function(){var e=(0,be.Z)(function*(t){t?(n.zr.hr(),Pw(n)?Ow(n):n.Wr.set("Unknown")):(yield n.zr.stop(),$C(n))});return function(t){return e.apply(this,arguments)}}())),n.zr}function Pu(n){return n.Hr||(n.Hr=function(e,t,s){const a=He(e);return a.Cr(),new KN(t,a.nr,a.credentials,a.N,s)}(n.datastore,n.asyncQueue,{Si:wg.bind(null,n),Ci:OS.bind(null,n),Vr:Fw.bind(null,n),vr:MS.bind(null,n)}),n.jr.push(function(){var e=(0,be.Z)(function*(t){t?(n.Hr.hr(),yield gf(n)):(yield n.Hr.stop(),n.Ur.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Ur.length} pending writes`),n.Ur=[]))});return function(t){return e.apply(this,arguments)}}())),n.Hr}class Ig{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,v=new Ig(e,t,p,a,l);return v.start(s),v}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wc(n,e){if(ar("AsyncQueue",`${e}: ${n}`),ao(n))return new Oe(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class _f{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Je.comparator(t.key,s.key):(t,s)=>Je.comparator(t.key,s.key),this.keyedMap=ig(),this.sortedSet=new br(this.comparator)}static emptySet(e){return new _f(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _f)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new _f;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class ZC{constructor(){this.Jr=new br(Je.comparator)}track(e){const t=e.doc.key,s=this.Jr.get(t);s?0!==e.type&&3===s.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==s.type?this.Jr=this.Jr.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Jr=this.Jr.remove(t):1===e.type&&2===s.type?this.Jr=this.Jr.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):nt():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,s)=>{e.push(s)}),e}}class vf{constructor(e,t,s,a,l,p,v,b){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=v,this.excludesMetadataChanges=b}static fromInitialDocuments(e,t,s,a){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new vf(e,t,_f.emptySet(t),l,s,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class PS{constructor(){this.Xr=void 0,this.listeners=[]}}class KC{constructor(){this.queries=new hf(e=>sd(e),Xp),this.onlineState="Unknown",this.Zr=new Set}}function Cg(n,e){return i_.apply(this,arguments)}function i_(){return(i_=(0,be.Z)(function*(n,e){const t=He(n),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new PS),a)try{l.Xr=yield t.onListen(s)}catch(p){const v=Wc(p,`Initialization of query '${YE(e.query)}' failed`);return void e.onError(v)}t.queries.set(s,l),l.listeners.push(e),e.eo(t.onlineState),l.Xr&&e.no(l.Xr)&&o_(t)})).apply(this,arguments)}function Vw(n,e){return s_.apply(this,arguments)}function s_(){return(s_=(0,be.Z)(function*(n,e){const t=He(n),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)})).apply(this,arguments)}function YC(n,e){const t=He(n);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const v of p.listeners)v.no(a)&&(s=!0);p.Xr=a}}s&&o_(t)}function kS(n,e,t){const s=He(n),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function o_(n){n.Zr.forEach(e=>{e.next()})}class a_{constructor(e,t,s){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=s||{}}no(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new vf(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=vf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class FS{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class Uw{constructor(e){this.N=e}zn(e){return ko(this.N,e)}Hn(e){return e.metadata.exists?ug(this.N,e.document,!1):yn.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Yr(e)}}class LS{constructor(e,t,s){this.lo=e,this.localStore=t,this.N=s,this.queries=[],this.documents=[],this.progress=VS(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,s=new Uw(this.N);for(const a of e)if(a.metadata.queries){const l=s.zn(a.metadata.name);for(const p of a.metadata.queries){const v=(t.get(p)||rn()).add(l);t.set(p,v)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function(n,e,t,s){return Ky.apply(this,arguments)}(e.localStore,new Uw(e.N),e.documents,e.lo.id),s=e.wo(e.documents);for(const a of e.queries)yield vS(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",new xC(Object.assign({},e.progress),t)})()}}function VS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class vi{constructor(e){this.key=e}}class Ed{constructor(e){this.key=e}}class QC{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=rn(),this.mutatedKeys=rn(),this.po=YI(e),this.To=new _f(this.po)}get Eo(){return this._o}Io(e,t){const s=t?t.Ao:new ZC,a=t?t.To:this.To;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,v=!1;const b=kc(this.query)&&a.size===this.query.limit?a.last():null,S=xy(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((R,P)=>{const Y=a.get(R),J=Kh(this.query,P)?P:null,xe=!!Y&&this.mutatedKeys.has(Y.key),je=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let Ke=!1;Y&&J?Y.data.isEqual(J.data)?xe!==je&&(s.track({type:3,doc:J}),Ke=!0):this.Ro(Y,J)||(s.track({type:2,doc:J}),Ke=!0,(b&&this.po(J,b)>0||S&&this.po(J,S)<0)&&(v=!0)):!Y&&J?(s.track({type:0,doc:J}),Ke=!0):Y&&!J&&(s.track({type:1,doc:Y}),Ke=!0,(b||S)&&(v=!0)),Ke&&(J?(p=p.add(J),l=je?l.add(R):l.delete(R)):(p=p.delete(R),l=l.delete(R)))}),kc(this.query)||xy(this.query))for(;p.size>this.query.limit;){const R=kc(this.query)?p.last():p.first();p=p.delete(R.key),l=l.delete(R.key),s.track({type:1,doc:R})}return{To:p,Ao:s,Ln:v,mutatedKeys:l}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;const l=e.Ao.Yr();l.sort((S,R)=>function(P,Y){const J=xe=>{switch(xe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return J(P)-J(Y)}(S.type,R.type)||this.po(S.doc,R.doc)),this.bo(s);const p=t?this.Po():[],v=0===this.yo.size&&this.current?1:0,b=v!==this.mo;return this.mo=v,0!==l.length||b?{snapshot:new vf(this.query,e.To,a,l,e.mutatedKeys,0===v,b,!1),vo:p}:{vo:p}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new ZC,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(t=>this._o=this._o.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this._o=this._o.delete(t)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=rn(),this.To.forEach(s=>{this.Vo(s.key)&&(this.yo=this.yo.add(s.key))});const t=[];return e.forEach(s=>{this.yo.has(s)||t.push(new Ed(s))}),this.yo.forEach(s=>{e.has(s)||t.push(new vi(s))}),t}So(e){this._o=e.Gn,this.yo=rn();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return vf.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}class US{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class QN{constructor(e){this.key=e,this.Co=!1}}class Dg{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.No={},this.xo=new hf(v=>sd(v),Xp),this.ko=new Map,this.$o=new Set,this.Oo=new br(Je.comparator),this.Fo=new Map,this.Mo=new LC,this.Lo={},this.Bo=new Map,this.Uo=gd.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function BS(n,e){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,be.Z)(function*(n,e){const t=sD(n);let s,a;const l=t.xo.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.Do();else{const p=yield _d(t.localStore,Os(e)),v=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield Bw(t,e,s,"current"===v),t.isPrimaryClient&&Xy(t.remoteStore,p)}return a})).apply(this,arguments)}function Bw(n,e,t,s){return u_.apply(this,arguments)}function u_(){return(u_=(0,be.Z)(function*(n,e,t,s){n.Ko=(R,P,Y)=>{return(J=(0,be.Z)(function*(xe,je,Ke,Pt){let sn=je.view.Io(Ke);sn.Ln&&(sn=yield mg(xe.localStore,je.query,!1).then(({documents:hr})=>je.view.Io(hr,sn)));const Rn=Pt&&Pt.targetChanges.get(je.targetId),Vt=je.view.applyChanges(sn,xe.isPrimaryClient,Rn);return g_(xe,je.targetId,Vt.vo),Vt.snapshot}),function(xe,je,Ke,Pt){return J.apply(this,arguments)})(n,R,P,Y);var J};const a=yield mg(n.localStore,e,!0),l=new QC(e,a.Gn),p=l.Io(a.documents),v=ef.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),b=l.applyChanges(p,n.isPrimaryClient,v);g_(n,t,b.vo);const S=new US(e,t,l);return n.xo.set(e,S),n.ko.has(t)?n.ko.get(t).push(e):n.ko.set(t,[e]),b.snapshot})).apply(this,arguments)}function jS(n,e){return jw.apply(this,arguments)}function jw(){return(jw=(0,be.Z)(function*(n,e){const t=He(n),s=t.xo.get(e),a=t.ko.get(s.targetId);if(a.length>1)return t.ko.set(s.targetId,a.filter(l=>!Xp(l,e))),void t.xo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield xa(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),vg(t.remoteStore,s.targetId),wf(t,s.targetId)}).catch(ct))):(wf(t,s.targetId),yield xa(t.localStore,s.targetId,!0))})).apply(this,arguments)}function c_(){return(c_=(0,be.Z)(function*(n,e,t){const s=oD(n);try{const a=yield function(l,p){const v=He(l),b=Er.now(),S=p.reduce((P,Y)=>P.add(Y.key),rn());let R;return v.persistence.runTransaction("Locally write mutations","readwrite",P=>v.Qn.Pn(P,S).next(Y=>{R=Y;const J=[];for(const xe of p){const je=$A(xe,R.get(xe.key));null!=je&&J.push(new Fc(xe.key,je,HI(je.value.mapValue),ur.exists(!0)))}return v.In.addMutationBatch(P,b,J,p)})).then(P=>(P.applyToLocalDocumentSet(R),{batchId:P.batchId,changes:R}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,v){let b=l.Lo[l.currentUser.toKey()];b||(b=new br(Rt)),b=b.insert(p,v),l.Lo[l.currentUser.toKey()]=b}(s,a.batchId,t),yield Na(s,a.changes),yield gf(s.remoteStore)}catch(a){const l=Wc(a,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function Hw(n,e){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,be.Z)(function*(n,e){const t=He(n);try{const s=yield gg(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.Fo.get(l);p&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.Co=!0:a.modifiedDocuments.size>0?pt(p.Co):a.removedDocuments.size>0&&(pt(p.Co),p.Co=!1))}),yield Na(t,s,e)}catch(s){yield ct(s)}})).apply(this,arguments)}function l_(n,e,t){const s=He(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.xo.forEach((l,p)=>{const v=p.view.eo(e);v.snapshot&&a.push(v.snapshot)}),function(l,p){const v=He(l);v.onlineState=p;let b=!1;v.queries.forEach((S,R)=>{for(const P of R.listeners)P.eo(p)&&(b=!0)}),b&&o_(v)}(s.eventManager,e),a.length&&s.No.Er(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function JN(n,e,t){return d_.apply(this,arguments)}function d_(){return(d_=(0,be.Z)(function*(n,e,t){const s=He(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Fo.get(e),l=a&&a.key;if(l){let p=new br(Je.comparator);p=p.insert(l,yn.newNoDocument(l,Ct.min()));const v=rn().add(l),b=new os(Ct.min(),new Map,new kn(Rt),p,v);yield Hw(s,b),s.Oo=s.Oo.remove(l),s.Fo.delete(e),Ww(s)}else yield xa(s.localStore,e,!1).then(()=>wf(s,e,t)).catch(ct)})).apply(this,arguments)}function $S(n,e){return h_.apply(this,arguments)}function h_(){return(h_=(0,be.Z)(function*(n,e){const t=He(n),s=e.batch.batchId;try{const a=yield gS(t.localStore,e);Gw(t,s,null),Sg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Na(t,a)}catch(a){yield ct(a)}})).apply(this,arguments)}function f_(n,e,t){return p_.apply(this,arguments)}function p_(){return(p_=(0,be.Z)(function*(n,e,t){const s=He(n);try{const a=yield function(l,p){const v=He(l);return v.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let S;return v.In.lookupMutationBatch(b,p).next(R=>(pt(null!==R),S=R.keys(),v.In.removeMutationBatch(b,R))).next(()=>v.In.performConsistencyCheck(b)).next(()=>v.Qn.Pn(b,S))})}(s.localStore,e);Gw(s,e,t),Sg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Na(s,a)}catch(a){yield ct(a)}})).apply(this,arguments)}function Ag(){return(Ag=(0,be.Z)(function*(n,e){const t=He(n);Gc(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=He(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",v=>p.In.getHighestUnacknowledgedBatchId(v))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Bo.get(s)||[];a.push(e),t.Bo.set(s,a)}catch(s){const a=Wc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function Sg(n,e){(n.Bo.get(e)||[]).forEach(t=>{t.resolve()}),n.Bo.delete(e)}function Gw(n,e,t){const s=He(n);let a=s.Lo[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Lo[s.currentUser.toKey()]=a}}function wf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.ko.get(e))n.xo.delete(s),t&&n.No.jo(s,t);n.ko.delete(e),n.isPrimaryClient&&n.Mo.cs(e).forEach(s=>{n.Mo.containsKey(s)||qw(n,s)})}function qw(n,e){n.$o.delete(e.path.canonicalString());const t=n.Oo.get(e);null!==t&&(vg(n.remoteStore,t),n.Oo=n.Oo.remove(e),n.Fo.delete(t),Ww(n))}function g_(n,e,t){for(const s of t)s instanceof vi?(n.Mo.addReference(s.key,e),JC(n,s)):s instanceof Ed?(Ve("SyncEngine","Document no longer in limbo: "+s.key),n.Mo.removeReference(s.key,e),n.Mo.containsKey(s.key)||qw(n,s.key)):nt()}function JC(n,e){const t=e.key,s=t.path.canonicalString();n.Oo.get(t)||n.$o.has(s)||(Ve("SyncEngine","New document in limbo: "+t),n.$o.add(s),Ww(n))}function Ww(n){for(;n.$o.size>0&&n.Oo.size<n.maxConcurrentLimboResolutions;){const e=n.$o.values().next().value;n.$o.delete(e);const t=new Je(Zt.fromString(e)),s=n.Uo.next();n.Fo.set(s,new QN(t)),n.Oo=n.Oo.insert(t,s),Xy(n.remoteStore,new Ru(Os(id(t.path)),s,2,ss.T))}}function Na(n,e,t){return m_.apply(this,arguments)}function m_(){return(m_=(0,be.Z)(function*(n,e,t){const s=He(n),a=[],l=[],p=[];var v;s.xo.isEmpty()||(s.xo.forEach((v,b)=>{p.push(s.Ko(b,e,t).then(S=>{if(S){s.isPrimaryClient&&s.sharedClientState.updateQueryState(b.targetId,S.fromCache?"not-current":"current"),a.push(S);const R=yw.kn(b.targetId,S);l.push(R)}}))}),yield Promise.all(p),s.No.Er(a),yield(v=(0,be.Z)(function*(b,S){const R=He(b);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>Re.forEach(S,Y=>Re.forEach(Y.Nn,J=>R.persistence.referenceDelegate.addReference(P,Y.targetId,J)).next(()=>Re.forEach(Y.xn,J=>R.persistence.referenceDelegate.removeReference(P,Y.targetId,J)))))}catch(P){if(!ao(P))throw P;Ve("LocalStore","Failed to update sequence numbers: "+P)}for(const P of S){const Y=P.targetId;if(!P.fromCache){const J=R.Un.get(Y),je=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);R.Un=R.Un.insert(Y,je)}}}),function(b,S){return v.apply(this,arguments)})(s.localStore,l))})).apply(this,arguments)}function GS(n,e){return zw.apply(this,arguments)}function zw(){return(zw=(0,be.Z)(function*(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const s=yield RC(t.localStore,e);t.currentUser=e,(a=t).Bo.forEach(p=>{p.forEach(v=>{v.reject(new Oe(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Bo.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Na(t,s.Wn)}var a})).apply(this,arguments)}function XC(n,e){const t=He(n),s=t.Fo.get(e);if(s&&s.Co)return rn().add(s.key);{let a=rn();const l=t.ko.get(e);if(!l)return a;for(const p of l){const v=t.xo.get(p);a=a.unionWith(v.view.Eo)}return a}}function qS(n,e){return y_.apply(this,arguments)}function y_(){return(y_=(0,be.Z)(function*(n,e){const t=He(n),s=yield mg(t.localStore,e.query,!0),a=e.view.So(s);return t.isPrimaryClient&&g_(t,e.targetId,a.vo),a})).apply(this,arguments)}function eD(n){return __.apply(this,arguments)}function __(){return(__=(0,be.Z)(function*(n){const e=He(n);return FC(e.localStore).then(t=>Na(e,t))})).apply(this,arguments)}function tD(n,e,t,s){return Zw.apply(this,arguments)}function Zw(){return(Zw=(0,be.Z)(function*(n,e,t,s){const a=He(n),l=yield function(p,v){const b=He(p),S=He(b.In);return b.persistence.runTransaction("Lookup mutation documents","readonly",R=>S.Xt(R,v).next(P=>P?b.Qn.Pn(R,P):Re.resolve(null)))}(a.localStore,e);var v;null!==l?("pending"===t?yield gf(a.remoteStore):"acknowledged"===t||"rejected"===t?(Gw(a,e,s||null),Sg(a,e),v=e,He(He(a.localStore).In).te(v)):nt(),yield Na(a,l)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Kw(){return(Kw=(0,be.Z)(function*(n,e){const t=He(n);if(sD(t),oD(t),!0===e&&!0!==t.qo){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Yw(t,s.toArray());t.qo=!0,yield zC(t.remoteStore,!0);for(const l of a)Xy(t.remoteStore,l)}else if(!1===e&&!1!==t.qo){const s=[];let a=Promise.resolve();t.ko.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(wf(t,p),xa(t.localStore,p,!0))),vg(t.remoteStore,p)}),yield a,yield Yw(t,s),function(l){const p=He(l);p.Fo.forEach((v,b)=>{vg(p.remoteStore,b)}),p.Mo.us(),p.Fo=new Map,p.Oo=new br(Je.comparator)}(t),t.qo=!1,yield zC(t.remoteStore,!1)}})).apply(this,arguments)}function Yw(n,e,t){return nD.apply(this,arguments)}function nD(){return(nD=(0,be.Z)(function*(n,e,t){const s=He(n),a=[],l=[];for(const p of e){let v;const b=s.ko.get(p);if(b&&0!==b.length){v=yield _d(s.localStore,Os(b[0]));for(const S of b){const R=s.xo.get(S),P=yield qS(s,R);P.snapshot&&l.push(P.snapshot)}}else{const S=yield kC(s.localStore,p);v=yield _d(s.localStore,S),yield Bw(s,zS(S),p,!1)}a.push(v)}return s.No.Er(l),a})).apply(this,arguments)}function zS(n){return ZI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function XN(n){const e=He(n);return He(He(e.localStore).persistence).pn()}function eR(n,e,t,s){return rD.apply(this,arguments)}function rD(){return(rD=(0,be.Z)(function*(n,e,t,s){const a=He(n);if(a.qo)Ve("SyncEngine","Ignoring unexpected query state notification.");else if(a.ko.has(e))switch(t){case"current":case"not-current":{const l=yield FC(a.localStore),p=os.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Na(a,l,p);break}case"rejected":yield xa(a.localStore,e,!0),wf(a,e,s);break;default:nt()}})).apply(this,arguments)}function tR(n,e,t){return iD.apply(this,arguments)}function iD(){return(iD=(0,be.Z)(function*(n,e,t){const s=sD(n);if(s.qo){for(const a of e){if(s.ko.has(a)){Ve("SyncEngine","Adding an already active target "+a);continue}const l=yield kC(s.localStore,a),p=yield _d(s.localStore,l);yield Bw(s,zS(l),p.targetId,!1),Xy(s.remoteStore,p)}for(const a of t)s.ko.has(a)&&(yield xa(s.localStore,a,!1).then(()=>{vg(s.remoteStore,a),wf(s,a)}).catch(ct))}})).apply(this,arguments)}function sD(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JN.bind(null,e),e.No.Er=YC.bind(null,e.eventManager),e.No.jo=kS.bind(null,e.eventManager),e}function oD(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$S.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f_.bind(null,e),e}class ZS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.N=Jy(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return NC(this.persistence,new fS,e.initialUser,this.N)}Go(e){return new IS(bw.Ns,this.N)}Wo(e){return new Tw}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KS extends ZS{constructor(e,t,s){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,be.Z)(function*(){yield t().call(s,e),yield function(n){return vw.apply(this,arguments)}(s.localStore),yield s.Jo.initialize(s,e),yield oD(s.Jo.syncEngine),yield gf(s.Jo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Ho(e){return NC(this.persistence,new fS,e.initialUser,this.N)}zo(e){return new uS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new gw(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Sw(),Qy(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new Tw}}class rR extends KS{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,be.Z)(function*(){yield t().call(s,e);const a=s.Jo.syncEngine;s.sharedClientState instanceof Dw&&(s.sharedClientState.syncEngine={_i:tD.bind(null,a),mi:eR.bind(null,a),gi:tR.bind(null,a),pn:XN.bind(null,a),wi:eD.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var l=(0,be.Z)(function*(p){yield function(n,e){return Kw.apply(this,arguments)}(s.Jo.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):p||s.gcScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}Wo(e){const t=Sw();if(!Dw.bt(t))throw new Oe(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dw(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class aD{initialize(e,t){var s=this;return(0,be.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>l_(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=GS.bind(null,s.syncEngine),yield zC(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KC}createDatastore(e){const t=Jy(e.databaseInfo.databaseId),s=new AS(e.databaseInfo);return new BC(e.credentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=v=>l_(this.syncEngine,v,0),p=Aw.bt()?new Aw:new VC,new YN(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,v,b,S){const R=new Dg(s,a,l,p,v,b);return S&&(R.qo=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const s=He(t);Ve("RemoteStore","RemoteStore shutting down."),s.Kr.add(5),yield Hc(s),s.Qr.shutdown(),s.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YS(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Qw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class iR{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(s=>{s&&s.ho()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,be.Z)(function*(){const t=yield e.na();if(null===t)return null;const s=e.ta.decode(t),a=Number(s);isNaN(a)&&e.sa(`length string (${s}) is not valid number`);const l=yield e.ia(a);return new FS(JSON.parse(l),t.length+a)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,be.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}ia(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const s=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,be.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class QS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,be.Z)(function*(l,p){const v=He(l),b=ag(v.N)+"/documents",S={documents:p.map(J=>og(v.N,J))},R=yield v.Ki("BatchGetDocuments",b,S),P=new Map;R.forEach(J=>{const xe=function(n,e){return"found"in e?function(t,s){pt(!!s.found);const a=ko(t,s.found.name),l=Yr(s.found.updateTime),p=new mi({mapValue:{fields:s.found.fields}});return yn.newFoundDocument(a,l,p)}(n,e):"missing"in e?function(t,s){pt(!!s.missing),pt(!!s.readTime);const a=ko(t,s.missing),l=Yr(s.readTime);return yn.newNoDocument(a,l)}(n,e):nt()}(v.N,J);P.set(xe.key.toString(),xe)});const Y=[];return p.forEach(J=>{const xe=P.get(J.toString());pt(!!xe),Y.push(xe)}),Y}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=Je.fromPath(a);e.mutations.push(new ng(l,e.precondition(l)))}),yield(s=(0,be.Z)(function*(a,l){const p=He(a),v=ag(p.N)+"/documents",b={writes:l.map(S=>cd(p.N,S))};yield p.Li("Commit",v,b)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=Ct.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Oe(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ur.updateTime(t):ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Oe(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ur.updateTime(t)}return ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JS{constructor(e,t,s,a){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=a,this.aa=5,this.rr=new xw(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,be.Z)(function*(){const t=new QS(e.datastore),s=e.ua(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.ha(l)}))}).catch(a=>{e.ha(a)})}))}ua(e){try{const t=this.updateFunction(e);return!Sa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!uC(t)}return!1}}class XS{constructor(e,t,s){var a=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=s,this.user=kr.UNAUTHENTICATED,this.clientId=FE.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var l=(0,be.Z)(function*(p){Ve("FirestoreClient","Received user=",p.uid),yield a.credentialListener(p),a.user=p});return function(p){return l.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(s){const a=Wc(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function ex(n,e){return uD.apply(this,arguments)}function uD(){return(uD=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,be.Z)(function*(l){s.isEqual(l)||(yield RC(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function tx(n,e){return Jw.apply(this,arguments)}function Jw(){return(Jw=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Xw(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>{return(l=(0,be.Z)(function*(p,v){const b=He(p);b.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const S=Gc(b);b.Kr.add(3),yield Hc(b),S&&b.Wr.set("Unknown"),yield b.remoteSyncer.handleCredentialChange(v),b.Kr.delete(3),yield pf(b)}),function(p,v){return l.apply(this,arguments)})(e.remoteStore,a);var l}),n.onlineComponents=e})).apply(this,arguments)}function Xw(n){return eb.apply(this,arguments)}function eb(){return(eb=(0,be.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield ex(n,new ZS)),n.offlineComponents})).apply(this,arguments)}function tb(n){return cD.apply(this,arguments)}function cD(){return(cD=(0,be.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield tx(n,new aD)),n.onlineComponents})).apply(this,arguments)}function nx(n){return Xw(n).then(e=>e.persistence)}function lD(n){return Xw(n).then(e=>e.localStore)}function dD(n){return tb(n).then(e=>e.remoteStore)}function hD(n){return tb(n).then(e=>e.syncEngine)}function bf(n){return xg.apply(this,arguments)}function xg(){return(xg=(0,be.Z)(function*(n){const e=yield tb(n),t=e.eventManager;return t.onListen=BS.bind(null,e.syncEngine),t.onUnlisten=jS.bind(null,e.syncEngine),t})).apply(this,arguments)}function pD(n,e,t={}){const s=new Fr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(a,l,p,v,b){const S=new Qw({next:P=>{l.enqueueAndForget(()=>Vw(a,R));const Y=P.docs.has(p);!Y&&P.fromCache?b.reject(new Oe(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):Y&&P.fromCache&&v&&"server"===v.source?b.reject(new Oe(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(P)},error:P=>b.reject(P)}),R=new a_(id(p.path),S,{includeMetadataChanges:!0,uo:!0});return Cg(a,R)}(yield bf(n),n.asyncQueue,e,t,s)})),s.promise}function rb(n,e,t={}){const s=new Fr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(a,l,p,v,b){const S=new Qw({next:P=>{l.enqueueAndForget(()=>Vw(a,R)),P.fromCache&&"server"===v.source?b.reject(new Oe(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(P)},error:P=>b.reject(P)}),R=new a_(p,S,{includeMetadataChanges:!0,uo:!0});return Cg(a,R)}(yield bf(n),n.asyncQueue,e,t,s)})),s.promise}class v_{constructor(e,t,s,a,l,p,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=v,this.useFetchStreams=b}}class wd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wd&&e.projectId===this.projectId&&e.database===this.database}}const ix=new Map;function _D(n,e,t){if(!t)throw new Oe(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sx(n,e,t,s){if(!0===e&&!0===s)throw new Oe(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vD(n){if(!Je.isDocumentKey(n))throw new Oe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ox(n){if(Je.isDocumentKey(n))throw new Oe(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bd(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bd(n);throw new Oe(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ax(n,e){if(e<=0)throw new Oe(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ux{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Id{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ux({}),this._settingsFrozen=!1,e instanceof wd?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Oe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wd(s.options.projectId)}(e))}get app(){if(!this._app)throw new Oe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ux(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new AA;switch(t.type){case"gapi":const s=t.client;return pt(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new RA(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Oe(ye.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ix.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),ix.delete(e),t.terminate())}(this),Promise.resolve()}}class Nn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ra(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class Vi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class Ra extends Vi{constructor(e,t,s){super(e,t,id(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new Je(e))}withConverter(e){return new Ra(this.firestore,e,this._path)}}function lx(n,e,...t){if(n=(0,xt.m9)(n),_D("collection","path",e),n instanceof Id){const s=Zt.fromString(e,...t);return ox(s),new Ra(n,null,s)}{if(!(n instanceof Nn||n instanceof Ra))throw new Oe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Zt.fromString(e,...t));return ox(s),new Ra(n.firestore,null,s)}}function E_(n,e,...t){if(n=(0,xt.m9)(n),1===arguments.length&&(e=FE.I()),_D("doc","path",e),n instanceof Id){const s=Zt.fromString(e,...t);return vD(s),new Nn(n,null,new Je(s))}{if(!(n instanceof Nn||n instanceof Ra))throw new Oe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Zt.fromString(e,...t));return vD(s),new Nn(n.firestore,n instanceof Ra?n.converter:null,new Je(s))}}function dx(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),(n instanceof Nn||n instanceof Ra)&&(e instanceof Nn||e instanceof Ra)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hx(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),n instanceof Vi&&e instanceof Vi&&n.firestore===e.firestore&&Xp(n._query,e._query)&&n.converter===e.converter}class fx{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new xw(this,"async_queue_retry"),this.Ta=()=>{const t=Qy();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.rr.tr()};const e=Qy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ea(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=Qy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ta)}}enqueue(e){if(this.Ea(),this.wa)return new Promise(()=>{});const t=new Fr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,be.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!ao(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(s=>{throw this.ma=s,this.ga=!1,ar("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.ga=!1,s))));return this.fa=t,t}enqueueAfterDelay(e,t,s){this.Ea(),this.pa.indexOf(e)>-1&&(t=0);const a=Ig.createAndSchedule(this,e,t,s,l=>this.Ra(l));return this._a.push(a),a}Ea(){this.ma&&nt()}verifyOperationInProgress(){}ba(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function Cd(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class px{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bn extends Id{constructor(e,t){super(e,t),this.type="firestore",this._queue=new fx,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||bD(this),this._firestoreClient.terminate()}}function Kt(n){return n._firestoreClient||bD(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bD(n){var e;const t=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new v_(n._databaseId,l,n._persistenceKey,(v=t).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,v.useFetchStreams));var l,v;n._firestoreClient=new XS(n._credentials,n._queue,s)}function ID(n,e,t){const s=new Fr;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield ex(n,t),yield tx(n,e),s.resolve()}catch(a){if(!("FirebaseError"===(l=a).name?l.code===ye.FAILED_PRECONDITION||l.code===ye.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),s.reject(a)}var l})).then(()=>s.promise)}function AD(n){if(n._initialized||n._terminated)throw new Oe(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(Zr.fromBase64String(e))}catch(t){throw new Oe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uo(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ku{constructor(e){this._methodName=e}}class w_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const Bo=/^__.*__$/;class wx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Fc(e,this.data,this.fieldMask,t,this.fieldTransforms):new tg(e,this.data,t,this.fieldTransforms)}}class bx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Fc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class ob{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.N=s,this.ignoreUndefinedProperties=a,void 0===l&&this.Sa(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new ob(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Ca({path:s,xa:!1});return a.ka(e),a}$a(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.Ca({path:s,xa:!1});return a.Sa(),a}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return A_(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(SD(this.Da)&&Bo.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class Ix{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=s||Jy(e)}Ba(e,t,s,a=!1){return new ob({Da:e,methodName:t,La:s,path:Vn.emptyPath(),xa:!1,Ma:a},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Dd(n){const e=n._freezeSettings(),t=Jy(n._databaseId);return new Ix(n._databaseId,!!e.ignoreUndefinedProperties,t)}function b_(n,e,t,s,a,l={}){const p=n.Ba(l.merge||l.mergeFields?2:0,e,t,a);D_("Data must be an object, but it was:",p,s);const v=MD(s,p);let b,S;if(l.merge)b=new Wp(p.fieldMask),S=p.fieldTransforms;else if(l.mergeFields){const R=[];for(const P of l.mergeFields){const Y=Td(e,P,t);if(!p.contains(Y))throw new Oe(ye.INVALID_ARGUMENT,`Field '${Y}' is specified in your field mask but missing from your input data.`);PD(R,Y)||R.push(Y)}b=new Wp(R),S=p.fieldTransforms.filter(P=>b.covers(P.field))}else b=null,S=p.fieldTransforms;return new wx(new mi(v),b,S)}class I_ extends ku{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof I_}}function xD(n,e,t){return new ob({Da:3,La:e.settings.La,methodName:n._methodName,xa:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class C_ extends ku{_toFieldTransform(e){return new eg(e.path,new Qh)}isEqual(e){return e instanceof C_}}class Cx extends ku{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=xD(this,e,!0),s=this.Ua.map(l=>zc(l,t)),a=new od(s);return new eg(e.path,a)}isEqual(e){return this===e}}class Dx extends ku{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=xD(this,e,!0),s=this.Ua.map(l=>zc(l,t)),a=new xu(s);return new eg(e.path,a)}isEqual(e){return this===e}}class ND extends ku{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new ad(e.N,XI(e.N,this.qa));return new eg(e.path,t)}isEqual(e){return this===e}}function ab(n,e,t,s){const a=n.Ba(1,e,t);D_("Data must be an object, but it was:",a,s);const l=[],p=mi.empty();Du(s,(b,S)=>{const R=T_(e,b,t);S=(0,xt.m9)(S);const P=a.$a(R);if(S instanceof I_)l.push(R);else{const Y=zc(S,P);null!=Y&&(l.push(R),p.set(R,Y))}});const v=new Wp(l);return new bx(p,v,a.fieldTransforms)}function RD(n,e,t,s,a,l){const p=n.Ba(1,e,t),v=[Td(e,s,t)],b=[a];if(l.length%2!=0)throw new Oe(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Y=0;Y<l.length;Y+=2)v.push(Td(e,l[Y])),b.push(l[Y+1]);const S=[],R=mi.empty();for(let Y=v.length-1;Y>=0;--Y)if(!PD(S,v[Y])){const J=v[Y];let xe=b[Y];xe=(0,xt.m9)(xe);const je=p.$a(J);if(xe instanceof I_)S.push(J);else{const Ke=zc(xe,je);null!=Ke&&(S.push(J),R.set(J,Ke))}}const P=new Wp(S);return new bx(R,P,p.fieldTransforms)}function ub(n,e,t,s=!1){return zc(t,n.Ba(s?4:3,e))}function zc(n,e){if(OD(n=(0,xt.m9)(n)))return D_("Unsupported field value:",e,n),MD(n,e);if(n instanceof ku)return function(t,s){if(!SD(s.Da))throw s.Fa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fa(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let v=zc(p,s.Oa(l));null==v&&(v={nullValue:"NULL_VALUE"}),a.push(v),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return XI(s.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Er.fromDate(t);return{timestampValue:ud(s.N,a)}}if(t instanceof Er){const a=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ud(s.N,a)}}if(t instanceof w_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Uo)return{bytesValue:rw(s.N,t._byteString)};if(t instanceof Nn){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s.Fa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:iw(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.Fa(`Unsupported field value: ${bd(t)}`)}(n,e)}function MD(n,e){const t={};return UE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Du(n,(s,a)=>{const l=zc(a,e.Na(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function OD(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Er||n instanceof w_||n instanceof Uo||n instanceof Nn||n instanceof ku)}function D_(n,e,t){if(!OD(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=bd(t);throw e.Fa("an object"===s?n+" a custom object":n+" "+s)}var s}function Td(n,e,t){if((e=(0,xt.m9)(e))instanceof Vo)return e._internalPath;if("string"==typeof e)return T_(n,e);throw A_("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const cb=new RegExp("[~\\*/\\[\\]]");function T_(n,e,t){if(e.search(cb)>=0)throw A_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vo(...e.split("."))._internalPath}catch(s){throw A_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function A_(n,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let b="";return(l||p)&&(b+=" (found",l&&(b+=` in field ${s}`),p&&(b+=` in document ${a}`),b+=")"),new Oe(ye.INVALID_ARGUMENT,v+n+b)}function PD(n,e){return n.some(t=>t.isEqual(e))}class S_{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new aR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class aR extends S_{data(){return super.data()}}function lb(n,e){return"string"==typeof e?T_(n,e):e instanceof Vo?e._internalPath:e._delegate._internalPath}class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ma extends S_{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ng(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(lb("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Ng extends Ma{data(e={}){return super.data(e)}}class Kc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Zc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Ng(this._firestore,this._userDataWriter,s.key,s,new Zc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new Ng(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Zc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const v=new Ng(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Zc(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let b=-1,S=-1;return 0!==p.type&&(b=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),S=l.indexOf(p.doc.key)),{type:Tx(p.type),doc:v,oldIndex:b,newIndex:S}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Tx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function kD(n,e){return n instanceof Ma&&e instanceof Ma?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kc&&e instanceof Kc&&n._firestore===e._firestore&&hx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function db(n){if(xy(n)&&0===n.explicitOrderBy.length)throw new Oe(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class x_{}function Ad(n,...e){for(const t of e)n=t._apply(n);return n}class Ax extends x_{constructor(e,t,s){super(),this.Ka=e,this.ja=t,this.Qa=s,this.type="where"}_apply(e){const t=Dd(e.firestore),s=function(a,l,p,v,b,S,R){let P;if(b.isKeyField()){if("array-contains"===S||"array-contains-any"===S)throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on FieldPath.documentId().`);if("in"===S||"not-in"===S){VD(R,S);const J=[];for(const xe of R)J.push(R_(v,a,xe));P={arrayValue:{values:J}}}else P=R_(v,a,R)}else"in"!==S&&"not-in"!==S&&"array-contains-any"!==S||VD(R,S),P=ub(p,"where",R,"in"===S||"not-in"===S);const Y=Pi.create(b,S,P);return function(J,xe){if(xe.v()){const Ke=ZE(J);if(null!==Ke&&!Ke.isEqual(xe.field))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ke.toString()}' and '${xe.field.toString()}'`);const Pt=zE(J);null!==Pt&&Mg(0,xe.field,Pt)}const je=function(Ke,Pt){for(const sn of Ke.filters)if(Pt.indexOf(sn.op)>=0)return sn.op;return null}(J,function(Ke){switch(Ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(xe.op));if(null!==je)throw new Oe(ye.INVALID_ARGUMENT,je===xe.op?`Invalid query. You cannot use more than one '${xe.op.toString()}' filter.`:`Invalid query. You cannot use '${xe.op.toString()}' filters with '${je.toString()}' filters.`)}(a,Y),Y}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Vi(e.firestore,e.converter,function(a,l){const p=a.filters.concat([l]);return new Su(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}class Vr extends x_{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Qp(a,l);return function(v,b){if(null===zE(v)){const S=ZE(v);null!==S&&Mg(0,S,b.field)}}(s,p),p}(e._query,this.Ka,this.Wa);return new Vi(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new Su(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class fb extends x_{constructor(e,t,s){super(),this.type=e,this.Ga=t,this.za=s}_apply(e){return new Vi(e.firestore,e.converter,KI(e._query,this.Ga,this.za))}}class Rg extends x_{constructor(e,t,s){super(),this.type=e,this.Ha=t,this.Ja=s}_apply(e){const t=N_(e,this.type,this.Ha,this.Ja);return new Vi(e.firestore,e.converter,(a=t,new Su((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class pb extends x_{constructor(e,t,s){super(),this.type=e,this.Ha=t,this.Ja=s}_apply(e){const t=N_(e,this.type,this.Ha,this.Ja);return new Vi(e.firestore,e.converter,(a=t,new Su((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function N_(n,e,t,s){if(t[0]=(0,xt.m9)(t[0]),t[0]instanceof S_)return function(a,l,p,v,b){if(!v)throw new Oe(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const S=[];for(const R of Zh(a))if(R.field.isKeyField())S.push(Kp(l,v.key));else{const P=v.data.field(R.field);if(jE(P))throw new Oe(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const Y=R.field.canonicalString();throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Y}' (used as the orderBy) does not exist.`)}S.push(P)}return new Sy(S,b)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=Dd(n.firestore);return function(l,p,v,b,S,R){const P=l.explicitOrderBy;if(S.length>P.length)throw new Oe(ye.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Y=[];for(let J=0;J<S.length;J++){const xe=S[J];if(P[J].field.isKeyField()){if("string"!=typeof xe)throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof xe}`);if(!KE(l)&&-1!==xe.indexOf("/"))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${b}() must be a plain document ID, but '${xe}' contains a slash.`);const je=l.path.child(Zt.fromString(xe));if(!Je.isDocumentKey(je))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${b}() must result in a valid document path, but '${je}' is not because it contains an odd number of segments.`);const Ke=new Je(je);Y.push(Kp(p,Ke))}else{const je=ub(v,b,xe);Y.push(je)}}return new Sy(Y,R)}(n._query,n.firestore._databaseId,a,e,t,s)}}function R_(n,e,t){if("string"==typeof(t=(0,xt.m9)(t))){if(""===t)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!KE(e)&&-1!==t.indexOf("/"))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Zt.fromString(t));if(!Je.isDocumentKey(s))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Kp(n,new Je(s))}if(t instanceof Nn)return Kp(n,t._key);throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${bd(t)}.`)}function VD(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Mg(n,e,t){if(!t.isEqual(e))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class gb{convertValue(e,t="none"){switch(ln(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(it(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const s={};return Du(e.fields,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new w_(wr(e.latitude),wr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=UI(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(zp(e));default:return null}}convertTimestamp(e){const t=Tu(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Zt.fromString(e);pt(rf(s));const a=new wd(s.get(1),s.get(3)),l=new Je(s.popFirst(5));return a.isEqual(t)||ar(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Cf(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class UD extends gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}class Cr{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dd(e)}set(e,t,s){this._verifyNotCommitted();const a=xd(e,this._firestore),l=Cf(a.converter,t,s),p=b_(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,ur.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=xd(e,this._firestore);let p;return p="string"==typeof(t=(0,xt.m9)(t))||t instanceof Vo?RD(this._dataReader,"WriteBatch.update",l._key,t,s,a):ab(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xd(e,this._firestore);return this._mutations=this._mutations.concat(new Jh(t._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xd(n,e){if((n=(0,xt.m9)(n)).firestore!==e)throw new Oe(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Nd extends gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}function Ox(n,e,t){n=Ht(n,Nn);const s=Ht(n.firestore,Bn),a=Cf(n.converter,e,t);return Og(s,[b_(Dd(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,ur.none())])}function BD(n,e,t,...s){n=Ht(n,Nn);const a=Ht(n.firestore,Bn),l=Dd(a);let p;return p="string"==typeof(e=(0,xt.m9)(e))||e instanceof Vo?RD(l,"updateDoc",n._key,e,t,s):ab(l,"updateDoc",n._key,e),Og(a,[p.toMutation(n._key,ur.exists(!0))])}function jD(n,...e){var t,s,a;n=(0,xt.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||Cd(e[p])||(l=e[p],p++);const v={includeMetadataChanges:l.includeMetadataChanges};if(Cd(e[p])){const P=e[p];e[p]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[p+1]=null===(s=P.error)||void 0===s?void 0:s.bind(P),e[p+2]=null===(a=P.complete)||void 0===a?void 0:a.bind(P)}let b,S,R;if(n instanceof Nn)S=Ht(n.firestore,Bn),R=id(n._key.path),b={next:P=>{e[p]&&e[p](mb(S,n,P))},error:e[p+1],complete:e[p+2]};else{const P=Ht(n,Vi);S=Ht(P.firestore,Bn),R=P._query;const Y=new Nd(S);b={next:J=>{e[p]&&e[p](new Kc(S,Y,P,J))},error:e[p+1],complete:e[p+2]},db(n._query)}return function(P,Y,J,xe){const je=new Qw(xe),Ke=new a_(Y,je,J);return P.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Cg(yield bf(P),Ke)})),()=>{je.Xo(),P.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Vw(yield bf(P),Ke)}))}}(Kt(S),R,v,b)}function Og(n,e){return function(t,s){const a=new Fr;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(n,e,t){return c_.apply(this,arguments)}(yield hD(t),s,a)})),a.promise}(Kt(n),e)}function mb(n,e,t){const s=t.docs.get(e._key),a=new Nd(n);return new Ma(n,a,e._key,s,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}class Lx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dd(e)}get(e){const t=xd(e,this._firestore),s=new UD(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return nt();const l=a[0];if(l.isFoundDocument())return new S_(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new S_(this._firestore,s,t._key,null,t.converter);throw nt()})}set(e,t,s){const a=xd(e,this._firestore),l=Cf(a.converter,t,s),p=b_(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=xd(e,this._firestore);let p;return p="string"==typeof(t=(0,xt.m9)(t))||t instanceof Vo?RD(this._dataReader,"Transaction.update",l._key,t,s,a):ab(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=xd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=xd(e,this._firestore),s=new Nd(this._firestore);return super.get(e).then(a=>new Ma(this._firestore,s,t._key,a._document,new Zc(!1,!1),t.converter))}}function yb(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $D(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function HD(){if("undefined"==typeof atob)throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(n){nd=n})(Vl.SDK_VERSION),(0,Vl._registerComponent)(new vv.wA("firestore",(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),s=new Bn(t,new xA(n.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),s._setSettings(e),s},"PUBLIC")),(0,Vl.registerVersion)(PE,"3.1.1",void 0),(0,Vl.registerVersion)(PE,"3.1.1","esm2017");class O_{constructor(e){this._delegate=e}static fromBase64String(e){return HD(),new O_(Uo.fromBase64String(e))}static fromUint8Array(e){return $D(),new O_(Uo.fromUint8Array(e))}toBase64(){return HD(),this._delegate.toBase64()}toUint8Array(){return $D(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _b(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of["next","error","complete"])if(s in t&&"function"==typeof t[s])return!0;return!1}(n)}class qx{enableIndexedDbPersistence(e,t){return function(n,e){AD(n=Ht(n,Bn));const t=Kt(n),s=n._freezeSettings(),a=new aD;return ID(t,a,new KS(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){AD(n=Ht(n,Bn));const e=Kt(n),t=n._freezeSettings(),s=new aD;return ID(e,s,new rR(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Oe(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(s){if(!Fi.bt())return Promise.resolve();const a=s+"main";yield Fi.delete(a)}),function(s){return t.apply(this,arguments)})(mw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Df{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof wd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function(n,e,t,s={}){var a;const l=(n=Ht(n,Id))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&qp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,v;if("string"==typeof s.mockUserToken)p=s.mockUserToken,v=kr.MOCK_USER;else{p=(0,xt.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new Oe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new kr(b)}n._credentials=new SA(new FI(p,v))}}(this._delegate,e,t,s)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield nx(n),t=yield dD(n);return e.setNetworkEnabled(!0),function(s){const a=He(s);return a.Kr.delete(0),pf(a)}(t)}))}(Kt(n=Ht(n,Bn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield nx(n),t=yield dD(n);return e.setNetworkEnabled(!1),(s=(0,be.Z)(function*(a){const l=He(a);l.Kr.add(0),yield Hc(l),l.Wr.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Kt(n=Ht(n,Bn)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,sx("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(n,e){return Ag.apply(this,arguments)}(yield hD(e),t)})),t.promise}(Kt(n=Ht(n,Bn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new Qw(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return s=yield bf(n),a=t,He(s).Zr.add(a),void a.next();var s,a})),()=>{t.Xo(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return s=yield bf(n),a=t,void He(s).Zr.delete(a);var s,a}))}}(Kt(n=Ht(n,Bn)),Cd(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ei(this,lx(this._delegate,e))}catch(t){throw Xr(t,"collection()","Firestore.collection()")}}doc(e){try{return new $o(this,E_(this._delegate,e))}catch(t){throw Xr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ui(this,function(n,e){if(n=Ht(n,Id),_D("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vi(n,null,(t=e,new Su(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const s=yield(a=n,tb(a).then(l=>l.datastore));var a;new JS(n.asyncQueue,s,e,t).run()})),t.promise}(Kt(n),t=>e(new Lx(n,t)))}(this._delegate,t=>e(new GD(this,t)))}batch(){return Kt(this._delegate),new Wx(new Cr(this._delegate,e=>Og(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Kt(n=Ht(n,Bn)),s=new px;return function(n,e,t,s){const a=function(l,p){let v;return v="string"==typeof l?(new TextEncoder).encode(l):l,b=function(b,S){if(b instanceof Uint8Array)return YS(b,S);if(b instanceof ArrayBuffer)return YS(new Uint8Array(b),S);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(v),new iR(b,p);var b}(t,Jy(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function(n,e,t){const s=He(n);var a;(a=(0,be.Z)(function*(l,p,v){try{const b=yield p.getMetadata();if(yield function(Y,J){const xe=He(Y),je=Yr(J.createTime);return xe.persistence.runTransaction("hasNewerBundle","readonly",Ke=>xe.Je.getBundleMetadata(Ke,J.id)).then(Ke=>!!Ke&&Ke.createTime.compareTo(je)>=0)}(l.localStore,b))return yield p.close(),void v._completeWith((Y=b,{taskState:"Success",documentsLoaded:Y.totalDocuments,bytesLoaded:Y.totalBytes,totalDocuments:Y.totalDocuments,totalBytes:Y.totalBytes}));v._updateProgress(VS(b));const S=new LS(b,l.localStore,p.N);let R=yield p.Qo();for(;R;){const Y=yield S.fo(R);Y&&v._updateProgress(Y),R=yield p.Qo()}const P=yield S.complete();yield Na(l,P.En,void 0),yield function(Y,J){const xe=He(Y);return xe.persistence.runTransaction("Save bundle","readwrite",je=>xe.Je.saveBundleMetadata(je,J))}(l.localStore,b),v._completeWith(P.progress)}catch(b){qp("SyncEngine",`Loading bundle failed with ${b}`),v._failWith(b)}var Y}),function(l,p,v){return a.apply(this,arguments)})(s,e,t).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield hD(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,s){const a=He(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Je.getNamedQuery(l,s))}(yield lD(n),e)}))}(Kt(n=Ht(n,Bn)),e).then(t=>t?new Vi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ui(this,t):null)}}class Pg extends gb{constructor(e){super(),this.firestore=e}convertBytes(e){return new O_(new Uo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $o.forKey(t,this.firestore,null)}}class GD{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Pg(e)}get(e){const t=Af(e);return this._delegate.get(t).then(s=>new kg(this._firestore,new Ma(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Af(e);return s?(yb("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Af(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Af(e);return this._delegate.delete(t),this}}class Wx{constructor(e){this._delegate=e}set(e,t,s){const a=Af(e);return s?(yb("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Af(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Af(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tf{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Ng(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new P_(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Tf.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new Tf(e,new Pg(e),t),a.set(t,l)),l}}Tf.INSTANCES=new WeakMap;class $o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Pg(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $o(t,new Nn(t._delegate,s,new Je(e)))}static forKey(e,t,s){return new $o(t,new Nn(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Ei(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ei(this.firestore,lx(this._delegate,e))}catch(t){throw Xr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Nn&&dx(this._delegate,e)}set(e,t){t=yb("DocumentReference.set",t);try{return t?Ox(this._delegate,e,t):Ox(this._delegate,e)}catch(s){throw Xr(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?BD(this._delegate,e):BD(this._delegate,e,t,...s)}catch(a){throw Xr(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Og(Ht(n.firestore,Bn),[new Jh(n._key,ur.none())])}(this._delegate)}onSnapshot(...e){const t=qD(e),s=WD(e,a=>new kg(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return jD(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Ht(n,Nn);const e=Ht(n.firestore,Bn),t=Kt(e),s=new Nd(e);return function(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(s=(0,be.Z)(function*(a,l,p){try{const v=yield function(b,S){const R=He(b);return R.persistence.runTransaction("read document","readonly",P=>R.Qn.An(P,S))}(a,l);v.isFoundDocument()?p.resolve(v):v.isNoDocument()?p.resolve(null):p.reject(new Oe(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(v){const b=Wc(v,`Failed to get document '${l} from cache`);p.reject(b)}}),function(a,l,p){return s.apply(this,arguments)})(yield lD(n),e,t);var s})),t.promise}(t,n._key).then(a=>new Ma(e,s,n._key,a,new Zc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Ht(n,Nn);const e=Ht(n.firestore,Bn);return pD(Kt(e),n._key,{source:"server"}).then(t=>mb(e,n,t))}(this._delegate):function(n){n=Ht(n,Nn);const e=Ht(n.firestore,Bn);return pD(Kt(e),n._key).then(t=>mb(e,n,t))}(this._delegate),t.then(s=>new kg(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new $o(this.firestore,this._delegate.withConverter(e?Tf.getInstance(this.firestore,e):null))}}function Xr(n,e,t){return n.message=n.message.replace(e,t),n}function qD(n){for(const e of n)if("object"==typeof e&&!_b(e))return e;return{}}function WD(n,e){var t,s;let a;return a=_b(n[0])?n[0]:_b(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class kg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $o(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kD(this._delegate,e._delegate)}}class P_ extends kg{data(e){const t=this._delegate.data(e);return function(n,e){n||nt()}(void 0!==t),t}}class Ui{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Pg(e)}where(e,t,s){try{return new Ui(this.firestore,Ad(this._delegate,function(n,e,t){const s=e,a=lb("where",n);return new Ax(a,s,t)}(e,t,s)))}catch(a){throw Xr(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ui(this.firestore,Ad(this._delegate,function(n,e="asc"){const t=e,s=lb("orderBy",n);return new Vr(s,t)}(e,t)))}catch(s){throw Xr(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ui(this.firestore,Ad(this._delegate,function(n){return ax("limit",n),new fb("limit",n,"F")}(e)))}catch(t){throw Xr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ui(this.firestore,Ad(this._delegate,function(n){return ax("limitToLast",n),new fb("limitToLast",n,"L")}(e)))}catch(t){throw Xr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ui(this.firestore,Ad(this._delegate,function(...n){return new Rg("startAt",n,!0)}(...e)))}catch(t){throw Xr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ui(this.firestore,Ad(this._delegate,function(...n){return new Rg("startAfter",n,!1)}(...e)))}catch(t){throw Xr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ui(this.firestore,Ad(this._delegate,function(...n){return new pb("endBefore",n,!0)}(...e)))}catch(t){throw Xr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ui(this.firestore,Ad(this._delegate,function(...n){return new pb("endAt",n,!1)}(...e)))}catch(t){throw Xr(t,"endAt()","Query.endAt()")}}isEqual(e){return hx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Ht(n,Vi);const e=Ht(n.firestore,Bn),t=Kt(e),s=new Nd(e);return function(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(s=(0,be.Z)(function*(a,l,p){try{const v=yield mg(a,l,!0),b=new QC(l,v.Gn),S=b.Io(v.documents),R=b.applyChanges(S,!1);p.resolve(R.snapshot)}catch(v){const b=Wc(v,`Failed to execute query '${l} against cache`);p.reject(b)}}),function(a,l,p){return s.apply(this,arguments)})(yield lD(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Kc(e,s,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Ht(n,Vi);const e=Ht(n.firestore,Bn),t=Kt(e),s=new Nd(e);return rb(t,n._query,{source:"server"}).then(a=>new Kc(e,s,n,a))}(this._delegate):function(n){n=Ht(n,Vi);const e=Ht(n.firestore,Bn),t=Kt(e),s=new Nd(e);return db(n._query),rb(t,n._query).then(a=>new Kc(e,s,n,a))}(this._delegate),t.then(s=>new vb(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=qD(e),s=WD(e,a=>new vb(this.firestore,new Kc(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return jD(this._delegate,t,s)}withConverter(e){return new Ui(this.firestore,this._delegate.withConverter(e?Tf.getInstance(this.firestore,e):null))}}class zx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new P_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ui(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new P_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zx(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new P_(this._firestore,s))})}isEqual(e){return kD(this._delegate,e._delegate)}}class Ei extends Ui{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $o(this.firestore,e):null}doc(e){try{return new $o(this.firestore,void 0===e?E_(this._delegate):E_(this._delegate,e))}catch(t){throw Xr(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Ht(n.firestore,Bn),s=E_(n),a=Cf(n.converter,e);return Og(t,[b_(Dd(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,ur.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new $o(this.firestore,t))}isEqual(e){return dx(this._delegate,e._delegate)}withConverter(e){return new Ei(this.firestore,this._delegate.withConverter(e?Tf.getInstance(this.firestore,e):null))}}function Af(n){return Ht(n,Nn)}class k_{constructor(...e){this._delegate=new Vo(...e)}static documentId(){return new k_(Vn.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof Vo&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rd{constructor(e){this._delegate=e}static serverTimestamp(){const e=new C_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Rd(e)}static delete(){const e=new I_("deleteField");return e._methodName="FieldValue.delete",new Rd(e)}static arrayUnion(...e){const t=function(...n){return new Cx("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Rd(t)}static arrayRemove(...e){const t=function(...n){return new Dx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Rd(t)}static increment(e){const t=function(n){return new ND("increment",n)}(e);return t._methodName="FieldValue.increment",new Rd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zD={Firestore:Df,GeoPoint:w_,Timestamp:Er,Blob:O_,Transaction:GD,WriteBatch:Wx,DocumentReference:$o,DocumentSnapshot:kg,Query:Ui,QueryDocumentSnapshot:P_,QuerySnapshot:vb,CollectionReference:Ei,FieldPath:k_,FieldValue:Rd,setLogLevel:function(n){!function(n){Cu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function F_(n,e){return function(n,e=F0.z){return new ii.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function Sf(n,e){return F_(n,e).pipe((0,mt.U)(t=>({payload:t,type:"query"})))}function Md(n,e){return Sf(n,e).pipe(pa(void 0),Hl(),(0,mt.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,v)=>{const b=a.find(R=>R.doc.ref.isEqual(p.ref)),S=null==t?void 0:t.payload.docs.find(R=>R.ref.isEqual(p.ref));b&&JSON.stringify(b.doc.metadata)===JSON.stringify(p.metadata)||!b&&S&&JSON.stringify(S.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:v,newIndex:v,type:"modified",doc:p}})}),l}))}function bb(n,e,t){return Md(n,t).pipe(ga((s,a)=>function(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ib(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ib(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ib(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(l=>l.payload),e),[]),t=>t.lift(new L0(void 0,void 0)),(0,mt.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Ib(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function Cb(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new vv.wA("firestore-compat",t=>((e,t)=>new Df(e,t,new qx))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},zD)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.4")}(iA.Z);class QD{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Md(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,mt.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(pa(void 0),Hl(),xi(([s,a])=>a.length>0||!s),(0,mt.U)(([s,a])=>a),Wr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ga((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Cb(e);return bb(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return Sf(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Wr.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Wr.iC)}add(e){return this.ref.add(e)}doc(e){return new JD(this.ref.doc(e),this.afs)}}class JD{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=Lg(s,t);return new QD(a,l,this.afs)}snapshotChanges(){return function(n,e){return F_(n,e).pipe(pa(void 0),Hl(),(0,mt.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe(Wr.iC)}}class Kx{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Md(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),xi(t=>t.length>0),Wr.iC):Md(this.query,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ga((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Cb(e);return bb(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr.iC)}valueChanges(e={}){return Sf(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Wr.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Wr.iC)}}const Db=new f.OlP("angularfire2.enableFirestorePersistence"),Yx=new f.OlP("angularfire2.firestore.persistenceSettings"),Bi=new f.OlP("angularfire2.firestore.settings"),Fg=new f.OlP("angularfire2.firestore.use-emulator");function Lg(n,e=(t=>t)){return{query:e(n),ref:n}}let XD=(()=>{class n{constructor(t,s,a,l,p,v,b,S,R,P,Y,J,xe,je,Ke,Pt,sn){this.schedulers=b;const Rn=(0,ts.on)(t,v,s),Vt=R;P&&k0(Rn,v,Y,xe,je,Ke,J,Pt),[this.firestore,this.persistenceEnabled$]=(0,ts.cc)(`${Rn.name}.firestore`,"AngularFirestore",Rn.name,()=>{const hr=v.runOutsideAngular(()=>Rn.firestore());if(l&&hr.settings(l),Vt&&hr.useEmulator(...Vt),a&&!_o(p)){const Va=()=>{try{return(0,gn.D)(hr.enablePersistence(S||void 0).then(()=>!0,()=>!1))}catch(NM){return"undefined"!=typeof console&&console.warn(NM),(0,Xe.of)(!1)}};return[hr,v.runOutsideAngular(Va)]}return[hr,(0,Xe.of)(!1)]},[l,Vt,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=Lg(a,s),v=this.schedulers.ngZone.run(()=>l);return new QD(v,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new Kx(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new JD(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ts.Dh),f.LFG(ts.xv,8),f.LFG(Db,8),f.LFG(Bi,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Wr.HU),f.LFG(Yx,8),f.LFG(Fg,8),f.LFG(Vv,8),f.LFG(Pv,8),f.LFG(kv,8),f.LFG(Fv,8),f.LFG(Lv,8),f.LFG(Ca,8),f.LFG(Ip,8),f.LFG(Rv,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Vg=(()=>{class n{constructor(t){this.firestore=t}saveInfoUser(t){return this.firestore.collection("users").add(t)}getNotes(){return this.firestore.collection("userNotes").snapshotChanges()}createNote(t){return this.firestore.collection("userNotes").add(t)}updateNote(t,s){return this.firestore.collection("userNotes").doc(t).update(s)}deleteNote(t){return this.firestore.collection("userNotes").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(XD))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var eT=V(1555);function V_(n,e){return new ii.y(t=>{const s=n.length;if(0===s)return void t.complete();const a=new Array(s);let l=0,p=0;for(let v=0;v<s;v++){const b=(0,gn.D)(n[v]);let S=!1;t.add(b.subscribe({next:R=>{S||(S=!0,p++),a[v]=R},error:R=>t.error(R),complete:()=>{l++,(l===s||!S)&&(p===s&&t.next(e?e.reduce((R,P,Y)=>(R[P]=a[Y],R),{}):a),t.complete())}}))}})}let tT=(()=>{class n{constructor(t,s){this._renderer=t,this._elementRef=s,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,s){this._renderer.setProperty(this._elementRef.nativeElement,t,s)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Od=(()=>{class n extends tT{}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Oa=new f.OlP("NgValueAccessor"),Qx={provide:Oa,useExisting:(0,f.Gpc)(()=>Pa),multi:!0},Yc=new f.OlP("CompositionEventMode");let Pa=(()=>{class n extends tT{constructor(t,s,a){super(t,s),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Yc,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,s){1&t&&f.NdJ("input",function(l){return s._handleInput(l.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(l){return s._compositionEnd(l.target.value)})},features:[f._Bn([Qx]),f.qOj]}),n})();const wi=new f.OlP("NgValidators"),Qc=new f.OlP("NgAsyncValidators");function kd(n){return null!=n}function uT(n){const e=(0,f.QGY)(n)?(0,gn.D)(n):n;return(0,f.CqO)(e),e}function cT(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function lT(n,e){return e.map(t=>t(n))}function Nb(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function U_(n){return null!=n?function(n){if(!n)return null;const e=n.filter(kd);return 0==e.length?null:function(t){return cT(lT(t,e))}}(Nb(n)):null}function Mb(n){return null!=n?function(n){if(!n)return null;const e=n.filter(kd);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,zs.k)(e))return V_(e,null);if((0,eT.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return V_(t.map(s=>e[s]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return V_(n=1===n.length&&(0,zs.k)(n[0])?n[0]:n,null).pipe((0,mt.U)(t=>e(...t)))}return V_(n,null)}(lT(t,e).map(uT)).pipe((0,mt.U)(cT))}}(Nb(n)):null}function hT(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ug(n){return n?Array.isArray(n)?n:[n]:[]}function j_(n,e){return Array.isArray(n)?n.includes(e):n===e}function fT(n,e){const t=Ug(e);return Ug(n).forEach(a=>{j_(t,a)||t.push(a)}),t}function Xx(n,e){return Ug(e).filter(t=>!j_(n,t))}let eN=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=U_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Mb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,s){return!!this.control&&this.control.hasError(t,s)}getError(t,s){return this.control?this.control.getError(t,s):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})(),ds=(()=>{class n extends eN{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();class Fd extends eN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pT{constructor(e){this._cd=e}is(e){var t,s,a;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(a=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===a?void 0:a[e])}}let Pb=(()=>{class n extends pT{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Fd,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,s){2&t&&f.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[f.qOj]}),n})(),gT=(()=>{class n extends pT{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ds,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,s){2&t&&f.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))("ng-submitted",s.is("submitted"))},features:[f.qOj]}),n})();function y(n,e){N(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ae(n,e)})}(n,e),function(n,e){const t=(s,a)=>{e.valueAccessor.writeValue(s),a&&e.viewToModelUpdate(s)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ae(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=s=>{e.valueAccessor.setDisabledState(s)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function C(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function N(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(hT(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const s=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(hT(s,e.asyncValidator)):"function"==typeof s&&n.setAsyncValidators([s]);const a=()=>n.updateValueAndValidity();C(e._rawValidators,a),C(e._rawAsyncValidators,a)}function ae(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Fu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const La="VALID",Nf="INVALID",Xc="PENDING",Vd="DISABLED";function jg(n){return(nN(n)?n.validators:n)||null}function ER(n){return Array.isArray(n)?U_(n):n||null}function tN(n,e){return(nN(e)?e.asyncValidators:n)||null}function wR(n){return Array.isArray(n)?Mb(n):n||null}function nN(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class rN{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ER(this._rawValidators),this._composedAsyncValidatorFn=wR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===La}get invalid(){return this.status===Nf}get pending(){return this.status==Xc}get disabled(){return this.status===Vd}get enabled(){return this.status!==Vd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ER(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=wR(e)}addValidators(e){this.setValidators(fT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Xx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Xx(e,this._rawAsyncValidators))}hasValidator(e){return j_(this._rawValidators,e)}hasAsyncValidator(e){return j_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Xc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vd,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=La,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===La||this.status===Xc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vd:La}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Xc,this._hasOwnPendingAsyncValidator=!0;const t=uT(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let s=n;return e.forEach(a=>{s=s instanceof iN?s.controls.hasOwnProperty(a)?s.controls[a]:null:s instanceof QR&&s.at(a)||null}),s}(this,e)}getError(e,t){const s=t?this.get(t):this;return s&&s.errors?s.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Vd:this.errors?Nf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xc)?Xc:this._anyControlsHaveStatus(Nf)?Nf:La}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nN(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class _T extends rN{constructor(e=null,t,s){super(jg(t),tN(s,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Fu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Fu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class iN extends rN{constructor(e,t,s){super(jg(t),tN(s,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,s={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,s={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((s,a)=>{s.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,s)=>(e[s]=t instanceof _T?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,s)=>!!s._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const s=this.controls[t];s&&e(s,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const s=this.controls[t];if(this.contains(t)&&e(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,s)=>((t.enabled||this.disabled)&&(e[s]=t.value),e))}_reduceChildren(e,t){let s=e;return this._forEachChild((a,l)=>{s=t(s,a,l)}),s}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,s)=>{if(void 0===e[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class QR extends rN{constructor(e,t,s){super(jg(t),tN(s,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,s={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,s={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((s,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(s,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((s,a)=>{this.at(a)&&this.at(a).patchValue(s,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((s,a)=>{s.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof _T?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,s)=>!!s._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,s)=>{e(t,s)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,s)=>{if(void 0===e[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const JR={provide:ds,useExisting:(0,f.Gpc)(()=>Lb)},Fb=(()=>Promise.resolve(null))();let Lb=(()=>{class n extends ds{constructor(t,s){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new f.vpe,this.form=new iN({},U_(t),Mb(s))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fb.then(()=>{const s=this._findContainer(t.path);t.control=s.registerControl(t.name,t.control),y(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fb.then(()=>{const s=this._findContainer(t.path);s&&s.removeControl(t.name),Fu(this._directives,t)})}addFormGroup(t){Fb.then(()=>{const s=this._findContainer(t.path),a=new iN({});(function(n,e){N(n,e)})(a,t),s.registerControl(t.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fb.then(()=>{const s=this._findContainer(t.path);s&&s.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,s){Fb.then(()=>{this.form.get(t.path).setValue(s)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const s=t.control;"submit"===s.updateOn&&s._pendingChange&&(t.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(wi,10),f.Y36(Qc,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,s){1&t&&f.NdJ("submit",function(l){return s.onSubmit(l)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([JR]),f.qOj]}),n})();const eM={provide:Fd,useExisting:(0,f.Gpc)(()=>Vb)},CR=(()=>Promise.resolve(null))();let Vb=(()=>{class n extends Fd{constructor(t,s,a,l){super(),this.control=new _T,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(s),this._setAsyncValidators(a),this.valueAccessor=function(n,e){if(!e)return null;let t,s,a;return Array.isArray(e),e.forEach(l=>{l.constructor===Pa?t=l:function(n){return Object.getPrototypeOf(n.constructor)===Od}(l)?s=l:a=l}),a||s||t||null}(0,l)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){y(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){CR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const s=t.isDisabled.currentValue,a=""===s||s&&"false"!==s;CR.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ds,9),f.Y36(wi,10),f.Y36(Qc,10),f.Y36(Oa,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([eM]),f.qOj,f.TTD]}),n})(),sN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),TR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),HR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[TR]]}),n})(),CM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[HR]}),n})();function DM(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"section",36),f.TgZ(1,"div",37),f.TgZ(2,"div",38),f.TgZ(3,"h5",39),f._uU(4),f.TgZ(5,"button",40),f.NdJ("click",function(){const l=f.CHM(t).$implicit;return f.oxw().deleteNote(l.id)}),f._UZ(6,"i",41),f.qZA(),f.TgZ(7,"button",42),f.NdJ("click",function(){const l=f.CHM(t).$implicit;return f.oxw().getIdNote(l.id,l.content)}),f._UZ(8,"i",43),f.qZA(),f.qZA(),f.qZA(),f.TgZ(9,"div",44),f.TgZ(10,"p",45),f._uU(11),f.qZA(),f.TgZ(12,"p",46),f._uU(13),f.ALo(14,"date"),f.qZA(),f.qZA(),f.qZA(),f.qZA()}if(2&n){const t=e.$implicit;f.xp6(4),f.hij("",t.title," "),f.xp6(7),f.Oqu(t.content),f.xp6(2),f.Oqu(f.xi3(14,3,t.date,"dd/MM/yyyy"))}}const TM=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t,s,a){this.authService=t,this.firestoreService=s,this.router=a,this.localuid="",this.user={email:"",password:""}}ngOnInit(){this.authService.userlogged()}LogIn(){const{email:t,password:s}=this.user;this.authService.login(t,s).then(a=>{console.log(a)}).catch(a=>{console.log(a)})}LogInGoogle(){this.authService.loginWithGoogle().then(t=>{var s,a;console.log(t),this.localuid=null===(s=t.user)||void 0===s?void 0:s.uid,localStorage.setItem("localUid",this.localuid),(null===(a=t.additionalUserInfo)||void 0===a?void 0:a.isNewUser)&&this.firestoreService.saveInfoUser({uid:t.user.uid,name:t.additionalUserInfo.profile.given_name,lastName:t.additionalUserInfo.profile.family_name,fullName:t.additionalUserInfo.profile.name,photo:t.additionalUserInfo.profile.picture,email:t.additionalUserInfo.profile.email}),this.router.navigateByUrl("/home")}).catch(t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cc),f.Y36(Vg),f.Y36(Mr))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:27,vars:2,consts:[[1,"mt-3"],["src","../../../assets/logo.png","alt","Icon logo",1,"logo-home","mx-auto","d-block"],[1,"row","mx-auto","container","mt-2","mb-2"],[1,"col-sm-8","mx-auto","d-block"],[1,"col","form-group","custom-form"],[1,"form-group"],["for","exampleInputEmail1",1,"text","fs-5"],["type","email","autocomplete","on","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Enter email","name","email",1,"form-control","mb-3","border","border-secondary","rounded-pill","borderInput",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"fs-5","text"],["type","password","autocomplete","off","id","exampleInputPassword1","placeholder","Password","name","password",1,"form-control","mb-3","border","border-secondary","rounded-pill","borderInput",3,"ngModel","ngModelChange"],[1,"col","mt-3"],[1,"mx-auto","d-block","text-center","mb-3"],["type","button",1,"btn","btn-primary",2,"width","50%",3,"click"],["type","button",1,"btn","btn-primary","btnGoogle",2,"width","50%",3,"click"],["src","../../../assets/google.png","alt","Icon google",1,"googleIcon"],[1,"mx-auto","d-block","text-center"],["href","#/register","id","linkRegister","routerLink","/SignUp",1,"link","mx-auto","d-block","col-sm-6","fs-4"]],template:function(t,s){1&t&&(f.TgZ(0,"section",0),f.TgZ(1,"figure"),f._UZ(2,"img",1),f.qZA(),f.qZA(),f.TgZ(3,"section",2),f.TgZ(4,"section",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"label",6),f._uU(8,"Email address"),f.qZA(),f.TgZ(9,"input",7),f.NdJ("ngModelChange",function(l){return s.user.email=l}),f.qZA(),f.qZA(),f.TgZ(10,"div",5),f.TgZ(11,"label",8),f._uU(12,"Password"),f.qZA(),f.TgZ(13,"input",9),f.NdJ("ngModelChange",function(l){return s.user.password=l}),f.qZA(),f.qZA(),f.TgZ(14,"section",10),f.TgZ(15,"div",11),f.TgZ(16,"button",12),f.NdJ("click",function(){return s.LogIn()}),f._uU(17,"Log me in"),f.qZA(),f.qZA(),f.TgZ(18,"div",11),f.TgZ(19,"button",13),f.NdJ("click",function(){return s.LogInGoogle()}),f._uU(20,"Log in with "),f._UZ(21,"img",14),f.qZA(),f.qZA(),f.TgZ(22,"div",15),f.TgZ(23,"span"),f._uU(24,"Don't have an account?"),f.TgZ(25,"a",16),f._uU(26,"Sign up now!"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(9),f.Q6J("ngModel",s.user.email),f.xp6(4),f.Q6J("ngModel",s.user.password))},directives:[sN,gT,Lb,Pa,Pb,Vb,dp],styles:["*[_ngcontent-%COMP%]{font-family:var( --font-main)}.logo-home[_ngcontent-%COMP%]{height:35vh}.text[_ngcontent-%COMP%]{color:var(--color-main);font-family:var( --font-main)}.borderInput[_ngcontent-%COMP%]{border:3px solid var(--color-main)!important;background-color:var(--color-light)!important}.btn[_ngcontent-%COMP%]{font-family:var( --font-main)}.btnGoogle[_ngcontent-%COMP%]{background-color:var(--color-main)!important}.googleIcon[_ngcontent-%COMP%]{height:15px}.custom-form[_ngcontent-%COMP%]{background:rgba(255,255,255,.15);padding:2rem 3rem;border-radius:2.5rem;background-color:#ecf0f3;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}"]}),n})()},{path:"SignUp",component:(()=>{class n{constructor(t,s,a){this.authService=t,this.firestoreService=s,this.router=a,this.user={name:"",lastName:"",email:"",password:""}}ngOnInit(){}register(){console.log(this.user);const{email:t,password:s,name:a,lastName:l}=this.user;this.authService.register(t,s).then(p=>{console.log(p),p.additionalUserInfo.isNewUser&&(this.firestoreService.saveInfoUser({uid:p.user.uid,name:a,lastName:l,fullName:a+" "+l,photo:"https://firebasestorage.googleapis.com/v0/b/bitzy-notes.appspot.com/o/icon_user.png?alt=media&token=cb10b199-16c8-4286-8a8a-ff41152ebd9e",email:t}),console.log("Create user succesfull",p))})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cc),f.Y36(Vg),f.Y36(Mr))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-registration"]],decls:26,vars:4,consts:[[1,"mt-2"],["src","../../../assets/logo.png","alt","Icon logo","routerLink","/login",1,"logo-home","mx-auto","d-block"],[1,"row","mx-auto","container","mb-2"],[1,"col-sm-8","mx-auto","d-block","mt-3"],[1,"col","form-group","custom-form"],[1,"form-group"],["for","exampleInputNamel1",1,"text","fs-5"],["type","text","id","exampleInputName1","aria-describedby","emailHelp","placeholder","Enter Name","name","name",1,"form-control","mb-3","border","border-secondary","rounded-pill","borderInput",3,"ngModel","ngModelChange"],["for","exampleInputEmail1",1,"text","fs-5"],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Enter Last Name","name","LastName",1,"form-control","mb-3","border","border-secondary","rounded-pill","borderInput",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"fs-5","text"],["type","email","id","exampleInputPassword1","placeholder","email@example.com","name","email",1,"form-control","mb-3","border","border-secondary","rounded-pill","borderInput",3,"ngModel","ngModelChange"],["type","password","id","exampleInputPassword1","placeholder","Password","name","password",1,"form-control","mb-3","border","border-secondary","rounded-pill","borderInput",3,"ngModel","ngModelChange"],[1,"col"],[1,"mx-auto","d-block","text-center","mb-1","col-sm-8"],["type","button",1,"btn","btn-primary","fs-4",2,"width","50%",3,"click"]],template:function(t,s){1&t&&(f.TgZ(0,"section",0),f.TgZ(1,"figure"),f._UZ(2,"img",1),f.qZA(),f.qZA(),f.TgZ(3,"section",2),f.TgZ(4,"section",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"label",6),f._uU(8,"Name"),f.qZA(),f.TgZ(9,"input",7),f.NdJ("ngModelChange",function(l){return s.user.name=l}),f.qZA(),f.qZA(),f.TgZ(10,"div",5),f.TgZ(11,"label",8),f._uU(12,"Last name"),f.qZA(),f.TgZ(13,"input",9),f.NdJ("ngModelChange",function(l){return s.user.lastName=l}),f.qZA(),f.qZA(),f.TgZ(14,"div",5),f.TgZ(15,"label",10),f._uU(16,"Email"),f.qZA(),f.TgZ(17,"input",11),f.NdJ("ngModelChange",function(l){return s.user.email=l}),f.qZA(),f.qZA(),f.TgZ(18,"div",5),f.TgZ(19,"label",10),f._uU(20,"Password"),f.qZA(),f.TgZ(21,"input",12),f.NdJ("ngModelChange",function(l){return s.user.password=l}),f.qZA(),f.qZA(),f.TgZ(22,"section",13),f.TgZ(23,"div",14),f.TgZ(24,"button",15),f.NdJ("click",function(){return s.register()}),f._uU(25,"Sign up"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(9),f.Q6J("ngModel",s.user.name),f.xp6(4),f.Q6J("ngModel",s.user.lastName),f.xp6(4),f.Q6J("ngModel",s.user.email),f.xp6(4),f.Q6J("ngModel",s.user.password))},directives:[lp,sN,gT,Lb,Pa,Pb,Vb],styles:[".logo-home[_ngcontent-%COMP%]{height:25vh}.text[_ngcontent-%COMP%]{color:var(--color-main);font-family:var( --font-main)}.borderInput[_ngcontent-%COMP%]{border:3px solid var(--color-main)!important;background-color:var(--color-light)!important}.btn[_ngcontent-%COMP%]{font-family:var( --font-main)}.custom-form[_ngcontent-%COMP%]{background:rgba(255,255,255,.15);padding:2rem 3rem;border-radius:2.5rem;background-color:#ecf0f3;box-shadow:13px 13px 20px #cbced1,-13px -13px 20px #fff}"]}),n})()},{path:"home",component:(()=>{class n{constructor(t,s){this.authService=t,this.firestoreService=s,this.notes=[],this.newNote={title:"",content:""},this.update={content:"",date:""},this.localUid="",this.idNote=""}ngOnInit(){this.authService.userNotLogged(),this.getUserNotes(),this.getUid(),this.localUid=localStorage.getItem("localUid")}getUid(){this.userUID=this.authService.getUserActive()}logOut(){window.localStorage.removeItem("localUid"),this.authService.logout(),console.log("adioj")}getUserNotes(){this.firestoreService.getNotes().subscribe(t=>{this.notes=[],t.forEach(s=>{this.notes.push(Object.assign({id:s.payload.doc.id},s.payload.doc.data()))}),console.log(this.notes),this.userNotes=this.getFilteredNotes()})}getFilteredNotes(){return this.notes.filter(this.localUid===this.userUID?t=>t.idUser===this.userUID:t=>t.idUser===this.localUid)}createNote(){const{title:t,content:s}=this.newNote;console.log("Note saved"),console.log(this.newNote);const p={title:t,content:s,date:(new Date).toString(),idUser:this.localUid};this.newNote.title="",this.newNote.content="",this.firestoreService.createNote(p)}getIdNote(t,s){return console.log(t),console.log(s),this.idNote=t}updateContent(){this.firestoreService.updateNote(this.idNote,{content:this.update.content})}deleteNote(t){this.firestoreService.deleteNote(t),console.log("Delete note")}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cc),f.Y36(Vg))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home"]],decls:56,vars:4,consts:[[1,"navbar","navbar-expand-lg"],["href","#",1,"navbar-brand"],["src","../../../assets/icon.png","alt","Icon logo",1,"logo","mx-auto","d-block"],["type","button","data-toggle","collapse","data-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"fas","fa-bars","fs-2"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],[1,"nav-link","fs-4"],[1,"nav-item"],[1,"nav-link","fs-4",3,"click"],[1,"mx-auto","d-block","text-center","mb-3","mt-3"],["type","button","data-toggle","modal","data-target","#basicModal",1,"btn","btn-primary","btnPlus","float-end","me-5","mb-3"],[1,"fas","fa-plus","fs-3"],[1,"mx-auto","container","row","mt-3"],["class","col-sm-6",4,"ngFor","ngForOf"],[1,"mx-auto","d-block","text-center"],["id","basicModal","tabindex","-1","role","dialog","aria-labelledby","basicModal","aria-hidden","true",1,"modal","fade","mt-5"],[1,"modal-dialog"],[1,"modal-content","mt-5","col-sm-6",2,"width","300px"],[1,"modal-header","bg-light"],[1,"md-form","text-dark"],[1,"text-dark"],["type","text","id","form102","name","title",1,"form-control","text-dark",3,"ngModel","ngModelChange"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","btn","btn-primary","btnPlus"],[1,"fas","fa-times","fs-5"],[1,"modal-body","text-dark"],[1,"md-form"],["id","form103","placeholder","Write something here...","name","content",1,"md-textarea","form-control","text-dark",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-default","text-dark"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","basicModalUpdate","tabindex","-1","role","dialog","aria-labelledby","basicModal","aria-hidden","true",1,"modal","fade","mt-5"],["id","form103","name","contentUpdated",1,"md-textarea","form-control","text-dark",3,"ngModel","ngModelChange"],[1,"text-center","mt-3","fs-5","fixed-bottom"],[1,"mt-1"],[1,"col-sm-6"],[1,"card","text-dark","bg-light","mb-3"],[1,"card-header"],[1,"card-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close","btn","btn-primary","btnPlus","float-end",3,"click"],[1,"fas","fa-trash"],["type","button","data-dismiss","modal","aria-label","Close","data-toggle","modal","data-target","#basicModalUpdate",1,"close","btn","btn-primary","btnPlus","float-end",3,"click"],[1,"fas","fa-edit"],[1,"card-body"],[1,"card-text","text-dark"],[1,"card-text","text-dark","float-end"]],template:function(t,s){1&t&&(f.TgZ(0,"nav",0),f.TgZ(1,"a",1),f._UZ(2,"img",2),f.qZA(),f.TgZ(3,"button",3),f._UZ(4,"i",4),f.qZA(),f.TgZ(5,"div",5),f.TgZ(6,"ul",6),f.TgZ(7,"li",7),f.TgZ(8,"a",8),f._uU(9,"My Notes"),f.qZA(),f.qZA(),f.TgZ(10,"li",9),f.TgZ(11,"a",10),f.NdJ("click",function(){return s.logOut()}),f._uU(12,"Log out"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(13,"section",11),f.TgZ(14,"button",12),f._UZ(15,"i",13),f.qZA(),f.qZA(),f.TgZ(16,"section",14),f.YNc(17,DM,15,6,"section",15),f.qZA(),f.TgZ(18,"section",16),f.TgZ(19,"div",17),f.TgZ(20,"div",18),f.TgZ(21,"div",19),f.TgZ(22,"div",20),f.TgZ(23,"div",21),f.TgZ(24,"p",22),f._uU(25,"Title"),f.qZA(),f.TgZ(26,"input",23),f.NdJ("ngModelChange",function(l){return s.newNote.title=l}),f.qZA(),f.qZA(),f.TgZ(27,"button",24),f._UZ(28,"i",25),f.qZA(),f.qZA(),f.TgZ(29,"div",26),f.TgZ(30,"div",27),f.TgZ(31,"textarea",28),f.NdJ("ngModelChange",function(l){return s.newNote.content=l}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(32,"div",29),f.TgZ(33,"button",30),f._uU(34,"Close"),f.qZA(),f.TgZ(35,"button",31),f.NdJ("click",function(){return s.createNote()}),f._uU(36,"Save changes"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(37,"section",16),f.TgZ(38,"div",32),f.TgZ(39,"div",18),f.TgZ(40,"div",19),f.TgZ(41,"div",20),f.TgZ(42,"div",21),f.TgZ(43,"p",22),f._uU(44,"Edit your note c:"),f.qZA(),f.qZA(),f.TgZ(45,"button",24),f._UZ(46,"i",25),f.qZA(),f.qZA(),f.TgZ(47,"div",26),f.TgZ(48,"div",27),f.TgZ(49,"textarea",33),f.NdJ("ngModelChange",function(l){return s.update.content=l}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(50,"div",29),f.TgZ(51,"button",31),f.NdJ("click",function(){return s.updateContent()}),f._uU(52,"Update Note"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(53,"footer",34),f.TgZ(54,"p",35),f._uU(55,"\xa9 2021 - Best footer ever!"),f.qZA(),f.qZA()),2&t&&(f.xp6(17),f.Q6J("ngForOf",s.userNotes),f.xp6(9),f.Q6J("ngModel",s.newNote.title),f.xp6(5),f.Q6J("ngModel",s.newNote.content),f.xp6(18),f.Q6J("ngModel",s.update.content))},directives:[Di,Pa,Pb,Vb],pipes:[Mf],styles:["*[_ngcontent-%COMP%]{margin:0;color:#fff}nav[_ngcontent-%COMP%]{background-color:var(--color-main);font-family:var(--font-main)}.logo[_ngcontent-%COMP%]{height:7vh;margin-left:2.5vh!important}.navbar-brand[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.navbar-toggler[_ngcontent-%COMP%]:focus{box-shadow:none}.navbar-nav[_ngcontent-%COMP%]{align-items:center}a[_ngcontent-%COMP%]{margin-right:1rem;cursor:pointer}.nav-link[_ngcontent-%COMP%]:hover{color:var(--color-secundary)}.nav-link[_ngcontent-%COMP%]:focus, .nav-link[_ngcontent-%COMP%]:hover{color:var(--color-secundary)}.navbar-expand-lg[_ngcontent-%COMP%]   .navbar-collapse[_ngcontent-%COMP%]{justify-content:flex-end}body[_ngcontent-%COMP%]{height:85vh}.btnPlus[_ngcontent-%COMP%]{background-color:var(--color-main)!important}.card-header[_ngcontent-%COMP%]{background-color:var(--color-main)!important}.modal-dialog[_ngcontent-%COMP%]{display:inline-block;text-align:left;vertical-align:middle}.shadow-textarea[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]::placeholder{font-weight:300}.shadow-textarea[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{padding-left:.8rem}footer[_ngcontent-%COMP%]{background-color:var(--color-main);font-family:var(--font-main);height:5vh}"]}),n})()},{path:"**",redirectTo:"login",pathMatch:"full"}];let AM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[pv.forRoot(TM)],pv]}),n})(),SM=(()=>{class n{constructor(){this.title="bitzy-notes"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,s){1&t&&f._UZ(0,"router-outlet")},directives:[Sm],styles:[""]}),n})();const GR_firebase={projectId:"bitzy-notes",appId:"1:811894302822:web:e1aeba996517910d8765a7",storageBucket:"bitzy-notes.appspot.com",apiKey:"AIzaSyDE7chzqjr_qRkZmFBP9500Rwaq3ps9JFM",authDomain:"bitzy-notes.firebaseapp.com",messagingSenderId:"811894302822"};let xM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[SM]}),n.\u0275inj=f.cJS({providers:[],imports:[[Qa,AM,CM,ts.hO.initializeApp(GR_firebase)]]}),n})();(0,f.G48)(),gl().bootstrapModule(xM).catch(n=>console.error(n))},4762:(et,Te,V)=>{"use strict";function ce(ne,oe){var fe={};for(var ue in ne)Object.prototype.hasOwnProperty.call(ne,ue)&&oe.indexOf(ue)<0&&(fe[ue]=ne[ue]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ue=Object.getOwnPropertySymbols(ne);Pe<ue.length;Pe++)oe.indexOf(ue[Pe])<0&&Object.prototype.propertyIsEnumerable.call(ne,ue[Pe])&&(fe[ue[Pe]]=ne[ue[Pe]])}return fe}function le(ne,oe,fe,ue){return new(fe||(fe=Promise))(function(ge,tt){function Ut(Gt){try{_t(ue.next(Gt))}catch(On){tt(On)}}function Mn(Gt){try{_t(ue.throw(Gt))}catch(On){tt(On)}}function _t(Gt){Gt.done?ge(Gt.value):function(ge){return ge instanceof fe?ge:new fe(function(tt){tt(ge)})}(Gt.value).then(Ut,Mn)}_t((ue=ue.apply(ne,oe||[])).next())})}function W(ne,oe){var ue,Pe,ge,tt,fe={label:0,sent:function(){if(1&ge[0])throw ge[1];return ge[1]},trys:[],ops:[]};return tt={next:Ut(0),throw:Ut(1),return:Ut(2)},"function"==typeof Symbol&&(tt[Symbol.iterator]=function(){return this}),tt;function Ut(_t){return function(Gt){return function(_t){if(ue)throw new TypeError("Generator is already executing.");for(;fe;)try{if(ue=1,Pe&&(ge=2&_t[0]?Pe.return:_t[0]?Pe.throw||((ge=Pe.return)&&ge.call(Pe),0):Pe.next)&&!(ge=ge.call(Pe,_t[1])).done)return ge;switch(Pe=0,ge&&(_t=[2&_t[0],ge.value]),_t[0]){case 0:case 1:ge=_t;break;case 4:return fe.label++,{value:_t[1],done:!1};case 5:fe.label++,Pe=_t[1],_t=[0];continue;case 7:_t=fe.ops.pop(),fe.trys.pop();continue;default:if(!(ge=(ge=fe.trys).length>0&&ge[ge.length-1])&&(6===_t[0]||2===_t[0])){fe=0;continue}if(3===_t[0]&&(!ge||_t[1]>ge[0]&&_t[1]<ge[3])){fe.label=_t[1];break}if(6===_t[0]&&fe.label<ge[1]){fe.label=ge[1],ge=_t;break}if(ge&&fe.label<ge[2]){fe.label=ge[2],fe.ops.push(_t);break}ge[2]&&fe.ops.pop(),fe.trys.pop();continue}_t=oe.call(ne,fe)}catch(Gt){_t=[6,Gt],Pe=0}finally{ue=ge=0}if(5&_t[0])throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}([_t,Gt])}}}function Q(ne){var oe="function"==typeof Symbol&&Symbol.iterator,fe=oe&&ne[oe],ue=0;if(fe)return fe.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&ue>=ne.length&&(ne=void 0),{value:ne&&ne[ue++],done:!ne}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(ne,oe){var fe="function"==typeof Symbol&&ne[Symbol.iterator];if(!fe)return ne;var Pe,tt,ue=fe.call(ne),ge=[];try{for(;(void 0===oe||oe-- >0)&&!(Pe=ue.next()).done;)ge.push(Pe.value)}catch(Ut){tt={error:Ut}}finally{try{Pe&&!Pe.done&&(fe=ue.return)&&fe.call(ue)}finally{if(tt)throw tt.error}}return ge}function de(ne,oe,fe){if(fe||2===arguments.length)for(var ge,ue=0,Pe=oe.length;ue<Pe;ue++)(ge||!(ue in oe))&&(ge||(ge=Array.prototype.slice.call(oe,0,ue)),ge[ue]=oe[ue]);return ne.concat(ge||Array.prototype.slice.call(oe))}V.d(Te,{_T:()=>ce,mG:()=>le,Jh:()=>W,XA:()=>Q,CR:()=>Z,ev:()=>de})},8239:(et,Te,V)=>{"use strict";function f(F,ce,te,ie,Ee,le,W){try{var k=F[le](W),L=k.value}catch(Q){return void te(Q)}k.done?ce(L):Promise.resolve(L).then(ie,Ee)}function ee(F){return function(){var ce=this,te=arguments;return new Promise(function(ie,Ee){var le=F.apply(ce,te);function W(L){f(le,ie,Ee,W,k,"next",L)}function k(L){f(le,ie,Ee,W,k,"throw",L)}W(void 0)})}}V.d(Te,{Z:()=>ee})}},et=>{et(et.s=9635)}]);